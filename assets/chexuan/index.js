System.register("chunks:///_virtual/chexuan",["./CheXuanEntry.ts","./CheXuanData.ts","./CheXuanEnum.ts","./CheXuanLogic.ts","./CheXuanModel.ts","./CheXuanPlayer.ts","./CheXuanServer.ts","./CheXuanOperateView.ts","./CheXuanOtherCardsView.ts","./CheXuanSelfCardView.ts","./CheXuanView.ts","./ChuoPaiView.ts","./CongratulationView.ts","./CountdownView.ts","./DaiRuSettingView.ts","./GameChatView.ts","./GameMatchView.ts","./GameRecord.ts","./GameSwitchRoom.ts","./GameZhanJi.ts","./GunlunView.ts","./MenuView.ts","./PaiXingIntroductionView.ts","./PlayerDetailView.ts","./PlayerGiveView.ts","./PlayerView.ts","./PlayerZhanJiItem.ts","./PrizePoolView.ts","./PrizePoolViewPrize.ts","./PrizePoolViewRecord.ts","./PrizePoolViewTotal.ts","./RechargeView.ts","./SliderProgressBar.ts","./TableSettingView.ts","./remarkView.ts","./switchRoomView.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/CheXuanData.ts",["cc","./BaseData.ts","./CheXuanPlayer.ts","./CheXuanEnum.ts","./CheXuanModel.ts","./UserData.ts","./CommonData.ts","./PokerUtils.ts","./SaveDataUtils.ts"],(function(e){"use strict";var t,a,s,i,r,n,o,h,l,u,d;return{setters:[function(e){t=e.cclegacy},function(e){a=e.default},function(e){s=e.CheXuanPlayer},function(e){i=e.CheXuanPhase,r=e.CheXuanEvent},function(e){n=e.CheXuanModel},function(e){o=e.UserDataEn},function(e){h=e.HallModelTableState},function(e){l=e.PokerUtils},function(e){u=e.default,d=e.SaveDataType}],execute:function(){t._RF.push({},"c2ddfhIlJhJQZ+414trLQp6","CheXuanData",void 0);class m extends a{constructor(){super(),this.cuoPaiEnabled=!1,this.mySeatId=-1,this.seatStartId=-1,this.playerList=void 0,this.gamingPlayerList=void 0,this.keepSeatPlayerList=void 0,this.currentPhase=void 0,this.roomConfig=null,this.maxTableSeat=8,this.curTurnSeatId=-1,this.curTurnPlayer=void 0,this.curBanker=-1,this._mangoPool=0,this._mangoCount=0,this._dipi=0,this._prizePool=0,this._gameState=-1,this.prizeConfig=null,this.prizePools=null,this.addTimeCost=0,this.gameEnd=!1,this.muteUsers=[],this.IsFirstLoad=!1;var e=u.get("cuo_pai_enabled",d.ALL);this.cuoPaiEnabled=!!e,this.resetRoomInfo()}get mangoPool(){return this._mangoPool}get mangoCount(){return this._mangoCount}get dipi(){return this._dipi}get canOperate(){if(!this.isISitdown)return!1;var e=this.getMyself();return!!e&&e.canOperate}get gameState(){return this._gameState}set gameState(e){this._gameState=e,this.curTurnSeatId=-1,this.curTurnPlayer=null,0==this._gameState||1==this._gameState||2==this._gameState?this.currentPhase=i.Betting:3==this._gameState?this.currentPhase=i.FenPai:4==this._gameState&&(this.currentPhase=i.Settle)}get isGaming(){return this._gameState>=0&&this._gameState<4}get prizePool(){return this._prizePool}set prizePool(e){this._prizePool=e||0,this._prizePool&&App.event.emitCustom(r.PrizePoolChanged)}setMangoPool(e,t){this._mangoPool=e||0,this._mangoCount=t||0}setMySeatId(e){this.mySeatId=e,this.mySeatId>=0&&(this.seatStartId=this.mySeatId)}gameSttle(e){this._dipi=0,this._mangoPool=e.mangoPool,this.playerList.forEach((e=>e.settleTurnBet())),e.seatInfo.forEach((e=>{var t=this.getPlayerById(e.userId);null!=t&&e.bobo&&(t.balance=e.bobo)})),App.event.emitCustom(r.RoomRemainTimeUpdate,e.remainTime)}setBanker(e){this.curBanker=e;var t=this.getPlayerBySeatId(e);null!=t?(t.isBanker=!0,App.event.emitCustom(r.SetBanker,e)):e>=0&&Log.e("[CheXuanData] 没找到庄家数据")}resetRoomInfo(){this.playerList=[],this.gamingPlayerList=[],this.keepSeatPlayerList=[],this._gameState=-1,this._mangoPool=0,this._dipi=0,this.mySeatId=-1,this.seatStartId=-1,this._prizePool=0,this.restDeskInfo(),this.prizeConfig=null,this.prizePool=null}restDeskInfo(){this.currentPhase=i.Wait,this.curTurnSeatId=-1,this.curBanker=-1,this.curTurnPlayer=null,this.playerList.forEach((e=>{e.isGameing=!1})),this.gamingPlayerList=[]}getUISeadId(e){if(-1==this.seatStartId)return e;return(e-this.seatStartId+8)%8}getSeatIdByUIIndex(e){return-1==this.seatStartId?e:(e+this.seatStartId)%8}getPlayerByUIIndex(e){return this.getPlayerBySeatId(this.getSeatIdByUIIndex(e))}addPlayer(e){let t=this.getPlayerById(e.userId);t||(t=new s),t.playerName=e.username,t.remarkName=e.remarkName,t.avatar=e.avatar,t.playerId=e.userId,t.isMuteVoice=y.isInMuteUser(t.playerId),t.isSelf&&(console.log("自己坐下"),y.setMySeatId(e.seatId));var a=e.bet||0;t.balance=e.bobo+a,t.seatId=e.seatId,t.cardCount=e.cardCount||0,t.handCards=[],t.addCardList(e.cards),t.betAmount=a,t.playerAction=e.oprateType||null,t.splited=e.splited;var i=e.state||0;return t.isGameing=i==h.GAME,t.isKeepSeat=!1,t.sanhuaEnable=e.enable??!0,t.keepSeatRemainTime=0,t.setOperateTime(e.totalTime||0,e.operatTick||0),t.xiuCards=[],e.xiu&&e.xiu.length>0&&(e.xiu.length>=1&&t.xiuCards.push(0!=e.xiu[0]),e.xiu.length>=2&&t.xiuCards.push(0!=e.xiu[1])),this.playerList.push(t),t.isGameing&&this.gamingPlayerList.push(t),this.playerList.sort(((e,t)=>e.seatId-t.seatId)),t}addKeepSeatPlayer(e){if(!e.remainTime||e.remainTime<=0)return null;let t=this.getPlayerById(e.userId);t||(t=new s),t.playerName=e.username,t.remarkName=e.remarkName,t.avatar=e.avatar,t.playerId=e.userId,t.isMuteVoice=y.isInMuteUser(t.playerId),t.isSelf&&y.setMySeatId(e.seatId);var a=e.bet||0,i=e.bobo||0;return t.balance=i+a,t.seatId=e.seatId,t.cardCount=e.cardCount||0,t.handCards=[],t.addCardList(e.cards),t.betAmount=a,t.playerAction=e.oprateType||null,t.isGameing=!1,t.isKeepSeat=!0,t.sanhuaEnable=!0,t.keepSeatRemainTime=e.remainTime||0,t.xiuCards=[],this.playerList.push(t),this.playerList.sort(((e,t)=>e.seatId-t.seatId)),t}saveKeepSeatPlayer(e){if(e){var t=this.keepSeatPlayerList.find((t=>{t.seatId,e.seatId}));t?t.bobo=e.bobo:this.keepSeatPlayerList.push(e)}}isExistKeepSeat(e){return null!=this.getPlayerKeepSeat(e)}getPlayerKeepSeat(e){return this.keepSeatPlayerList.find((t=>t.seatId==e))}removePlayerKeepSeat(e){var t=this.getPlayerKeepSeat(e);t&&this.keepSeatPlayerList.splice(this.keepSeatPlayerList.indexOf(t),1)}allKeepSeatPlayerSitdown(){for(var e=0;e<this.keepSeatPlayerList.length;e++)n.keepSeatPlayerSitdown(this.keepSeatPlayerList[e]);this.keepSeatPlayerList=[]}get isIHasSeat(){return-1!=this.mySeatId}get isISitdown(){return-1!=this.mySeatId&&!this.getMyself().isKeepSeat}isMySelf(e){return this.mySeatId==e}getMyself(){return Log.d("[CheXuanGame] getMyself seatId = "+this.mySeatId),this.getPlayerBySeatId(this.mySeatId)}isGamingPlayer(e){return null!=this.gamingPlayerList.find((t=>t.playerId==e))}hasGamingPlayer(e){return null!=this.gamingPlayerList.find((t=>t.seatId==e))}getPlayerBySeatId(e){return this.playerList.find((t=>t.seatId==e))}getPlayerById(e){return this.playerList.find((t=>t.playerId==e))}removePlayer(e){this.playerList=this.playerList.filter((t=>t.playerId!==e)),e==o.getUserData().id&&(y.mySeatId=-1)}removePlayerBySeatId(e){this.playerList=this.playerList.filter((t=>t.seatId!==e)),e==y.mySeatId&&(y.mySeatId=-1)}getCrtTurnBiggestAmount(){var e=0;return this.playerList.forEach((t=>{t.betAmount>e&&(e=t.betAmount)})),e}getCurrentPhase(){return this.currentPhase}setRoomConfig(e){this.roomConfig=e}getRoomConfig(){return this.roomConfig}setCurrentPhase(e){this.currentPhase=e,e==i.End&&(this.gamingPlayerList=[],this.allKeepSeatPlayerSitdown())}getCurrentPlayer(){return this.curTurnPlayer}setNextPlayer(e,t=15,a=0){this.curTurnSeatId=e??-1,this.curTurnPlayer=this.getPlayerBySeatId(e),this.curTurnPlayer&&this.curTurnPlayer.setOperateTime(t,a)}startGame(e){this.addTimeCost>200&&(this.addTimeCost=200),this.currentPhase=i.Betting,this.playerList.forEach((e=>{e.reset()})),this.playerList.sort(((e,t)=>e.seatId-t.seatId)),this.setBanker(e.banker),this.setMangoPool(e.mangoPool,e.mangoCount),this.setNextPlayer(e.operater);for(const t of e.seatInfo){const e=y.getPlayerBySeatId(t.seatId);e&&(e.isGameing=!0,this.gamingPlayerList.push(e),t.bobo&&(e.balance=t.bobo,e.balance+=t.bet||0,e.balance+=t.mangoBet||0),this.addDipi(t.bet),e.placeMangoBet(t.mangoBet),e.placeBet(null,t.bet))}}fenPaiSetting(){y.curTurnSeatId=-1,this.playerList.forEach((e=>{e.setOperateTime(24)}))}addDipi(e){this._dipi+=e,App.event.emitCustom(r.DipiChanged)}getCombinationString(e){return l.getCombinationString(e,this.roomConfig.diwang)}addToMuteUser(e){this.muteUsers.push(e)}removeFromMuteUser(e){const t=this.muteUsers.findIndex((t=>t===e));-1!=t&&this.muteUsers.splice(t,1)}isInMuteUser(e){return-1!=this.muteUsers.findIndex((t=>t===e))}}m.Instance=new m;let y=e("CheXuanData",m.Instance);t._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanEntry.ts",["cc","./Entry.ts","./Decorators.ts","./Macros.ts","./CheXuanModel.ts","./CheXuanView.ts"],(function(){"use strict";var e,t,n,s,u,r;return{setters:[function(t){e=t.cclegacy},function(e){t=e.Entry},function(e){n=e.registerEntry},function(e){s=e.Macro},function(e){u=e.CheXuanModel},function(e){r=e.default}],execute:function(){var a;e._RF.push({},"87b18oreptLR75iTQBKwTOA","CheXuanEntry",void 0);n("CheXuanEntry",s.BUNDLE_CheXuan,r)(a=class extends t{addNetHandler(){}removeNetHandler(){}loadResources(e){e()}initData(){u.initEvents()}pauseMessageQueue(){}resumeMessageQueue(){}});e._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanEnum.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){let n,i,u,o;e({CheXuanEvent:void 0,CheXuanPhase:void 0,CheXuanPokerType:void 0,PlayerCheXuanAct:void 0}),a._RF.push({},"242c3eKLLlMLJkfFtGBiUEV","CheXuanEnum",void 0),function(e){e[e.Raise=0]="Raise",e[e.Call=1]="Call",e[e.Double=2]="Double",e[e.Fold=3]="Fold",e[e.Discard=4]="Discard"}(n||(n=e("PlayerCheXuanAct",{}))),function(e){e[e.Wait=0]="Wait",e[e.Betting=1]="Betting",e[e.FenPai=2]="FenPai",e[e.Settle=3]="Settle",e[e.End=4]="End"}(i||(i=e("CheXuanPhase",{}))),function(e){e[e.DingErHuang=60]="DingErHuang",e[e.TianPaiDui=59]="TianPaiDui",e[e.DiPaiDui=58]="DiPaiDui",e[e.RenPaiDui=57]="RenPaiDui",e[e.HePaiDui=56]="HePaiDui",e[e.Pair=30]="Pair",e[e.NaiGou=28]="NaiGou",e[e.TianGang=27]="TianGang",e[e.DiGang=26]="DiGang",e[e.TianGuan9=25]="TianGuan9",e[e.DiGuan9=24]="DiGuan9",e[e.RenPai9=23]="RenPai9",e[e.HeWu9=22]="HeWu9",e[e.ChangEr9=21]="ChangEr9",e[e.HuTou9=20]="HuTou9"}(u||(u=e("CheXuanPokerType",{}))),function(e){e.RoomEnter="CheXuan_RoomEnter",e.ChangeTableBg="CheXuan_ChangeTableBg",e.ChangePokerBack="CheXuan_ChangePokerBack",e.ShowTakeMoney="CheXuan_ShowTakeMoney",e.PlayerSitDown="CheXuan_PlayerSitDown",e.PlayerBackSitDown="CheXuan_PlayerBackSitDown",e.PlayerKeepStand="CheXuan_PlayerKeepStand",e.PlayerShowBack="CheXuan_PlayerShowBack",e.PlayerHideBack="CheXuan_PlayerHideBack",e.PlayerSitDownHead="CheXuan_PlayerSitDownHead",e.PlayerKeepSeat="CheXuan_PlayerKeepSeat",e.PlayerKeepSeatTimeout="CheXuan_PlayerKeepSeatTimeout",e.SelfSitDown="CheXuan_SelfSitDown",e.PlayerLeave="CheXuan_PlayerLeave",e.StartGame="CheXuan_StartGame",e.PhaseChange="CheXuan_PhaseChange",e.FaPaiStart="CheXuan_FaPaiStart",e.FaPaiEnd="CheXuan_FaPaiEnd",e.TurnToPlayer="CheXuan_TurnToPlayer",e.OperateSuccess="CheXuan_OperateSuccess",e.PlayerAct="CheXuan_PlayerAct",e.FenPaiConfirm="CheXuan_FenPaiConfirm",e.FenPaiSuccess="CheXuan_FenPaiSuccess",e.GameSettle="CheXuan_GameSettle",e.DipiChanged="CheXuan_DipiChanged",e.PrizePoolChanged="CheXuan_PrizePoolChanged",e.RoomDismiss="CheXuan_RoomDismiss",e.RoomEnd="CheXuan_RoomEnd",e.BroadChatMsg="CheXuan_BroadChatMsg",e.ReEnterRoom="CheXuan_ReEnterRoom",e.XiuCard="CheXuan_ShowCard",e.ForceXiuCard="CheXuan_ForceShowCard",e.AddTime="CheXuan_AddTime",e.ShowNextCard="CheXuan_ShowNextCard",e.NextCardEmpty="CheXuan_NextCardEmpty",e.ShowGoodPool="CheXuan_ShowGoodPool",e.ResetNextCardID="CheXuan_ResetNextCardID",e.RoomRemainTimeUpdate="CheXuan_RoomRemainTimeUpdate",e.OpenSetting="CheXuan_OpenSetting",e.OpenPaiXingIntroduction="CheXuan_OpenPaiXingIntroduction",e.OpenTableSettingView="CheXuan_OpenTableSettingView",e.ShowPlayerDetail="CheXuan_ShowPlayerDetail",e.GivePlayerMoney="CheXuan_GivePlayerMoney",e.CuoPaiClose="CheXuan_CuoPaiClose",e.SetBanker="CheXuan_SetBanker",e.PlayOtherVoice="CheXuan_PlayOtherVoice",e.PlayerBalanceChanged="CheXuan_PlayerBalanceChanged"}(o||(o=e("CheXuanEvent",{})));e("VoiceType",{PreLoad:0,Loading:1,Playing:2,Pause:3,Complete:4});a._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanLogic.ts",["cc","./Logic.ts"],(function(c){"use strict";var e,t;return{setters:[function(c){e=c.cclegacy},function(c){t=c.Logic}],execute:function(){e._RF.push({},"c330aeGrGVGX4fHiYq8/0I5","CheXuanLogic",void 0);c("default",class extends t{}),e._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanModel.ts",["cc","./Macros.ts","./NetEventModel.ts","./HallData.ts","./CheXuanData.ts","./CheXuanEnum.ts","./Config.ts","./Utils.ts","./UserData.ts","./GameDefine.ts","./HallModel.ts","./CommonData.ts","./GameMatchView.ts","./ClubInfoData.ts"],(function(e){"use strict";var t,a,o,s,i,r,p,l,n,d,h,c,u,m,A,g;return{setters:[function(e){t=e.cclegacy,a=e.Color},function(e){o=e.Macro},function(e){s=e.NetEventModel},function(e){i=e.HallDataEn},function(e){r=e.CheXuanData},function(e){p=e.CheXuanEvent},function(e){l=e.Config,n=e.ViewZOrder},function(e){d=e.default},function(e){h=e.UserDataEn},function(t){c=t.OperateType,e("OperateType",t.OperateType)},function(e){u=e.HallModel},function(e){m=e.EmRoomEvent},function(e){A=e.default},function(e){g=e.ClubInfoDataEn}],execute:function(){e({ChatType:void 0,ErrorCode:void 0,GameTableState:void 0,SettleType:void 0}),t._RF.push({},"97f006CDnlLQI0YvkkTrJww","CheXuanModel",void 0);class I extends s{constructor(){super(),this.sexMap=new Map}initEvents(){super.initEvents()}registerEventListener(){this.reset(),this.registerEvent("standUp",(e=>this.onPlayerLeave(e))),this.registerEvent("sitDown",(e=>{this.playerSitdown(e)})),this.registerEvent("syncState",(e=>{this.onSyncState(e)})),this.registerEvent("operated",(e=>{this.onReceiveOperate(e)})),this.registerEvent("operater",(e=>{this.onTurnTo(e.seatId,e.canJiaZhu)})),this.registerEvent("splited",(e=>{this.onSplited(e.seatId,e.diu)})),this.registerEvent("tableTimeOut",(()=>{this.onRoomDismiss()})),this.registerEvent("roomEnd",(e=>{this.onRoomEnd(e)})),this.registerEvent("broadChatMessage",(e=>{this.onBroadChatMsg(e)})),this.registerEvent("AutomaticRenewal",(e=>{this.onAutomaticRenewal(e)})),this.registerEvent("leaveBriefly",(e=>{this.onUserKeepSeat(e)})),this.registerEvent("clearSeat",(e=>{this.onClearKeepSeat(e.tableId,e.seatId,e.userId)})),this.registerEvent("xiuCard",(e=>{this.onReceiveXiuCard(e)})),this.registerEvent("addTime",(e=>{this.onReceiveAddTime(e)})),this.registerEvent("nextCard",(e=>{this.onReceiveNextCard(e)})),this.registerEvent("goolPool",(e=>{this.onReceiveGoolPool(e)})),this.registerEvent("meiDaDao",(e=>{this.onMeiDaDao(e)})),this.registerEvent("addNextScore",(e=>{this.onNeedMoreScore(e)})),this.registerEvent("qzXiuPai",(e=>{this.onShowCard(e)})),this.registerEvent("autoJoinQueue",(e=>this.onMatchView(e))),this.registerEvent("matchCode",(e=>{App.event.emit(m.MatchCode,e)}))}initRoomInfo(){this.sexMap.clear();var e=i.getCurEnterRoomData(),t=e.gameInfo;r.resetRoomInfo(),e.muteUser&&e.muteUser.length>0?r.muteUsers=[...e.muteUser]:r.muteUsers=[],r.addTimeCost=e.addTimeCost||0,null!=e.sitInfo&&e.sitInfo.length>0&&e.sitInfo.forEach((e=>{(!t||t.gameState&&t.gameState==E.SETTLE)&&(e.state=0),r.addPlayer(e),App.stageData.IsMatch&&App.event.emitCustom(p.PlayerSitDown,e)}));var a=e.reserveSeat;if(a&&a.length>0&&a.forEach((t=>{var a=!1;e.sitInfo&&e.sitInfo.length>0&&(a=e.sitInfo.some((e=>e.userId==t.userId))),a||r.addKeepSeatPlayer(t)})),t){if(r.setMangoPool(t.mangoPool,t.mangoCount),r.setBanker(t.banker),r.gameState=t.gameState,t.gameState==E.FEN||t.gameState==E.SETTLE)r.setNextPlayer(-1);else{let e=0,a=t.operatTick;e=r.gameState==E.FEN?t.totalTime||24:t.totalTime||15,a>=e&&(a=e);var o=r.getPlayerBySeatId(t.operater);o&&(e=o.crtOperatTotalTime||e,a=o.crtOperatePassTime||a),r.setNextPlayer(t.operater,e,a)}e.sitInfo.forEach((e=>r.addDipi(e.bet)))}Log.d("====>>>>roomConfig: ",e),r.setRoomConfig(e.tableInfo),App.event.emitCustom(p.RoomEnter)}onTurnTo(e,t){r.setNextPlayer(e),Log.d("[CheXuanModel] onTurnTo CheXuanEvent.TurnToPlayer ",t),App.event.emitCustom(p.TurnToPlayer,t)}onSplited(e,t){App.event.emitCustom(p.FenPaiSuccess,e,t)}playerSitdown(e){console.log("当前玩家id："+h.getUserData().id),Log.d("[cheXuanModel] 玩家坐下：",e);const t=r.addPlayer(e);t.isSelf&&r.setMySeatId(t.seatId),r.removePlayerKeepSeat(t.seatId),App.event.emitCustom(p.PlayerSitDown,t)}onSyncState(e){if(r.gameState>=0&&e.gameState==r.gameState)Log.e("收到相同的状态同步，过滤掉 "+e.gameState);else if(r.gameState=e.gameState,e.gameState==E.FEN&&r.fenPaiSetting(),App.event.emitCustom(p.PhaseChange,e.gameState),e.gameState==E.BEGIN){r.startGame(e);let t=this.syncPlayerPokerInfo(e.seatInfo,e.userCuoPai,!1);App.event.emitCustom(p.StartGame,e.hasXiPai||!1,e.seatInfo,t)}else e.gameState==E.MING||e.gameState==E.AN?(r.setNextPlayer(e.operater),this.syncPlayerPokerInfo(e.seatInfo,e.userCuoPai)):e.gameState==E.FEN||e.gameState==E.SETTLE&&(r.gameSttle(e),App.event.emitCustom(p.GameSettle,e.seatInfo,e.hasNext))}syncPlayerPokerInfo(e,t,a=!0){let o=[];for(const a of e){const e=r.getPlayerBySeatId(a.seatId);if(!e)continue;var s=null;a.card?s=new Array(a.card):a.cards&&(s=a.cards),!a.cardCount&&s&&(a.cardCount=s?s.length:0),e.cardCount+=a.cardCount,e.addCardList(s||[]);let i=null;t&&t.forEach((e=>{e.seatId==a.seatId&&(i=e.cp)})),o.push({seatId:a.seatId,cardCount:a.cardCount,cp:i})}return a&&o.length>0&&(console.log("====>>>>fapaiData: ",o),App.event.emitCustom(p.FaPaiStart,o)),o}onReceiveOperate(e){Log.d(`[cheXuanModel] 接受到 ${e.seatId} 的玩家执行了 ${e.operateType} 操作`,e);let t=this.sexMap.get(e.seatId);switch(t||(t=Math.random()>.3?1:-1,this.sexMap.set(e.seatId,t)),e.operateType){case c.DA:case c.GEN:break;case c.QIAO:App.globalAudio.playGlobalEffect(l.audioPath.qiao);break;case c.XIU:App.globalAudio.playGlobalEffect(l.audioPath.xiu);break;case c.DIU:App.globalAudio.playGlobalEffect(l.audioPath.diu)}var a=0;e.operateType!=c.DA&&e.operateType!=c.GEN&&e.operateType!=c.QIAO||(0==(a=e.count||0)&&Log.e("玩家下注未带下注金额："),App.globalAudio.playGlobalEffect(l.audioPath.bet));var o=r.getPlayerBySeatId(e.seatId);null!=o&&(a>0&&r.addDipi(a-o.betAmount),o.placeBet(e.operateType,a)),App.event.emitCustom(p.PlayerAct,e.seatId,e.operateType,a)}switchTable(e,t){Log.d("enterTable tableId "+e.tableId),e.password=e.password||"",e.locate=JSON.stringify(App.stageData.GPSLocation),App.loading.show("正在加入房间..."),App.pomelo.request("cx.cxHandler.enterRequest",e,(e=>{App.loading.hide(),t&&t(e)}))}onPlayerLeave(e){Log.d("[cheXuanModel] 玩家离开",e),this.sexMap.get(e.seatId)&&this.sexMap.delete(e.seatId);if(r.getPlayerBySeatId(e.seatId)&&(r.removePlayerBySeatId(e.seatId),App.event.emitCustom(p.PlayerLeave,e.seatId)),r.isExistKeepSeat(e.seatId)&&!r.isGamingPlayer(e.userId)){var t=r.getPlayerKeepSeat(e.seatId);t&&(r.removePlayerKeepSeat(e.seatId),this.keepSeatPlayerSitdown(t))}let a=h.getUserData().id;App.stageData.IsMatch&&e.userId==a?(T.requestLeave(),App.alert.show({text:"您已结束本次比赛！",confirmCb:e=>{App.globalAudio.playGlobalEffect(l.audioPath.button),App.alert.close()}})):e.userId==a&&e.profitLimit&&!r.gameEnd&&App.tips.show("请及时回归，超时将受到逃跑惩罚")}requestRefleshTableContext(e=0){let t=App.stageData.IsMatch?"hall.hallHandler.refleshTableContext":"cx.cxHandler.refleshTableContext";App.pomelo.request(t,{},(t=>{Log.d("====>>>>请求刷新房间上下文: ",t),0==t.code?(1==e&&App.tips.show("刷新成功"),i.setCurEnterRoomData(t.data),App.event.emitCustom(p.ReEnterRoom),this.registerEventListener()):(t.code==v.ROOM_NOT_EXIST&&App.alert.show("房间已解散!"),this.backToHall())}))}requestSitdown(e){Log.d("====>>>>requestSitdown: ",e),App.loading.show("请求坐下");let t=App.stageData.IsMatch?"hall.hallHandler.sitDownRequest":"cx.cxHandler.sitDownRequest";App.pomelo.request(t,e,(e=>{if(App.loading.hide(),0==e.code){App.tips.show("坐下成功"),Log.d("玩家坐下返回：",e),App.apis.user.getUserInfo();let t=i.getCurEnterRoomData().reserveSeat.filter((e=>e.userId!=h.getUserData().id));i.getCurEnterRoomData().reserveSeat=t,App.event.emitCustom(p.PlayerSitDownHead)}else e.code==v.BALANCE_NOT_ENOUGH?App.alert.show("进入失败，您的余额不足！"):e.code==v.NOT_IN_ROOM?App.tips.show("不在房间内！"):e.code==v.HAVE_SITDOWN?App.tips.show("已经在座位上！"):e.code==v.ROOM_NOT_EXIST?App.tips.show("桌子不存在！"):e.code==v.SEAT_OCCUPIED?App.tips.show("座位有人占用！"):e.code==v.HAS_KEEP_SEAT_IN_OTHER_ROOM?App.tips.show("坐下失败，您在其他房间有留座！"):e.code==v.TIME_NOT_ENOUGH?App.tips.show("坐下失败，剩余时间不足6分钟！"):608==e.code?App.tips.show("比赛已结束！"):App.tips.show("坐下失败！")}))}requestTablePool(){if(!App.pomelo.isConnected())return;let e=App.stageData.IsMatch?"hall.hallHandler.tablePool":"cx.cxHandler.tablePool";App.pomelo.request(e,{},(e=>{if(0==e.code){if(e.data&&e.data.length>0){var t=e.data[0].pool;r.prizePool=t}}else Log.d("获取游戏奖池数据失败")}))}requestGamePool(e){let t=App.stageData.IsMatch?"hall.hallHandler.gamePool":"cx.cxHandler.gamePool";App.pomelo.request(t,{},(t=>{0==t.code?e&&e(t):Log.d("获取游戏总奖池数据失败")}))}requestGamePoolWinList(e,t){let a=App.stageData.IsMatch?"hall.hallHandler.getGamePoolWinList":"cx.cxHandler.getGamePoolWinList";App.pomelo.request(a,e,(e=>{0==e.code?t&&t(e.data):App.tips.show("获取奖励玩家数据失败")}))}requestOperate(e){let t=App.stageData.IsMatch?"hall.hallHandler.operateRequest":"cx.cxHandler.operateRequest";App.pomelo.request(t,e,(e=>{0==e.code?(Log.d("发起操作返回：",e),App.event.emitCustom(p.OperateSuccess)):App.tips.show("下注失败")}))}requestFenPaiConfirm(e,t){var a={cards:t,diu:e};let o=App.stageData.IsMatch?"hall.hallHandler.splitCardsRequest":"cx.cxHandler.splitCardsRequest";App.pomelo.request(o,a,(t=>{0==t.code?Log.d("发起确认分牌,返回：",t):e?App.tips.show("弃牌失败"):App.tips.show("分牌失败")}))}requestStandup(e){let t=App.stageData.IsMatch?"hall.hallHandler.standUpRequest":"cx.cxHandler.standUpRequest",a=App.stageData.IsMatch?{joinQueue:!0}:{};App.pomelo.request(t,a,(t=>{Log.d("====>>>>cx.cxHandler.standUpRequest: ",t),0==t.code?(this.refreshHallData(),e&&e(),App.event.emitCustom(p.PlayerHideBack,!1)):90==t.code?(this.refreshHallData(),App.tips.show("申请成功，下一局将为你切换为围观状态"),App.event.emitCustom(p.PlayerHideBack,!1)):91==t.code?(this.refreshHallData(),App.tips.show("申请成功"),App.event.emitCustom(p.PlayerHideBack,!1)):App.tips.show("站起失败")}))}refreshHallData(){let e=i.getCurEnterRoomData(),t=e.reserveSeat.filter((e=>e.userId!=h.getUserData().id));e.reserveSeat=t,i.setCurEnterRoomData(e)}requestLeave(e){App.loading.show("请求离开");let t=App.stageData.IsMatch?"hall.hallHandler.leaveRequest":"cx.cxHandler.leaveRequest";App.pomelo.request(t,{},(e=>{App.loading.hide(),0===e.code?(this.backToClubRoom(),e.data.profitLimit&&App.alert.show({title:"温馨提示",text:"请及时回归，超时将受到逃跑惩罚",confirmCb:e=>{}})):(Log.d(`退出失败 ${e}`),App.tips.show("暂时不能离开"))}))}requestSetAutoDairu(e){let t=App.stageData.IsMatch?"hall.hallHandler.setTargetAmount":"cx.cxHandler.setTargetAmount";App.pomelo.request(t,{targetAmount:e},(t=>{0==t.code?t.isOk?App.tips.show(`已为您补充积分${d.getScoreImplicit(e)}`):App.tips.show(`下一手开始为您补充积分${d.getScoreImplicit(e)}`):t.code==v.BALANCE_NOT_ENOUGH?App.alert.show("补充积分失败，您的余额不足！"):App.tips.show("补充积分失败")}))}requestKeepSeat(){App.pomelo.request("cx.cxHandler.applyLeaveTable",{},(e=>{0==e.code?App.tips.show("已为您留座"):e.code==v.KEEP_SEAT_NOT_HAVE_TIME?App.tips.show("留座失败,留座时间已用完"):App.tips.show("留座失败")}))}requestArrestInfo(e){let t=App.stageData.IsMatch?"hall.hallHandler.arrestInfo":"cx.cxHandler.arrestInfo";App.pomelo.request(t,{},(t=>{App.uiLoading.hide(),0==t.code?e&&e(t.data):e&&e({transferIn:0,arrest:0,repMango:0,raiseCount:0,minScore:0})}))}requestXiuCard(e){let t=App.stageData.IsMatch?"hall.hallHandler.xiuCardRequest":"cx.cxHandler.xiuCardRequest";App.pomelo.request(t,e,(e=>{}))}requestForceXiuCard(e){let t=App.stageData.IsMatch?"hall.hallHandler.forceXiuCard":"cx.cxHandler.forceXiuCard";App.pomelo.request(t,{},(t=>{0==t.code?(App.event.emitCustom(p.ForceXiuCard,t.data),App.apis.user.getUserInfo(),App.tips.show("秀牌成功")):t.code==v.BALANCE_NOT_ENOUGH?App.tips.show("余额不足"):App.tips.show("秀牌失败"),e&&e(0==t.code)}))}onShowCard(e){App.event.emitCustom(p.ForceXiuCard,e)}onMatchView(e){e.userId==h.getUserData().id&&App.uiManager.open({type:A,bundle:o.BUNDLE_CheXuan,zIndex:n.UI,name:"比赛匹配界面"})}requestAddTime(e){let t=App.stageData.IsMatch?"hall.hallHandler.delayControls":"cx.cxHandler.delayControls";App.pomelo.request(t,{},(t=>{0==t.code?(App.tips.show("延迟时间成功"),r.addTimeCost=t.nextcost||200):t.code==v.BALANCE_NOT_ENOUGH?App.tips.show("余额不足"):App.tips.show("延迟时间失败"),e&&e(0==t.code)}))}requestNextCard(e){let t=App.stageData.IsMatch?"hall.hallHandler.getLastCards":"cx.cxHandler.getLastCards";App.pomelo.request(t,{},(t=>{e&&e(),0==t.code||(t.code==v.BALANCE_NOT_ENOUGH?App.tips.show("余额不足"):App.tips.show("查看下一张牌失败"))}))}requestCutCard(e){let t=App.stageData.IsMatch?"hall.hallHandler.xipaiOperate":"cx.cxHandler.xipaiOperate";App.pomelo.request(t,{},(t=>{e&&e(0==t.code),0==t.code?App.tips.show("请求切牌成功"):t.code==v.BALANCE_NOT_ENOUGH?App.tips.show("余额不足"):App.tips.show("请求切牌失败")}))}onRoomDismiss(){App.event.emitCustom(p.RoomDismiss)}onRoomEnd(e){r.gameEnd=!0,App.event.emitCustom(p.RoomEnd,e)}onBroadChatMsg(e){App.event.emitCustom(p.BroadChatMsg,e)}onAutomaticRenewal(e){if(Log.d("自动补充分数：",e.bobo),e.userId&&e.bobo){let t=r.getPlayerById(e.userId);t&&(t.balance=e.bobo,App.event.emitCustom(p.PlayerBalanceChanged))}}onUserKeepSeat(e){Log.d("玩家保留座位同步：",e);let t=i.getCurEnterRoomData();t.reserveSeat.push({reason:e.reason,avatar:e.avatar,seatId:e.seatId,userId:e.userId,bobo:e.bobo,remainTime:e.remainTime}),t.sitInfo=t.sitInfo.filter((t=>e.userId!=t.userId)),i.setCurEnterRoomData(t),r.getPlayerById(e.userId)||r.isGamingPlayer(e.userId)?(r.saveKeepSeatPlayer(e),this.showKeepSeattips(e)):this.keepSeatPlayerSitdown(e,!0)}keepSeatPlayerSitdown(e,t=!1){var a=r.addKeepSeatPlayer(e);a&&App.event.emitCustom(p.PlayerKeepSeat,a),t&&this.showKeepSeattips(e)}showKeepSeattips(e){e&&e.userId==h.getUserData().id&&(1==e.reason?App.event.emitCustom(p.ShowTakeMoney,e.seatId,e.seatId,!0):2==e.reason&&App.alert.show({tag:"autoLiuZhuo",text:"连续两次未操作，已为您留座",confirmCb:e=>{}}))}onClearKeepSeat(e,t,a){if(r.getRoomConfig().tableId!=e)return;let o=r.getPlayerById(a);o&&o.isKeepSeat&&o.seatId==t&&this.onUserKeepSeatTimeout(t)}onUserKeepSeatTimeout(e){Log.d("玩家保留座位超时同步：",e);r.getPlayerBySeatId(e)&&(r.removePlayerBySeatId(e),App.event.emitCustom(p.PlayerKeepSeatTimeout,e))}onReceiveXiuCard(e){App.event.emitCustom(p.XiuCard,e)}onReceiveAddTime(e){if(e.userId&&e.addTime){var t=r.getPlayerById(e.userId);t&&t.addOperateTime(e.addTime)}App.event.emitCustom(p.AddTime,e)}onReceiveNextCard(e){App.event.emitCustom(p.ShowNextCard,e.card)}onReceiveGoolPool(e){App.event.emitCustom(p.ShowGoodPool,e)}onMeiDaDao(e){App.tips.show(e.msg)}onNeedMoreScore(e){e.userId&&e.userId==h.getUserData().id&&App.event.emitCustom(p.ShowTakeMoney,e.seatId,e.seatId,!0)}requestRealTimeRecord(e){let t=App.stageData.IsMatch?"hall.hallHandler.tableRealTimeRecord":"cx.cxHandler.tableRealTimeRecord";App.pomelo.request(t,{},(t=>{Log.d("游戏战绩返回：",t),0===t.code&&e&&e(t.data)}))}requestGameReplay(e,t){let a=App.stageData.IsMatch?"hall.hallHandler.tableUserReplay":"cx.cxHandler.tableUserReplay";App.pomelo.request(a,{start:e,limit:1},(e=>{console.log("游戏回顾返回:",e),0===e.code&&t&&t(e.data)}))}sendChatMessage(e){let t=App.stageData.IsMatch?"hall.hallHandler.sendChatMessage":"cx.cxHandler.sendChatMessage";App.pomelo.request(t,e,(t=>{0!==t.code?(console.log("====>>>>sendChatMessage: ",e),e.type===S.GIFT&&t.code===v.BALANCE_NOT_ENOUGH?App.tips.show("余额不足"):App.tips.show("发送失败")):e.type===S.GIFT&&App.apis.user.getUserInfo()}))}backToHall(){App.stageData.isHallStage()||(App.stageData.setTempSeat(null),App.stageData.setTempRace(null),App.entryManager.enterBundle(o.BUNDLE_HALL))}backToClubRoom(){u.refreshTableList(1),console.log("退出房间："+App.stageData.isHClubRoomStage()),App.stageData.isHClubRoomStage()||(App.stageData.setTempSeat(null),App.stageData.setTempRace(null),App.entryManager.enterBundle(o.BUNDLE_ClubRoom,g.getClubData()))}}let v,E,C,S;I.instance=new I,function(e){e[e.ROOM_NOT_EXIST=13]="ROOM_NOT_EXIST",e[e.SITDOWN_Failed=15]="SITDOWN_Failed",e[e.SEAT_OCCUPIED=16]="SEAT_OCCUPIED",e[e.HAVE_SITDOWN=17]="HAVE_SITDOWN",e[e.NOT_IN_ROOM=18]="NOT_IN_ROOM",e[e.ROOM_DISMISSED=29]="ROOM_DISMISSED",e[e.HAS_KEEP_SEAT_IN_OTHER_ROOM=96]="HAS_KEEP_SEAT_IN_OTHER_ROOM",e[e.BALANCE_NOT_ENOUGH=94]="BALANCE_NOT_ENOUGH",e[e.KEEP_SEAT_NOT_HAVE_TIME=100]="KEEP_SEAT_NOT_HAVE_TIME",e[e.NEXT_CARD_NOT_EXIST=102]="NEXT_CARD_NOT_EXIST",e[e.TIME_NOT_ENOUGH=103]="TIME_NOT_ENOUGH"}(v||(v=e("ErrorCode",{}))),function(e){e[e.BEGIN=0]="BEGIN",e[e.MING=1]="MING",e[e.AN=2]="AN",e[e.FEN=3]="FEN",e[e.SETTLE=4]="SETTLE"}(E||(E=e("GameTableState",{})));e("SettleData",class{constructor(){this.mangoPool=void 0,this.seatInfo=void 0,this.hasNext=void 0,this.remainTime=void 0}});e("SettlePlayerData",class{constructor(){this.seatId=void 0,this.userId=void 0,this.amount=void 0,this.win=void 0,this.bobo=void 0,this.settleType=void 0,this.cardInfo=void 0,this.gmPool=void 0}});e("SettleCardInfo",class{constructor(){this.cards=void 0,this.types=void 0}}),function(e){e[e.REFUND=0]="REFUND",e[e.WIN=1]="WIN"}(C||(C=e("SettleType",{})));e("CardGroupNameInfo",class{constructor(e,t,o){this.typeName=void 0,this.compPoint=void 0,this.color=void 0,this.typeName=e,this.compPoint=t||0,this.color=o||a.WHITE}});e("RealtimeRecord",class{constructor(){this.total_bobo=void 0,this.total_score=void 0,this.total_pool=void 0,this.game_time=void 0,this.spectators=void 0,this.seats=void 0}});e("Spectation",class{constructor(){this.name=void 0,this.avatar=void 0,this.id=void 0}});e("SeatPlayer",class{constructor(){this.name=void 0,this.bobo=void 0,this.id=void 0,this.score=void 0,this.isEnd=void 0,this.time=void 0,this.win_pool=void 0,this.sui=void 0,this.total_times=void 0}});e("GamePool",class{constructor(){this.config=void 0,this.data=void 0}});e("RewardRate",class{constructor(){this.type=void 0,this.rate=void 0}});e("PoolStats",class{constructor(){this.all=void 0,this.pools=void 0}});e("Pool",class{constructor(){this.pi=void 0,this.pool=void 0}});e("ChatContent",class{constructor(){this.type=void 0,this.from=void 0,this.to=void 0,this.username=void 0,this.index=void 0,this.url=void 0,this.time=void 0}});e("VoiceContent",class{constructor(){this.type=void 0,this.url=void 0,this.time=void 0,this.from=void 0,this.to=void 0}}),function(e){e[e.CHAT=1]="CHAT",e[e.EMOJI=2]="EMOJI",e[e.VOICE=3]="VOICE",e[e.GIFT=4]="GIFT"}(S||(S=e("ChatType",{})));let T=e("CheXuanModel",I.instance);t._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanOperateView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Decorators.ts","./CheXuanModel.ts","./CheXuanEnum.ts","./CheXuanData.ts","./Utils.ts","./PokerUtils.ts","./UIView.ts","./Macros.ts","./SliderEx.ts","./HallData.ts","./GameDefine.ts"],(function(t){"use strict";var i,e,n,s,a,o,r,h,u,l,b,c,m,d,p,T,g,y,B,C,f,M;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Node,a=t.Label,o=t._decorator,r=t.Animation,h=t.Sprite,u=t.find,l=t.Vec3},function(t){b=t.inject},function(t){c=t.GameTableState,m=t.CheXuanModel},function(t){d=t.CheXuanEvent},function(t){p=t.CheXuanData},function(t){T=t.default},function(t){g=t.PokerUtils},function(t){y=t.default},function(t){B=t.Macro},function(t){C=t.default},function(t){f=t.HallDataEn},function(t){M=t.OperateType}],execute:function(){var v,D,S,E,O,N,x,w,I,A,P,U,_,z,q,H,X,Q,G,R,L,F,Z,V,k,j,J,W,K,Y,$,tt,it,et,nt,st,at,ot,rt,ht,ut,lt;n._RF.push({},"c674cmqDbJCnqzZp+VxjkWo","CheXuanOperateView",void 0);const{ccclass:bt}=o;t("default",(v=b("BetTimes",s),D=b("OperateProgress",s),S=b("btnSanhua",s),E=b("btnDiu",s),O=b("btnGen",s),N=b("btnGen/txtAmount",a),x=b("btnQiao",s),w=b("btnBig",s),I=b("btnXiu",s),A=b("btn1Times",s),P=b("btn2TimesMore",s),U=b("btn2Times",s),_=b("btn3TimesMore",s),z=b("btnAddTime",s),q=b("btnNextCard",s),H=b("btnCut",s),X=b("btnAddTime/txtPrice",a),Q=b("BetTimes/SliderBar/Slider",C),G=b("BetTimes/CrtTimes/txtBingNum",a),R=b("BetTimes/CrtTimes/txtBigBei",a),bt((Z=i((F=class extends y{constructor(...t){super(...t),e(this,"BetTimes",Z,this),e(this,"OperateProgress",V,this),e(this,"btnSanhua",k,this),e(this,"btnDiu",j,this),e(this,"btnGen",J,this),e(this,"txtGenAmount",W,this),e(this,"btnQiao",K,this),e(this,"btnBig",Y,this),e(this,"btnXiu",$,this),e(this,"btn1Times",tt,this),e(this,"btn2TimesMore",it,this),e(this,"btn2Times",et,this),e(this,"btn3TimesMore",nt,this),e(this,"btnAddTime",st,this),e(this,"btnNextCard",at,this),e(this,"btnCut",ot,this),e(this,"txtAddTimePrice",rt,this),e(this,"bigSlider",ht,this),e(this,"txtBingNum",ut,this),e(this,"txtBigBei",lt,this),this.dipi=void 0,this.curDaMin=void 0,this.curDaMax=void 0,this.curDa=void 0,this.myBalance=0,this.followMoney=0,this.bigMinMoney=0,this.bigBaseMoney=0,this.requestTime=!1,this.addTimerId=0,this.animComp=null,this.btnBigSprite=null,this.lastIsQiao=!1,this.nextCardId=1,this.isPressing=!1}onLoad(){super.onLoad(),this.initData(),this.initUICmpt()}initData(){}initUICmpt(){this.animComp=this.node.getComponent(r),this.btnBigSprite=this.btnBig.getComponent(h),this.hide()}addEvents(){super.addEvents(),this.onN(this.btnBig,s.EventType.TOUCH_START,this.onBtnBigStart,this),this.onN(this.btnBig,s.EventType.TOUCH_MOVE,this.onBtnBigMove,this),this.onN(this.btnBig,s.EventType.TOUCH_END,this.onBtnBigEnd,this),this.onN(this.btnBig,s.EventType.TOUCH_CANCEL,this.onBtnBigCancel,this),this.onN(this.btnQiao,s.EventType.TOUCH_END,this.onBtnQiao),this.onN(this.btnGen,s.EventType.TOUCH_END,this.onBtnGen),this.onN(this.btnDiu,s.EventType.TOUCH_END,this.onBtnDiu),this.onN(this.btnSanhua,s.EventType.TOUCH_END,this.onBtnDiu),this.onN(this.btnXiu,s.EventType.TOUCH_END,this.onBtnXiu),this.onN(this.btn1Times,s.EventType.TOUCH_END,this.onBtn1Times),this.onN(this.btn2TimesMore,s.EventType.TOUCH_END,this.onBtn2Times),this.onN(this.btn2Times,s.EventType.TOUCH_END,this.onBtn2Times),this.onN(this.btn3TimesMore,s.EventType.TOUCH_END,this.onBtn3Times),this.onN(this.btnAddTime,s.EventType.TOUCH_END,this.onBtnAddTime),this.onN(this.btnNextCard,s.EventType.TOUCH_END,this.onBtnNextCard),this.onN(this.btnCut,s.EventType.TOUCH_END,this.onBtnCut),this.onCustom(d.TurnToPlayer,this.OnTurnToPlayer),this.onCustom(d.PhaseChange,this.OnPhaseChange),this.onCustom(d.FenPaiSuccess,this.stopFenPai),this.onCustom(d.NextCardEmpty,this.onNextCardEmpty),this.onCustom(d.ResetNextCardID,this.onResetNextCardID)}onDestroy(){super.onDestroy()}hide(){this.BetTimes.active=!1,this.OperateProgress.active=!1,this.btnGen.active=!1,this.btnQiao.active=!1,this.btnBig.active=!1,this.btnDiu.active=!1,this.btnSanhua.active=!1,this.btnXiu.active=!1,this.btnAddTime.active=!1,this.btn1Times.active=!1,this.btn2TimesMore.active=!1,this.btn2Times.active=!1,this.btn3TimesMore.active=!1,this.btnNextCard.active=!1,this.btnCut.active=!1,0!=this.addTimerId&&(clearTimeout(this.addTimerId),this.addTimerId=0)}showBtnAddTime(){var t=p.getMyself();t&&t.canOperate&&(this.btnAddTime.active=!0,this.refreshAddTimePrice())}showOpera(t){this.hide();var i=p.getMyself(),e=f.getCurEnterRoomData().tableInfo;this.dipi=e.pi,this.myBalance=i&&i.balance?i.balance:0,this.followMoney=p.getCrtTurnBiggestAmount();var n=p.mangoPool;this.bigMinMoney=this.followMoney>=n?2*this.followMoney:n,this.bigBaseMoney=this.followMoney>=n?this.followMoney:n;var s=i.betAmount,o=i.handCards,h=i.sanhuaEnable&&g.isSanHua(o);if(this.requestTime=!1,this.btnAddTime.active=!0,this.refreshAddTimePrice(),this.btnQiao.active=this.myBalance>0&&this.myBalance<2*this.bigBaseMoney&&t,this.btnBig.active=this.canOperateBig()&&t,this.btn1Times.active=this.canOperateTimes(1)&&this.followMoney<n&&t,this.btn1Times.active){var b;let t=null==(b=u("Layout/labTimesCoin",this.btn1Times))?void 0:b.getComponent(a),i=this.bigBaseMoney%100==0?String(this.bigBaseMoney/100):(this.bigBaseMoney/100).toFixed(2);t.string=i}if(this.btn2TimesMore.active=this.canOperateTimes(2)&&this.followMoney>=n&&t,this.btn2TimesMore.active){var c;let t=null==(c=u("Layout/labTimesCoin",this.btn2TimesMore))?void 0:c.getComponent(a),i=2*this.bigBaseMoney%100==0?String(2*this.bigBaseMoney/100):(2*this.bigBaseMoney/100).toFixed(2);t.string=i}if(this.btn2Times.active=this.canOperateTimes(2)&&this.followMoney<n&&t,this.btn2Times.active){var m;let t=null==(m=u("Layout/labTimesCoin",this.btn2Times))?void 0:m.getComponent(a),i=2*this.bigBaseMoney%100==0?String(2*this.bigBaseMoney/100):(2*this.bigBaseMoney/100).toFixed(2);t.string=i}if(this.btn3TimesMore.active=this.canOperateTimes(3)&&this.followMoney>=n&&t,this.btn3TimesMore.active){var d;let t=null==(d=u("Layout/labTimesCoin",this.btn3TimesMore))?void 0:d.getComponent(a),i=3*this.bigBaseMoney%100==0?String(3*this.bigBaseMoney/100):(3*this.bigBaseMoney/100).toFixed(2);t.string=i}this.btnDiu.active=!h,this.btnSanhua.active=h,this.btnXiu.active=this.followMoney==s,this.btnGen.active=0!=this.followMoney&&this.myBalance>this.followMoney&&this.followMoney>s,this.txtGenAmount.string=T.getScoreImplicit(this.followMoney-s),this.updateBtnBigSprite(!1),t||this.btnGen.active||(this.btnQiao.active=!0),this.btnSanhua.position=l.ZERO,this.btnQiao.position=l.ZERO,this.btnBig.position=l.ZERO,this.btnDiu.position=l.ZERO,this.btnGen.position=l.ZERO,this.btn1Times.position=l.ZERO,this.btn2TimesMore.position=l.ZERO,this.btn2Times.position=l.ZERO,this.btn3TimesMore.position=l.ZERO,this.animComp||(this.animComp=this.node.getComponent(r)),this.animComp.play("operateShow")}showBtnNextCard(){this.btnNextCard.active=!0}showBtnCut(){this.btnCut.active=!0}resetBigSlider(){this.curDaMin=0,this.curDaMax=this.myBalance,this.curDa=this.curDaMin,this.lastIsQiao=!1,this.bigSlider.progress=0,this.onSliderSlide(0)}canOperateBig(){return 0==this.followMoney||this.myBalance>=this.bigMinMoney}canOperateTimes(t){return 0!=this.followMoney&&this.myBalance>=this.bigBaseMoney*t}OnTurnToPlayer(t=!0){Log.d("CheXuanData.mySeatId, CheXuanData.curTurnSeatId",p.mySeatId,p.curTurnSeatId),p.curTurnSeatId==p.mySeatId&&p.isISitdown&&p.curTurnSeatId>=0?this.showOpera(t):this.hide()}OnPhaseChange(t){this.hide(),t==c.FEN&&this.showBtnAddTime()}stopFenPai(t,i){t==p.mySeatId&&(this.btnAddTime.active=!1)}onBtnBigStart(t){this.isPressing=!0,this.BetTimes.active=!0,this.resetBigSlider()}onBtnBigMove(t){if(!this.isPressing)return;let i=t.getUILocation().subtract(t.getUIStartLocation());if(i.y<=0&&(i.y=0),i.y>=0){let t=i.y/240;this.bigSlider.progress=Math.max(0,Math.min(1,t)),this.onSliderSlide(this.bigSlider.progress)}}onBtnBigEnd(t){this.isPressing=!1,this.BetTimes.active=!1,this.onSliderSlideEnd()}onBtnBigCancel(t){this.isPressing=!1,this.BetTimes.active=!1,this.onSliderSlideEnd()}onSliderSlide(t){const i=this.curDaMax-this.curDaMin;if(1==t)this.curDa=this.curDaMax;else{const e=Math.ceil(i*t/this.dipi)*this.dipi;this.curDa=this.curDaMin+e,this.curDa>=this.curDaMax&&(this.curDa=this.curDa-this.bigBaseMoney),0!=this.curDa&&this.curDa<this.bigMinMoney&&(this.curDa=this.bigMinMoney)}this.txtBingNum.string=T.getScoreImplicit(this.curDa),this.txtBigBei.string="x"+Math.floor(this.curDa/this.bigBaseMoney);let e=this.curDa===this.curDaMax;e==this.lastIsQiao&&0!=t||(this.lastIsQiao=e,this.updateBtnBigSprite(e))}updateBtnBigSprite(t){this.btnBigSprite.getComponent(h).loadImage({url:t?"images/common/btn_qiao":"images/common/btn_da",view:this,bundle:B.BUNDLE_CheXuan})}onSliderSlideEnd(){this.curDa<this.bigMinMoney||(this.curDa==this.curDaMax?this.onBtnQiao():m.requestOperate({operateType:M.DA,count:this.curDa}))}onBtnQiao(){m.requestOperate({operateType:M.QIAO,count:this.myBalance})}onBtnXiu(){m.requestOperate({operateType:M.XIU})}onBtn1Times(){let t=1*this.bigBaseMoney;m.requestOperate({operateType:this.myBalance==t?M.QIAO:M.DA,count:t})}onBtn2Times(){let t=2*this.bigBaseMoney;m.requestOperate({operateType:this.myBalance==t?M.QIAO:M.DA,count:t})}onBtn3Times(){let t=3*this.bigBaseMoney;m.requestOperate({operateType:this.myBalance==t?M.QIAO:M.DA,count:t})}onBtnGen(){this.myBalance<this.followMoney?Log.e("余额不足, 跟不了"):m.requestOperate({operateType:M.GEN,count:this.followMoney})}onBtnDiu(){m.requestOperate({operateType:M.DIU})}onBtnAddTime(){if(this.requestTime)return!1;this.requestTime=!0,m.requestAddTime((t=>{t?(this.refreshAddTimePrice(),this.btnAddTime.active=!1,this.addTimerId=setTimeout((()=>{this.requestTime=!1,this.addTimerId=0,this.btnAddTime.active=!0}),2e3)):this.requestTime=!1}))}refreshAddTimePrice(){this.txtAddTimePrice.string=p.addTimeCost>0?T.getScoreImplicit(p.addTimeCost):"免费"}onBtnNextCard(){m.requestNextCard((()=>{this.nextCardId++}))}onNextCardEmpty(t){3==t&&(this.btnNextCard.active=!1)}onResetNextCardID(){this.nextCardId=1}onBtnCut(){m.requestCutCard((t=>{t&&(this.btnCut.active=!1)}))}}).prototype,"BetTimes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(F.prototype,"OperateProgress",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(F.prototype,"btnSanhua",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(F.prototype,"btnDiu",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(F.prototype,"btnGen",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(F.prototype,"txtGenAmount",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(F.prototype,"btnQiao",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(F.prototype,"btnBig",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(F.prototype,"btnXiu",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(F.prototype,"btn1Times",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(F.prototype,"btn2TimesMore",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=i(F.prototype,"btn2Times",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=i(F.prototype,"btn3TimesMore",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=i(F.prototype,"btnAddTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=i(F.prototype,"btnNextCard",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=i(F.prototype,"btnCut",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=i(F.prototype,"txtAddTimePrice",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=i(F.prototype,"bigSlider",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=i(F.prototype,"txtBingNum",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=i(F.prototype,"txtBigBei",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanOtherCardsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GameDefine.ts","./CheXuanData.ts","./PokerUtils.ts","./CheXuanEnum.ts"],(function(i){"use strict";var t,e,o,s,a,n,r,h,d,p,u,l,c,C,w,f,g,m,x;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){o=i.cclegacy,s=i.Sprite,a=i.Node,n=i.Label,r=i.Quat,h=i.Vec3,d=i.UITransform,p=i.Size,u=i.v3,l=i.tween},function(i){c=i.default},function(i){C=i.inject},function(i){w=i.GroupType,f=i.GamePrizeType},function(i){g=i.CheXuanData},function(i){m=i.PokerUtils},function(i){x=i.CheXuanEvent}],execute:function(){var b,v,D,z,P,y,I,N,E,S,k,T,A,X,_,B,L,F,H,M,O,Q,U,V,G,j,J,K,R;o._RF.push({},"63819ME7JBBK7rKXQ3FOFJp","CheXuanOtherCardsView",void 0);i("default",(b=C("card1",s),v=C("card2",s),D=C("card3",s),z=C("card4",s),P=C("showCard1",s),y=C("showCard2",s),I=C("showCard3",s),N=C("showCard4",s),E=C("paiDi1",a),S=C("paiDi1/txtPaiName",n),k=C("paiDi2",a),T=C("paiDi2/txtPaiName",n),A=C("xiuCard1",s),X=C("xiuCard2",s),B=t((_=class extends c{constructor(...i){super(...i),e(this,"card1",B,this),e(this,"card2",L,this),e(this,"card3",F,this),e(this,"card4",H,this),e(this,"showCard1",M,this),e(this,"showCard2",O,this),e(this,"showCard3",Q,this),e(this,"showCard4",U,this),e(this,"paiDi1",V,this),e(this,"txtPaiName1",G,this),e(this,"paiDi2",j,this),e(this,"txtPaiName2",J,this),e(this,"xiuCard1",K,this),e(this,"xiuCard2",R,this),this.posIndex=0,this.prizeEffect=null,this._tempQuat=new r}onLoad(){super.onLoad(),this.initUIComp()}addEvents(){this.onCustom(x.ChangePokerBack,this.loadHandCards)}initUIComp(){this.loadHandCards(),this.hide()}setPosIndex(i){this.posIndex=i}hide(){this.setCardActvie(4,!1),this.setShowCardActvie(4,!1),this.paiDi1.active=!1,this.paiDi2.active=!1,this.xiuCard1.node.active=!1,this.xiuCard2.node.active=!1,this.releasePrizeType()}showPrizeEffect(i){0==this.posIndex||4==this.posIndex?this.prizeEffect=m.showPrizeEffect(this.node,i,new h(0,-160,0)):1==this.posIndex||2==this.posIndex||3==this.posIndex?this.prizeEffect=m.showPrizeEffect(this.node,i,new h(-55,-160,0)):this.prizeEffect=m.showPrizeEffect(this.node,i,new h(55,-160,0))}releasePrizeType(){this.prizeEffect&&(m.releasePrizeEffect(this.prizeEffect),this.prizeEffect=null)}loadHandCards(){m.loadPokerBack(this.card1),m.loadPokerBack(this.card2)}setCardActvie(i,t){for(let e=0;e<i;e++)this["card"+(e+1)].node.active=t}setShowCardActvie(i,t){for(let e=0;e<i;e++)this["showCard"+(e+1)].node.active=t}showFapaiCard(i){Log.d("[CheXuanOtherCardView]showFapaiCard"),this.setCardActvie(i,!0)}showMingCard1(i,t=!0){Log.d(" showMingCard1",i),i&&(this.setCardActvie(3,!0),t?this.fanpai(this.card3,i.getSpriteName()):m.loadPoker(this.card3,i.getSpriteName()))}showMingCard2(i,t=!0){Log.d(" showMingCard2",i),i&&(this.setCardActvie(4,!0),t?this.fanpai(this.card4,i.getSpriteName()):m.loadPoker(this.card4,i.getSpriteName()))}showFenCard(i,t){Log.d("[CheXuanOtherCardView] showMingCard2",i),this.setCardActvie(4,!1),this.setShowCardActvie(i.length,!0);for(let t=0;t<4;t++)if(i[t]){var e=t+1;m.loadPoker(this["showCard"+e],i[t].getSpriteName())}if(t&&t.length>=1&&(t[0].groupType==w.SH_10||t[0].groupType==w.SH_6)){var o=t[0].groupType==w.SH_10?"三花十":"三花六";return this.paiDi1.active=!0,this.paiDi2.active=!1,this.paiDi1.getComponent(d).contentSize=new p(152,30),this.txtPaiName1.string=o,void(3==i.length?0==this.posIndex||4==this.posIndex?(this.showCard1.node.position=u(-45,-136,0),this.showCard2.node.position=u(0,-136,0),this.showCard3.node.position=u(45,-136,0),this.paiDi1.position=u(0,-156,0)):1==this.posIndex||2==this.posIndex||3==this.posIndex?(this.showCard1.node.position=u(-75,-136,0),this.showCard2.node.position=u(-30,-136,0),this.showCard3.node.position=u(15,-136,0),this.paiDi1.position=u(-30,-156,0)):(this.showCard3.node.position=u(-15,-136,0),this.showCard2.node.position=u(30,-136,0),this.showCard1.node.position=u(75,-136,0),this.paiDi1.position=u(30,-156,0)):0==this.posIndex||4==this.posIndex?(this.showCard1.node.position=u(-45,-136,0),this.showCard2.node.position=u(-15,-136,0),this.showCard3.node.position=u(15,-136,0),this.showCard4.node.position=u(45,-136,0),this.paiDi1.position=u(0,-156,0)):1==this.posIndex||2==this.posIndex||3==this.posIndex?(this.showCard1.node.position=u(-75,-136,0),this.showCard2.node.position=u(-45,-136,0),this.showCard3.node.position=u(-15,-136,0),this.showCard4.node.position=u(15,-136,0),this.paiDi1.position=u(-30,-156,0)):(this.showCard4.node.position=u(-15,-136,0),this.showCard3.node.position=u(15,-136,0),this.showCard2.node.position=u(45,-136,0),this.showCard1.node.position=u(75,-136,0),this.paiDi1.position=u(30,-156,0)))}if(this.paiDi1.getComponent(d).contentSize=new p(94,30),0==this.posIndex||4==this.posIndex?(this.showCard1.node.position=u(-68,-136,0),this.showCard2.node.position=u(-36,-136,0),this.showCard3.node.position=u(36,-136,0),this.showCard4.node.position=u(68,-136,0),this.paiDi1.position=u(-52,-156,0),this.paiDi2.position=u(52,-156,0)):1==this.posIndex||2==this.posIndex||3==this.posIndex?(this.showCard1.node.position=u(-121,-136,0),this.showCard2.node.position=u(-89,-136,0),this.showCard3.node.position=u(-16,-136,0),this.showCard4.node.position=u(16,-136,0),this.paiDi1.position=u(-105,-156,0),this.paiDi2.position=u(0,-156,0)):(this.showCard4.node.position=u(-16,-136,0),this.showCard3.node.position=u(16,-136,0),this.showCard2.node.position=u(89,-136,0),this.showCard1.node.position=u(121,-136,0),this.paiDi1.position=u(105,-156,0),this.paiDi2.position=u(0,-156,0)),i.length<4||!t)return this.paiDi1.active=!1,void(this.paiDi2.active=!1);let s=m.getPrizeTypeByPoker(i);if(s==f.NONE){this.paiDi1.active=!0,this.paiDi2.active=!0;var a=g.getCombinationString([i[0],i[1]]),n=g.getCombinationString([i[2],i[3]]);this.txtPaiName1.string=a.typeName,this.txtPaiName2.string=n.typeName}else this.paiDi1.active=!1,this.paiDi2.active=!1,this.showPrizeEffect(s)}showXiuCard(i){i&&0!=i.length&&(this.setCardActvie(2,!1),i.length>=2?(this.xiuCard1.node.active=!0,this.xiuCard2.node.active=!0,this.xiuCard1.node.position=new h(-32,10,0),this.fanpai(this.xiuCard1,i[0].getSpriteName()),this.fanpai(this.xiuCard2,i[1].getSpriteName())):(this.xiuCard1.node.active=!0,this.xiuCard2.node.active=!1,this.xiuCard1.node.position=new h(0,10,0),this.fanpai(this.xiuCard1,i[0].getSpriteName())))}async fanpai(i,t){m.loadPokerBack(i),i.node.rotation=r.IDENTITY,r.fromEuler(this._tempQuat,0,90,0),await new Promise((e=>{l(i.node).to(.1,{rotation:this._tempQuat}).call((()=>{setTimeout((()=>{m.loadPoker(i,t),e()}),0)})).to(.1,{rotation:r.IDENTITY}).start()}))}}).prototype,"card1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(_.prototype,"card2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(_.prototype,"card3",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(_.prototype,"card4",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(_.prototype,"showCard1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(_.prototype,"showCard2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(_.prototype,"showCard3",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(_.prototype,"showCard4",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(_.prototype,"paiDi1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(_.prototype,"txtPaiName1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(_.prototype,"paiDi2",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(_.prototype,"txtPaiName2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(_.prototype,"xiuCard1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(_.prototype,"xiuCard2",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_));o._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanPlayer.ts",["cc","./CheXuanPoker.ts","./GameDefine.ts","./UserData.ts","./PokerUtils.ts","./CheXuanData.ts"],(function(t){"use strict";var e,s,a,i,r,h;return{setters:[function(t){e=t.cclegacy},function(t){s=t.CheXuanPoker},function(t){a=t.OperateType},function(t){i=t.UserDataEn},function(t){r=t.PokerUtils},function(t){h=t.CheXuanData}],execute:function(){e._RF.push({},"223bcVzX3lHA5IejDEF2gNf","CheXuanPlayer",void 0);t("CheXuanPlayer",class{get crtOperateLeftTime(){return this.crtOperatTotalTime-this.crtOperatePassTime-(Date.now()-this._setOperateTimestamp)/1e3}constructor(){this.playerName=void 0,this.playerType=void 0,this.remarkName=void 0,this.balance=0,this.handCards=void 0,this.fenPaiResult=void 0,this.cardCount=0,this.betAmount=0,this.betMangoAmount=0,this.specialCards=void 0,this.playerId=void 0,this._avatar="",this.playerAction=void 0,this.splited=!1,this._seatId=void 0,this._uiId=void 0,this.isGameing=!1,this.isBanker=!1,this.sanhuaEnable=!0,this.isKeepSeat=!1,this.keepSeatRemainTime=0,this.crtOperatTotalTime=0,this.crtOperatePassTime=0,this._setOperateTimestamp=0,this._isMuteVoice=!1,this.xiuCards=[],this.playerName="te",this.remarkName=null,this.balance=0,this.handCards=[],this.betAmount=0,this.specialCards=[],this.playerAction=null,this.isKeepSeat=!1,this.keepSeatRemainTime=0,this.splited=!1,this.sanhuaEnable=!0,this.xiuCards=[],this.crtOperatTotalTime=15,this.crtOperatePassTime=0}get canOperate(){return!this.isFold&&this.isGameing}get isFold(){return this.playerAction==a.DIU}get leftMoney(){return this.balance-this.betAmount}get uiId(){return h.getUISeadId(this._seatId)}set uiId(t){}getPlayerId(){return this.playerId}get isSelf(){return console.log("发牌玩家数据ID："+i.getUserData().id),this.playerId==i.getUserData().id}get seatId(){return this._seatId}set seatId(t){this._seatId=t}get avatar(){return this._avatar}set avatar(t){this._avatar=t}get isMuteVoice(){return this._isMuteVoice}set isMuteVoice(t){this._isMuteVoice=t}placeMangoBet(t){this.betMangoAmount=t,this.balance-=t}placeBet(t,e){this.sanhuaEnable&&this.handCards.length>=3&&(r.isSanHua(this.handCards)&&t!=a.DIU&&(this.sanhuaEnable=!1));e>this.balance&&Log.e(`下注金额超过玩家余额, amount = ${e}, balance = ${this.balance}`),this.playerAction=t,t!=a.DIU&&t!=a.XIU&&(this.betAmount=e)}addCardList(t){t&&t.forEach((t=>{this.handCards.push(new s(t.color,t.point))}))}reset(){this.handCards=[],this.betAmount=0,this.betMangoAmount=0,this.specialCards=[],this.isBanker=!1,this.cardCount=0,this.fenPaiResult=[],this.playerAction=null,this.splited=!1,this.sanhuaEnable=!0,this.xiuCards=[],this.crtOperatTotalTime=15,this.crtOperatePassTime=0}settleTurnBet(){this.balance-=this.betAmount,this.betAmount=0}winMoney(t){this.balance+=t}setFenPaiResult(t){this.fenPaiResult=t}setOperateTime(t,e=0){this.crtOperatTotalTime=t,this.crtOperatePassTime=e,this._setOperateTimestamp=Date.now()}setOperateLeftTime(t){this.crtOperatePassTime=this.crtOperatTotalTime-t,this._setOperateTimestamp=Date.now()}addOperateTime(t){this.crtOperatTotalTime+=t}getFenPaiResult(){return 0==this.fenPaiResult.length&&this.handCards.forEach((t=>this.fenPaiResult.push({color:t.getSuit(),point:t.getRank()}))),this.fenPaiResult}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanSelfCardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Macros.ts","./Decorators.ts","./CheXuanData.ts","./CheXuanModel.ts","./Config.ts","./GameDefine.ts","./PokerUtils.ts","./CheXuanEnum.ts","./ChuoPaiView.ts"],(function(i){"use strict";var t,e,a,s,n,r,o,h,d,c,u,l,p,C,f,P,v,g,b,y,m,S,E,D,w,N;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){a=i.cclegacy,s=i.Sprite,n=i.Node,r=i.Label,o=i.Size,h=i.Quat,d=i.Vec3,c=i.v3,u=i.UITransform,l=i.Button,p=i.Color,C=i.tween},function(i){f=i.default},function(i){P=i.Macro},function(i){v=i.inject},function(i){g=i.CheXuanData},function(i){b=i.CheXuanModel},function(i){y=i.Config,m=i.ViewZOrder},function(i){S=i.GroupType,E=i.GamePrizeType},function(i){D=i.PokerUtils},function(i){w=i.CheXuanEvent},function(i){N=i.ChuoPaiView}],execute:function(){var k,x,z,T,F,G,M,H,L,A,_,I,B,O,X,U,V,R,Q,q,Y,j,Z,$,J,K,W;a._RF.push({},"9b10fkev0RNNYRy6yTyhuXF","CheXuanSelfCardView",void 0);i("default",(k=v("card1",s),x=v("card2",s),z=v("card3",s),T=v("card4",s),F=v("CardGroup1",n),G=v("CardGroup2",n),M=v("paiDi1",n),H=v("paiDi1/txtPaiName",r),L=v("paiDi2",n),A=v("paiDi2/txtPaiName",r),_=v("cheat",n),I=v("btnFenPai",n),B=v("btnSanHua",n),X=t((O=class extends f{constructor(...i){super(...i),e(this,"card1",X,this),e(this,"card2",U,this),e(this,"card3",V,this),e(this,"card4",R,this),e(this,"CardGroup1",Q,this),e(this,"CardGroup2",q,this),e(this,"paiDi1",Y,this),e(this,"txtPaiName1",j,this),e(this,"paiDi2",Z,this),e(this,"txtPaiName2",$,this),e(this,"cheat",J,this),e(this,"btnFenPai",K,this),e(this,"btnSanHua",W,this),this.fenPaiEnable=!1,this.splitCardEnable=!1,this.xiuPaiEnable=!1,this.xiuPaiStatus=[!1,!1],this.eyes=[],this.fenPaiDiSize=new o(156,30),this.prizeEffect=null,this.statusList=[!1,!1,!1,!1],this._tempQuat=new h}onLoad(){super.onLoad(),this.initUIComp()}hasXiuPai(){return this.xiuPaiStatus.filter((i=>1==i)).length>=1}initUIComp(){this.eyes=[];for(let t=0;t<4;t++){var i=this.node.getChildByPath(`card${t+1}/iconEye`);this.eyes.push(i)}this.hide()}setCardActvie(i,t){for(let e=0;e<i;e++)this["card"+(e+1)].node.active=t}hideEyes(){this.eyes.forEach((i=>i.active=!1))}setEyesActive(i,t){this.eyes[i].active=t}hide(){this.setCardActvie(4,!1),this.paiDi1.active=!1,this.paiDi2.active=!1,this.CardGroup1.active=!1,this.CardGroup2.active=!1,this.btnFenPai.active=!1,this.btnSanHua.active=!1,this.cheat.active=!1,this.hideEyes(),this.xiuPaiStatus=[!1,!1],this.stopFenPai(),this.releasePrizeType()}showPrizeEffect(i){this.prizeEffect=D.showPrizeEffect(this.node,i,new d(0,-30,0))}releasePrizeType(){this.prizeEffect&&(D.releasePrizeEffect(this.prizeEffect),this.prizeEffect=null)}addEvents(){super.addEvents(),this.onN(this.btnFenPai,n.EventType.TOUCH_END,this.onBtnFenPai),this.onN(this.btnSanHua,n.EventType.TOUCH_END,this.onBtnSanHua),this.onN(this.card1.node,n.EventType.TOUCH_END,this.onCard1Click),this.onN(this.card2.node,n.EventType.TOUCH_END,this.onCard2Click),this.onN(this.card3.node,n.EventType.TOUCH_END,this.onCard3Click),this.onN(this.card4.node,n.EventType.TOUCH_END,this.onCard4Click),this.onCustom(w.CuoPaiClose,this.onCuoPaiClosed),this.onCustom(w.TurnToPlayer,this.OnTurnToPlayer)}onCuoPaiClosed(){const i=g.getMyself();i&&4==i.handCards.length&&this.fanpai(this.card4,i.handCards[3].getSpriteName())}OnTurnToPlayer(i){g.curTurnSeatId==g.mySeatId&&g.isISitdown&&g.curTurnSeatId>=0&&this.card1.spriteFrame.name.includes("p_bei")&&this.turnPokerOver()}showFapaiCard(i,t,e=!1){Log.d("showFapaiCard ",i),this.xiuPaiEnable=!e,this.cheat.active=e;var a=this.calculateCardPos(2);this.card1.node.position=a[0],this.card2.node.position=a[1],this.setCardActvie(t,!0),i&&i.length>=2&&(e?(D.loadPokerBack(this.card1),D.loadPokerBack(this.card2)):(D.loadPoker(this.card1,i[0].getSpriteName()),D.loadPoker(this.card2,i[1].getSpriteName())))}turnPokerOver(){this.xiuPaiEnable=!0;var i=g.getMyself();i&&i.canOperate&&null==i.playerAction&&(this.cheat.active=!1,this.fanpai(this.card1,i.handCards[0].getSpriteName()),this.fanpai(this.card2,i.handCards[1].getSpriteName()))}showMingCard1(i,t=!0){if(Log.d("showMingCard1 ",i),i){var e=this.calculateCardPos(3);this.card1.node.position=e[0],this.card2.node.position=e[1],this.card3.node.position=e[2],this.setCardActvie(3,!0),t?this.fanpai(this.card3,i.getSpriteName()):D.loadPoker(this.card3,i.getSpriteName())}}showMingCard2(i,t=!0,e=!1){if(Log.d("showMingCard2 ",i),i){var a=this.calculateCardPos(4);this.card1.node.position=a[0],this.card2.node.position=a[1],this.card3.node.position=a[2],this.card4.node.position=a[3],this.setCardActvie(4,!0),t?this.fanpai(this.card4,i.getSpriteName()):e?D.loadPokerBack(this.card4):D.loadPoker(this.card4,i.getSpriteName())}}startFenPai(){var i=g.getMyself(),t=i.sanhuaEnable&&D.isSanHua(i.handCards);this.xiuPaiEnable=!1,this.hideEyes(),this.btnSanHua.active=t,this.btnFenPai.active=!0,this.setFenPaiInteractable(!1),this.CardGroup1.active=!0,this.CardGroup2.active=!0,this.paiDi1.position=c(0,116,0),this.paiDi2.position=c(0,-25,0),this.paiDi1.getComponent(u).contentSize=this.fenPaiDiSize,this.paiDi2.getComponent(u).contentSize=this.fenPaiDiSize,this.statusList=[!1,!1,!1,!1],this.splitCardEnable=!0}setFenPaiInteractable(i){this.fenPaiEnable=i,this.btnFenPai.getComponent(l).interactable=i;var t=this.btnFenPai.getChildByName("Label").getComponent(r),e=t.color,a=i?255:108;t.color=new p(e.r,e.g,e.b,a)}onBtnFenPai(){if(this.fenPaiEnable){var i=this.getFenPaiCards();b.requestFenPaiConfirm(!1,i)}}onBtnSanHua(){b.requestFenPaiConfirm(!0,[])}getFenPaiCards(){for(var i=g.getMyself().handCards,t=[],e=[],a=0;a<this.statusList.length;a++){var s={color:i[a].getSuit(),point:i[a].getRank()};this.statusList[a]?t.push(s):e.push(s)}return t.concat(e)}stopFenPai(i=!1){if(this.xiuPaiEnable=!1,this.fenPaiEnable=!1,this.btnFenPai.active=!1,this.CardGroup1.active=!1,this.CardGroup2.active=!1,this.splitCardEnable=!1,this.btnSanHua.active=!1,i){this.paiDi1.active=!1,this.paiDi2.active=!1;var t=this.calculateCardPos(4);this.card1.node.position=t[0],this.card2.node.position=t[1],this.card3.node.position=t[2],this.card4.node.position=t[3]}}onCard1Click(){this.splitCardEnable&&this.onCardClicked(0),this.xiuPaiEnable&&this.onXiuPaiClicked(0)}onCard2Click(){this.splitCardEnable&&this.onCardClicked(1),this.xiuPaiEnable&&this.onXiuPaiClicked(1)}onCard3Click(){this.splitCardEnable&&this.onCardClicked(2)}onCard4Click(){this.splitCardEnable&&this.onCardClicked(3)}onXiuPaiClicked(i){this.xiuPaiStatus[i]=!this.xiuPaiStatus[i],this.setEyesActive(i,this.xiuPaiStatus[i]);var t=g.getMyself();t&&(t.xiuCards=this.xiuPaiStatus);var e={card1:this.xiuPaiStatus[0],card2:this.xiuPaiStatus[1]};b.requestXiuCard(e)}onCardClicked(i){App.globalAudio.playGlobalEffect(y.audioPath.button);var t=0;this.statusList[i]=!this.statusList[i];var e=[],a=[];if(this.statusList.forEach(((i,s)=>{i?(t+=1,e.push(s)):a.push(s)})),3!=t){this.setFenPaiInteractable(2==t);for(var s=4-t,n=this.calculateCardPos(s),r=[],o=0,h=0,d=0;d<this.statusList.length;d++)this.statusList[d]?0==o?(r.push(this.CardGroup1.position),o+=1):r.push(this.CardGroup2.position):(r.push(n[h]),h+=1);this.card1.node.position=r[0],this.card2.node.position=r[1],this.card3.node.position=r[2],this.card4.node.position=r[3];var c=g.getMyself().handCards,u=s==t;if(this.paiDi1.active=u,this.paiDi2.active=u,u){var l=[c[e[0]],c[e[1]],c[a[0]],c[a[1]]];this.showSplitedPaixing(l)}}else this.statusList[i]=!this.statusList[i]}recoveryFenPai(){this.xiuPaiEnable=!1,this.hideEyes(),this.CardGroup1.active=!0,this.CardGroup2.active=!0,this.card1.node.position=this.CardGroup1.position,this.card2.node.position=this.CardGroup2.position;var i=this.calculateCardPos(2);this.card3.node.position=i[0],this.card4.node.position=i[1],this.paiDi1.position=c(0,116,0),this.paiDi2.position=c(0,-25,0),this.paiDi1.getComponent(u).contentSize=this.fenPaiDiSize,this.paiDi2.getComponent(u).contentSize=this.fenPaiDiSize;var t=g.getMyself().handCards;this.showSplitedPaixing(t)}showFenCard(i,t){this.CardGroup1.active=!1,this.CardGroup2.active=!1,this.setCardActvie(i.length,!0);for(let t=0;t<i.length;t++)if(i[t]){var e=t+1;D.loadPoker(this["card"+e],i[t].getSpriteName())}if(t&&t.length>=1&&(t[0].groupType==S.SH_10||t[0].groupType==S.SH_6)){var a=t[0].groupType==S.SH_10?"三花十":"三花六";return this.paiDi1.active=!0,this.paiDi2.active=!1,this.paiDi1.getComponent(u).contentSize=new o(196,30),this.paiDi2.getComponent(u).contentSize=new o(112,30),this.paiDi1.position=c(0,-29,0),this.txtPaiName1.string=a,void(3==i.length?(this.card1.node.position=c(-60,0,0),this.card2.node.position=c(0,0,0),this.card3.node.position=c(60,0,0)):(this.card1.node.position=c(-60,0,0),this.card2.node.position=c(-20,0,0),this.card3.node.position=c(20,0,0),this.card4.node.position=c(60,0,0)))}if(this.paiDi1.getComponent(u).contentSize=new o(112,30),this.paiDi2.getComponent(u).contentSize=new o(112,30),this.card1.node.position=c(-80,0,0),this.card2.node.position=c(-45,0,0),this.card3.node.position=c(45,0,0),this.card4.node.position=c(80,0,0),i.length<4)return this.paiDi1.active=!1,void(this.paiDi2.active=!1);this.paiDi1.position=c(-62.5,-29,0),this.paiDi2.position=c(62.5,-29,0),this.showSplitedPaixing(i,!0)}showSplitedPaixing(i,t=!1){let e=E.NONE;if(t&&(e=D.getPrizeTypeByPoker(i)),e==E.NONE){this.paiDi1.active=!0,this.paiDi2.active=!0;var a=g.getCombinationString([i[0],i[1]]),s=g.getCombinationString([i[2],i[3]]);this.txtPaiName1.string=a.typeName,this.txtPaiName2.string=s.typeName}else this.paiDi1.active=!1,this.paiDi2.active=!1,this.showPrizeEffect(e)}calculateCardPos(i){for(var t=40*(1-i),e=[],a=0;a<i;a++){var s=t+2*a*40;e.push(c(s,6,0))}return e}async fanpai(i,t){D.loadPokerBack(i),i.node.rotation=h.IDENTITY,h.fromEuler(this._tempQuat,0,90,0),await new Promise((e=>{C(i.node).to(.1,{rotation:this._tempQuat}).call((()=>{setTimeout((()=>{D.loadPoker(i,t),e()}),0)})).to(.1,{rotation:h.IDENTITY}).start()}))}onSelfFapaiEnd(i){this.node.active=!0;const t=g.getMyself();t&&(Log.d("onSelfFapaiEnd playerData",t),2==t.cardCount?this.showFapaiCard(t.handCards,i,!0):3==t.cardCount?(this.turnPokerOver(),this.showMingCard1(t.handCards[2])):4==t.cardCount?(this.card3.node.active||D.loadPoker(this.card3,t.handCards[2].getSpriteName()),g.cuoPaiEnabled?(this.showMingCard2(t.handCards[3],!1,!0),App.uiManager.open({type:N,bundle:P.BUNDLE_CheXuan,zIndex:m.UI,args:{data:t.handCards[3]}})):this.showMingCard2(t.handCards[3])):this.setCardActvie(4,!1))}showHandCards(){const i=g.getMyself();var t=i.cardCount;if(t>0){this.xiuPaiEnable=!0,this.setCardActvie(t,!0);for(var e=t>=3||null!=i.playerAction,a=this.calculateCardPos(i.cardCount),s=0;s<t;s++){var n=this["card"+(s+1)];n.node.position=a[s],e?D.loadPoker(n,i.handCards[s].getSpriteName()):(this.cheat.active=!0,D.loadPokerBack(n))}i.xiuCards&&i.xiuCards.length>0&&(this.xiuPaiStatus=i.xiuCards,this.xiuPaiStatus.length>=1&&this.setEyesActive(0,this.xiuPaiStatus[0]),this.xiuPaiStatus.length>=2&&this.setEyesActive(1,this.xiuPaiStatus[1]))}else this.setCardActvie(4,!1)}}).prototype,"card1",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(O.prototype,"card2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(O.prototype,"card3",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(O.prototype,"card4",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(O.prototype,"CardGroup1",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(O.prototype,"CardGroup2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(O.prototype,"paiDi1",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(O.prototype,"txtPaiName1",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(O.prototype,"paiDi2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(O.prototype,"txtPaiName2",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(O.prototype,"cheat",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(O.prototype,"btnFenPai",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(O.prototype,"btnSanHua",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O));a._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanServer.ts",["cc","./Service.ts"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.Service}],execute:function(){t._RF.push({},"3a47chViLNFuKMKwfPdIR/u","CheXuanServer",void 0);class c extends r{connect(){}sendHeartbeat(){}isHeartBeat(e){return!0}}e("default",c),c.module="CheXuanServer",t._RF.pop()}}}));

System.register("chunks:///_virtual/CheXuanView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameView.ts","./Decorators.ts","./CheXuanLogic.ts","./GameZhanJi.ts","./PlayerView.ts","./DaiRuSettingView.ts","./CheXuanEnum.ts","./CheXuanData.ts","./CheXuanOperateView.ts","./MenuView.ts","./PaiXingIntroductionView.ts","./CheXuanSelfCardView.ts","./CheXuanModel.ts","./Utils.ts","./SaveDataUtils.ts","./Macros.ts","./Config.ts","./PlayerDetailView.ts","./PlayerGiveView.ts","./GameRecord.ts","./PrizePoolView.ts","./SoundSet.ts","./GunlunView.ts","./GameChatView.ts","./CommonData.ts","./FrameAnimation.ts","./HallData.ts","./CommonEvent.ts","./HallModel.ts","./GameSwitchRoom.ts","./CongratulationView.ts","./CheXuanPoker.ts","./UserData.ts","./Broadcast.ts","./PokerUtils.ts","./ChuoPaiView.ts","./ConfigInfo.ts"],(function(t){"use strict";var e,i,a,o,n,s,r,l,h,u,c,d,p,m,g,f,b,C,y,w,P,S,v,I,T,R,D,A,E,L,V,B,x,M,N,G,k,U,z,O,_,F,H,X,Z,J,W,q,K,j,$,Q,Y,tt,et,it,at,ot,nt,st,rt,lt,ht,ut,ct,dt;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,o=t.Sprite,n=t.Node,s=t.Label,r=t._decorator,l=t.v3,h=t.Button,u=t.Color,c=t.Tween,d=t.sys,p=t.UITransform,m=t.tween,g=t.Prefab,f=t.instantiate,b=t.UIOpacity,C=t.find,y=t.macro,w=t.Quat},function(t){P=t.default},function(t){S=t.inject},function(t){v=t.default},function(t){I=t.default},function(t){T=t.default},function(t){R=t.DaiRuSettingView},function(t){D=t.CheXuanEvent,A=t.VoiceType,E=t.CheXuanPhase},function(t){L=t.CheXuanData},function(t){V=t.default},function(t){B=t.default},function(t){x=t.default},function(t){M=t.default},function(t){N=t.CheXuanModel,G=t.ChatType,k=t.GameTableState},function(t){U=t.default},function(t){z=t.default,O=t.SaveDataType},function(t){_=t.Macro},function(t){F=t.Config,H=t.ViewZOrder},function(t){X=t.PlayerDetailView},function(t){Z=t.PlayerGiveView},function(t){J=t.default},function(t){W=t.PrizePoolView},function(t){q=t.default},function(t){K=t.GunlunView},function(t){j=t.GameChatView},function(t){$=t.AudioEvent,Q=t.CommonData,Y=t.HallModelTableState},function(t){tt=t.FrameAnimation},function(t){et=t.HallDataEn},function(t){it=t.CommonEvent},function(t){at=t.HallModel},function(t){ot=t.GameSwitchRoom},function(t){nt=t.default},function(t){st=t.CheXuanPoker},function(t){rt=t.UserDataEn},function(t){lt=t.default},function(t){ht=t.PokerUtils},function(t){ut=t.ChuoPaiView},function(t){ct=t.ConfigInfoEn,dt=t.EmConfigData}],execute:function(){var pt,mt,gt,ft,bt,Ct,yt,wt,Pt,St,vt,It,Tt,Rt,Dt,At,Et,Lt,Vt,Bt,xt,Mt,Nt,Gt,kt,Ut,zt,Ot,_t,Ft,Ht,Xt,Zt,Jt,Wt,qt,Kt,jt,$t,Qt,Yt,te,ee,ie,ae,oe,ne,se,re,le,he,ue,ce,de,pe,me,ge,fe,be,Ce,ye,we,Pe,Se,ve,Ie,Te,Re,De,Ae,Ee,Le,Ve,Be,xe,Me,Ne,Ge,ke,Ue,ze,Oe,_e,Fe,He,Xe,Ze,Je,We,qe,Ke,je,$e,Qe,Ye,ti,ei,ii,ai,oi,ni,si,ri,li,hi,ui;a._RF.push({},"6e712KxicNPaKwJQFPFePL/","CheXuanView",void 0);const{ccclass:ci,property:di}=r;t("default",(pt=S({type:v,name:"logic"}),mt=S("bg",o),gt=S("Top/btnmenu",n),ft=S("Top/btnRecord",n),bt=S("Top/shuzigunlun",n),Ct=S("Top/icon_dianchi/spBattery",o),yt=S("Top/icon_dianchi/txtTime",s),wt=S("Top/icon_wifi",o),Pt=S("Top/btnRefresh",n),St=S("Top/btnLocation",n),vt=S("Top/btnLocation/LocateShow",n),It=S("Top/broadcast",n),Tt=S("Bottom/btnZhanji",n),Rt=S("Bottom/SupControl",n),Dt=S("fapaiRoot",n),At=S("chatRoot",n),Et=S("showpaiRoot",n),Lt=S("fapaiPrefefab",n),Vt=S("playerList",n),Bt=S("startTips",n),xt=S("startTips/txtOpenTips",s),Mt=S("SubPanel",n),Nt=S("SubPanel/GameZhanJi",n),Gt=S("SubPanel/GameRecord",n),kt=S("SubPanel/DaiRuSetting",n),Ut=S("SubPanel/Menu",n),zt=S("SubPanel/PaixingIntroduction",n),Ot=S("SubPanel/PlayerDetailView",n),_t=S("bet",n),Ft=S("bet/choumang",n),Ht=S("bet/choumang/choumalv",o),Xt=S("bet/choumang/txtScore",s),Zt=S("bet/choumang/txtDes",s),Jt=S("bet/dipi",n),Wt=S("bet/dipi/dipiImg",o),qt=S("bet/dipi/txtScore",s),Kt=S("bet/dipi/txtDiPi",s),jt=S("sprChouma",n),$t=S("ChoumaParent",n),Qt=S("GameInfo/spGameName",n),Yt=S("GameInfo/txtTime",s),te=S("GameInfo/txtRoomNum",s),ee=S("GameInfo/txtScoreBase",s),ie=S("GameInfo/txtMode",s),ae=S("Operate",n),oe=S("Bottom/selfCards",n),ne=S("Bottom/btnShowCard",n),se=S("playerList/player_0/btnChat",n),re=S("Bottom/btnVoice",n),le=S("Bottom/btnHuiZhuo",n),he=S("voicePannel",n),ue=S("Bottom/btnChangRoom",n),ci((pe=e((de=class extends P{constructor(...t){super(...t),i(this,"logic",pe,this),i(this,"sprBg",me,this),i(this,"btnMenu",ge,this),i(this,"btnRecord",fe,this),i(this,"shuzigunlun",be,this),i(this,"spBattery",Ce,this),i(this,"labTime",ye,this),i(this,"spWifi",we,this),i(this,"btnRefresh",Pe,this),i(this,"btnLocation",Se,this),i(this,"LocateShow",ve,this),i(this,"broadcast",Ie,this),i(this,"btnZhanji",Te,this),i(this,"btnSupControl",Re,this),i(this,"fapaiRoot",De,this),i(this,"chatRoot",Ae,this),i(this,"showpaiRoot",Ee,this),i(this,"fapaiNode",Le,this),i(this,"playerList",Ve,this),i(this,"startTips",Be,this),i(this,"txtOpenTips",xe,this),i(this,"subviewParent",Me,this),i(this,"uiGameZhanJi",Ne,this),i(this,"uiGameRecord",Ge,this),i(this,"uiDaiRuSetting",ke,this),i(this,"uiMenu",Ue,this),i(this,"uiPaixingIntroduction",ze,this),i(this,"uiPlayerDetailView",Oe,this),i(this,"bet",_e,this),i(this,"choumang",Fe,this),i(this,"choumaImg",He,this),i(this,"choumatxtScore",Xe,this),i(this,"choumatxtDes",Ze,this),i(this,"dipi",Je,this),i(this,"dipiImg",We,this),i(this,"dipitxtScore",qe,this),i(this,"txtDiPi",Ke,this),i(this,"sprChouma",je,this),i(this,"choumaParent",$e,this),i(this,"spGameName",Qe,this),i(this,"txtTime",Ye,this),i(this,"txtRoomNum",ti,this),i(this,"txtScoreBase",ei,this),i(this,"txtMode",ii,this),i(this,"Operate",ai,this),i(this,"selfCards",oi,this),i(this,"btnShowCard",ni,this),i(this,"btnChat",si,this),i(this,"btnVoice",ri,this),i(this,"btnHuiZhuo",li,this),i(this,"voicePannel",hi,this),i(this,"btnChangRoom",ui,this),this.playerViewList=void 0,this.selfCardView=void 0,this.operateView=void 0,this.gunlunView=void 0,this.curSeatUserData=null,this.curTime=null,this.nextCard=[],this.isGameSettling=!1,this.isChangedSeatUnderSettling=!1,this.gameCountdowning=!1,this.gameCountdownId=0,this.enableRefresh=!0,this.enableChat=!1,this.isRoomEnd=!1,this.delayResetDeskTimer=null,this.settleTweenId=1e4,this.voiceUrl=null,this.voiceState=0,this.isRecordingVoice=null,this.tempMusicState=null,this.tempEffectState=null,this.permission=!1,this.mFName=null,this.chatMaxTime=15,this.chatMinTime=1,this.status=!1,this.voiceStartTime=0,this.voiceDurTime=0,this.pInterval=null,this.voicePType=0,this.remainTime=0,this.chatMsgList=["人霉批生疮，大石甩框框","身经百战，临危不乱","该你麻批，打牙祭","自从学会丁二皇，就没穿过新衣裳","见九不扯杠，扯杠是爪棒","三十二张，背井离乡","胆子大性子急，打得旋友下重皮","来嘛，有货单挑拼老命，老子拼了！","搞得我就像和尚脑壳，没法咯","打旋打三年，超哥打成服务员","打仗靠指挥，打旋靠尾飞","他虚晃一枪，老树子受伤","手上拿了天红杠，敲翻全场到处逛","天地悠悠，独钓勾勾","万丈红尘三杯酒，敲了就打滴滴走","床前明月光，你娃输光光","手气这么霉，你在打手冲迈？","辉煌时刻谁都有，钵钵不是很长久"]}static getPrefabUrl(){return"prefabs/CheXuanView"}onLoad(){super.onLoad(),App.uiManager.closeBundleView(_.BUNDLE_HALL),App.globalAudio.playGlobalMusic(F.audioPath.gamebg1),this.loadTableBg(),this.initUICompt(),this.initUIEvent(),this.resetUI(),this.btnSupControl.active=!1,N.reset(),App.stageData.IsMatch?(App.event.emitCustom(D.ReEnterRoom),N.registerEventListener(),App.stageData.getConnBack()||N.requestSitdown({seatId:App.stageData.getTempSeat(),bobo:null}),this.scheduleOnce((()=>{this.node&&N.requestRefleshTableContext()}),.5)):N.requestRefleshTableContext(),this.onJudgeBack()}onHideBack(t){t||N.refreshHallData(),this.btnHuiZhuo.active=t&&!App.stageData.IsMatch}onJudgeBack(){let t=et.getCurEnterRoomData(),e=t&&t.reserveSeat?t.reserveSeat.find((t=>t.userId==rt.getUserData().id)):null,i=t&&t.sitInfo?t.sitInfo.find((t=>t.userId==rt.getUserData().id)):null;this.btnHuiZhuo.active=e&&!i&&e.remainTime>0&&!App.stageData.IsMatch,console.log("====>>>>onJudgeBack: ",t)}initUICompt(){this.loadPokerBack(),this.Operate.active=!0,this.operateView=this.Operate.addComponent(V),this.selfCards.active=!0,this.selfCardView=this.selfCards.addComponent(M),App.stageData.IsMatch||(this.gunlunView=this.shuzigunlun.addComponent(K)),this.broadcast.addComponent(lt),this.curTime=setInterval((()=>{this.labTime.string=U.dateFormat(new Date,"hh:mm:ss")}),1e3);let t=Math.abs(App.platform.getBatteryLevel());this.spBattery.node.setScale(l(t,1,1));let e=window.Platform.getNetworkType(),i=window.Platform.getNetworkLevel();i=Math.abs(5-i)<2?4:Math.abs(5-i);let a=(1==e?"icon_wifi":"icon_net")+i;this.spWifi.loadImage({url:"images/common/"+a,view:this,bundle:this.bundle})}loadPokerBack(){var t=this.fapaiNode.getComponent(o);ht.loadPokerBack(t)}resetUI(){this.txtMode.string="休芒|揍芒|手手芒",this.sprChouma.active=!1,this.dipi.active=!1,this.choumang.active=!1,this.txtTime.string="",this.startTips.active=!1,this.fapaiNode.active=!1,App.stageData.IsMatch&&(this.shuzigunlun.active=!1,this.btnChangRoom.active=!1),this.setBtnChatInteractable(!1),this.setBtnShowCardInteractable(!1),this.initPlayerList()}setBtnChatInteractable(t){this.enableChat=t,this.btnChat.active=t,this.btnVoice.active=t}setBtnShowCardInteractable(t){this.btnShowCard.active=t}setBtnInteractable(t,e,i){t.getComponent(h).interactable=e,t.children.forEach((t=>{var a=t.getComponent(o);a&&(a.grayscale=!e);var n=t.getComponent(s);n&&(n.color=e?i:new u("#808080"))}))}resetData(){this.curSeatUserData=null,this.isGameSettling=!1,this.isChangedSeatUnderSettling=!1,this.gameCountdowning=!1}cleanTimer(){this.clearResetDeskTimer(),this.gameCountdownId&&(clearInterval(this.gameCountdownId),this.gameCountdownId=0)}initUIEvent(){this.onN(this.btnMenu,n.EventType.TOUCH_END,this.showMenu),this.onN(this.shuzigunlun,n.EventType.TOUCH_END,this.showPrizePoolUI),this.onN(this.btnRecord,n.EventType.TOUCH_END,this.showRecordUI),this.onN(this.btnZhanji,n.EventType.TOUCH_END,this.showZhanjiUI),this.onN(this.btnSupControl,n.EventType.TOUCH_END,this.requestSupControl),this.onN(this.btnChat,n.EventType.TOUCH_END,this.showChat),this.onN(this.btnVoice,n.EventType.TOUCH_END,this.onPlayAudio),this.onN(this.btnHuiZhuo,n.EventType.TOUCH_END,this.onHuiZhuo),this.onN(this.btnShowCard,n.EventType.TOUCH_END,this.onClickShowCard),this.onN(this.btnChangRoom,n.EventType.TOUCH_END,this.onClickChangeRoom),this.onN(this.btnLocation,n.EventType.TOUCH_END,this.onClickLocate),this.onN(this.btnRefresh,n.EventType.TOUCH_END,this.onClickRefresh),App.event.on(it.GAME_NOTICE,(()=>{this.broadcast.getComponent(lt).fetchNotice()}),this.node),this.btnVoice.on(n.EventType.TOUCH_START,this.voiceStart,this,!0),this.btnVoice.on(n.EventType.TOUCH_MOVE,this.voiceMove,this,!0),this.btnVoice.on(n.EventType.TOUCH_END,this.voiceEnd,this,!0),this.btnVoice.on(n.EventType.TOUCH_CANCEL,this.voiceEnd,this,!0),this.enableFrontAndBackgroundSwitch=!0}onEnterForgeground(t){Log.d("[CheXuanView] onEnterForegound",t),N.reset(),this.isRoomEnd||N.requestRefleshTableContext()}onEnterBackground(){Log.d("[CheXuanView] onEnterBackground"),N.reset(),c.stopAllByTag(this.settleTweenId),this.clearResetDeskTimer(),this.unscheduleAllCallbacks(),App.uiManager.close(ut)}onDestroy(){this.cleanTimer(),this.clearResetDeskTimer(),this.enableFrontAndBackgroundSwitch=!1,super.onDestroy()}addEvents(){super.addEvents(),this.onCustom(D.ChangeTableBg,this.loadTableBg),this.onCustom(D.ChangePokerBack,this.changePokerBack),this.onCustom(D.ShowTakeMoney,this.onShowTakeMoney),this.onCustom(D.RoomEnter,this.onRoomEnter),this.onCustom(D.StartGame,this.onStartGame),this.onCustom(D.FaPaiStart,this.onFaPaiStart),this.onCustom(D.FaPaiEnd,this.onFaPaiEnd),this.onCustom(D.OpenSetting,this.showSetting),this.onCustom(D.OpenPaiXingIntroduction,this.showPaiXingIntroduction),this.onCustom(D.PlayerSitDown,this.onPlayerSitDown),this.onCustom(D.PlayerKeepStand,this.onJudgeBack),this.onCustom(D.PlayerHideBack,this.onHideBack),this.onCustom(D.PlayerKeepSeat,this.onPlayerKeepSeat),this.onCustom(D.PlayerLeave,this.onPlayerLeave),this.onCustom(D.PlayerKeepSeatTimeout,this.onPlayerKeepSeatTimeout),this.onCustom(D.GameSettle,this.onGameSettle),this.onCustom(D.PhaseChange,this.onPhaseChange),this.onCustom(D.FenPaiSuccess,this.stopFenPai),this.onCustom(D.DipiChanged,this.onDipiChanged),this.onCustom(D.PrizePoolChanged,this.onPrizePoolChanged),this.onCustom(D.ShowPlayerDetail,this.showPlayerDetail),this.onCustom(D.GivePlayerMoney,this.showGivePlayerMoney),this.onCustom(D.RoomDismiss,this.onRoomDismiss),this.onCustom(D.RoomEnd,this.onRoomEnd),this.onCustom(D.BroadChatMsg,this.onBroadChatMsg),this.onCustom(D.ReEnterRoom,this.onReEnterRoom),this.onCustom(D.XiuCard,this.onXiuCard),this.onCustom(D.ForceXiuCard,this.onForceXiuCard),this.onCustom(D.AddTime,this.onPlayerAddTime),this.onCustom(D.ShowNextCard,this.onShowNextCard),this.onCustom(D.PlayerSitDownHead,this.onPlayerSitDownHead),this.onCustom(D.RoomRemainTimeUpdate,this.refreshRoomCountdown),this.onCustom($.audioRecordEnd,this.audioRecordEnd),this.onCustom($.audioRecordPlay,this.audioRecordPlay),this.onCustom($.audioRecordPlayEnd,this.audioRecordPlayEnd),this.onCustom($.audioRecordPause,this.audioRecordPause),this.onCustom($.audioRecordStart,this.audioRecordStart),this.onCustom($.audioRecordPermission,this.audioRecordPermission),this.onCustom($.chatVoiceState,this.chatVoiceState),this.onCustom($.stopPlaingAudio,this.stopPlaingAudio),this.onCustom($.audioGetPermission,this.audioGetPermission),this.onCustom($.audioPermissionBack,this.audioPermissionBack),App.event.on(it.NETWORK_RECONNECT_START,(()=>{Q.currentStayTableId=et.getCurEnterRoomData().tableInfo.tableId})),App.event.on(it.NETWORK_RECONNECT_SUCCESS,(()=>{this.reconnectSuccess()}),this.node)}reconnectSuccess(){var t=Q.currentTableId;t<=0&&(t=Q.currentStayTableId),t>0?(at.enterTable({isTalbeNo:!1,tableId:t,password:"",locate:JSON.stringify(App.stageData.GPSLocation)},(t=>{console.log("[CheXuanView] reconnectSuccess rsp = ",t),0!=t.code?N.backToHall():(N.registerEventListener(),et.setCurEnterRoomData(t.data),App.event.emitCustom(D.ReEnterRoom),this.setBtnChatInteractable(!0))})),Q.currentTableId=-1,Q.currentStayTableId=-1):N.backToHall()}initPlayerList(){this.playerViewList=[];let t=this.playerList.children;for(let e=0;e<t.length;e++){this.playerList.children[e].userData=e;let i=t[e].getComponent(T);i||(i=t[e].addComponent(T)),i.initData(),i.init(e),i.setSeatId(e),i.hide(),this.playerViewList.push(i)}this.scheduleOnce((()=>{if(!this.node)return;let t=et.getCurEnterRoomData(),e=t&&t.sitInfo?t.sitInfo.filter((t=>t.userId==rt.getUserData().id)):null;e&&e.length&&L.mySeatId>=0&&this.setBtnChatInteractable(!0)}),1)}showRecordUI(){App.globalAudio.playGlobalEffect(F.audioPath.button),this.uiGameRecord.active=!0,null==this.uiGameRecord.getComponent(J)&&this.uiGameRecord.addComponent(J)}showZhanjiUI(){App.globalAudio.playGlobalEffect(F.audioPath.button),this.uiGameZhanJi.active=!0,null==this.uiGameZhanJi.getComponent(I)&&this.uiGameZhanJi.addComponent(I),this.uiGameZhanJi.getComponent(I).init(this,this.remainTime)}onClickShowCard(){N.requestForceXiuCard((t=>{t&&this.setBtnShowCardInteractable(!1)}))}showChat(){this.enableChat&&(App.globalAudio.playGlobalEffect(F.audioPath.button),App.uiManager.open({type:j,bundle:_.BUNDLE_CheXuan,zIndex:H.UI,name:"聊天界面"}))}voiceStart(t){this.enableChat&&(Log.d("====>>>>按住录音===="),d.isBrowser?App.alert.show("浏览器不能使用语音!"):(this.isRecordingVoice=!0,this.tempMusicState=App.globalAudio.isMusicOn,this.tempEffectState=App.globalAudio.isEffectOn,window.Platform.onCheckReocrdPermission()))}voiceMove(t){this.isRecordingVoice&&Log.d("====>>>>移动录音====")}voiceEnd(t){if(!this.isRecordingVoice)return;if(this.isRecordingVoice=!1,Log.d("====>>>>结束录音==== ",this.permission),this.voicePannel.active&&(this.voicePannel.active=!1),!this.permission)return;let e=((new Date).getTime()-this.voiceStartTime)/1e3;this.voiceDurTime=Math.ceil(e)>this.chatMaxTime?this.chatMaxTime:Math.ceil(e);let i=t.getUILocation();this.btnVoice.getComponent(p).convertToNodeSpaceAR(l(i.x,i.y,0));if(e<this.chatMinTime)Log.d("====>>>>取消录音"),U.onRecordAudio(2,this.mFName,this.voiceDurTime),this.scheduleOnce((()=>{App.globalAudio.musicVolume=1,this.tempMusicState?App.globalAudio.isMusicOn=!0:App.globalAudio.isMusicOn=!1}),0);else{if(e>this.chatMaxTime)return;Log.d("====>>>>结束录音22222"),U.onRecordAudio(1,this.mFName,this.voiceDurTime)}clearInterval(this.pInterval),this.mFName=""}onPlayAudio(){}audioRecordEnd(t){Log.d("====>>>>录音完成，提示发送消息: ",JSON.stringify(t)),this.scheduleOnce((()=>{App.globalAudio.musicVolume=1,this.tempMusicState?App.globalAudio.isMusicOn=!0:App.globalAudio.isMusicOn=!1}),0),console.log({type:G.VOICE,index:L.mySeatId,url:t.URL,time:this.voiceDurTime,from:rt.getUserData().id,to:-1}),N.sendChatMessage({type:G.VOICE,index:L.mySeatId,url:t.URL,time:this.voiceDurTime,from:rt.getUserData().id,to:-1})}audioRecordPlay(){}audioRecordPlayEnd(){this.voiceState=A.Complete,this.tempMusicState&&(App.globalAudio.musicVolume=1)}audioRecordPause(){this.voiceState=A.Pause}audioRecordStart(){Log.d("====>>>>开始录音"),this.voiceState!=A.Loading&&this.voiceState!=A.Playing||!this.voiceUrl||U.onStartPlayAudio(this.voiceUrl),this.voicePannel.active||(this.voicePannel.active=!0),this.tempMusicState&&(App.globalAudio.musicVolume=.1),this.permission||(this.permission=!0),Log.d("====>>>>audioRecordStart: ",this.permission),this.mFName=U.onCreateFName(),this.voiceStartTime=(new Date).getTime(),U.onRecordAudio(0,this.mFName),this.pInterval=setTimeout((()=>{this.voiceDurTime=this.chatMaxTime,U.onRecordAudio(1,this.mFName,this.voiceDurTime),this.mFName="",this.tempMusicState&&(App.globalAudio.musicVolume=1)}),1e3*this.chatMaxTime)}chatVoiceState(t){U.onStartPlayAudio(this.voiceUrl)}stopPlaingAudio(){}audioRecordPermission(){this.permission=!1,Log.d("====>>>>audioRecordPermission: ")}audioGetPermission(){d.isNative&&App.alert.show({title:"是否跳转权限界面",confirmCb:t=>{t&&window.Platform.onJumpSetting()},cancelCb:()=>{}})}audioPermissionBack(){this.scheduleOnce((()=>{App.globalAudio.isMusicOn=this.tempMusicState,App.globalAudio.isEffectOn=this.tempEffectState,this.tempMusicState&&(App.globalAudio.musicVolume=1)}),0)}onClickChangeRoom(){App.globalAudio.playGlobalEffect(F.audioPath.button),App.uiManager.open({type:ot,bundle:_.BUNDLE_CheXuan,zIndex:H.UI,name:"切换房间界面"})}onClickLocate(){App.globalAudio.playGlobalEffect(F.audioPath.button),this.LocateShow.active=!0,this.scheduleOnce((()=>{this.node&&this.LocateShow&&(this.LocateShow.active=!1)}),3)}onClickRefresh(){this.enableRefresh&&(App.globalAudio.playGlobalEffect(F.audioPath.button),this.startRecoveryRefreshBtn(),App.pomelo.isConnected()?(N.reset(),N.requestRefleshTableContext(1)):App.pomelo.emit("on-reconnect"),this.btnRefresh.eulerAngles=l(0,0,0),m(this.btnRefresh).to(1.2,{eulerAngles:l(0,0,-720)}).start())}startRecoveryRefreshBtn(){this.btnRefresh.getComponent(h).interactable=!1,this.enableRefresh=!1,m(this.btnRefresh).delay(5).call((()=>{this.enableRefresh=!0,this.btnRefresh.getComponent(h).interactable=!0})).start()}showPrizePoolUI(){App.asset.load(_.BUNDLE_CheXuan,"prefabs/PrizePoolView",g,(()=>{}),(t=>{const e=f(t.data);this.subviewParent&&(this.subviewParent.addChild(e),e.addComponent(W))}))}onHuiZhuo(){App.globalAudio.playGlobalEffect(F.audioPath.button),App.event.emitCustom(D.PlayerBackSitDown)}showMenu(){App.globalAudio.playGlobalEffect(F.audioPath.button),this.uiMenu.active=!0,null==this.uiMenu.getComponent(B)&&this.uiMenu.addComponent(B)}showSetting(){App.globalAudio.playGlobalEffect(F.audioPath.button),App.uiManager.open({type:q,bundle:_.BUNDLE_RESOURCES})}showPaiXingIntroduction(){this.uiPaixingIntroduction.active=!0,null==this.uiPaixingIntroduction.getComponent(x)&&this.uiPaixingIntroduction.addComponent(x)}requestSupControl(t,e,i){let a=App.stageData.IsMatch?"hall.hallHandler.requestSuperControl":"cx.cxHandler.requestSuperControl";App.pomelo.request(a,{},(t=>{0==t.code&&App.alert.show("操作成功")}))}onPlayerSitDown(t){if(!App.stageData.IsMatch&&this.isGameSettling&&L.hasGamingPlayer(t.seatId))this.isChangedSeatUnderSettling=!0;else if(t.seatId==L.mySeatId){let e=App.stageData.IsMatch?"hall.hallHandler.reqSwitchSuperControl":"cx.cxHandler.reqSwitchSuperControl";if(App.pomelo.request(e,{},(t=>{0==t.code?this.btnSupControl.active=!0:this.btnSupControl.active=!1})),!this.playerViewList.find((e=>e.playerData&&e.playerData.uiId==t.uiId))){let t=f(this.playerList);t.parent=this.node,this.playerList.getComponent(b).opacity=0;for(let e=0;e<this.curSeatUserData;e++)for(let i=0;i<t.children.length;i++){let a=(7+i-e)%t.children.length,o=this.playerList.children[a].getPosition();m(t.children[i]).delay(.12*e).to(.12,{position:o}).start()}this.scheduleOnce((()=>{this.node&&t&&(t.removeFromParent(),this.playerList.getComponent(b).opacity=255)}),.12*this.curSeatUserData)}this.resetPlayersSeatId(),this.playerViewList.forEach(((t,e)=>{t.initPlayerInfo(L.getPlayerByUIIndex(t.uiIndex))})),this.setBtnChatInteractable(!0)}else{var e=this.playerViewList[t.uiId];if(null==e)return;e.setPlayerView(t)}}onPlayerAddTime(t){let e=t.userId,i=t.time;if(e&&i){var a=L.getPlayerById(e);if(a)this.playerViewList[a.uiId].addTime(i)}}onPlayerKeepSeat(t){var e=this.playerViewList[t.uiId];null!=e&&(Log.d("[CheXuanView] onPlayerKeepSeat start"),e.setPlayerView(t))}onPlayerSitDownHead(){this.setBtnChatInteractable(!0),this.setBtnInteractable(this.btnChat,!0,u.WHITE),this.onJudgeBack()}onPlayerLeave(t){var e;if(this.isGameSettling&&L.hasGamingPlayer(t))this.isChangedSeatUnderSettling=!0;else{L.isISitdown||(this.selfCardView.hide(),this.setBtnChatInteractable(!1));var i=L.getUISeadId(t);if(null==(e=this.playerViewList[i])||e.onPlayerLeave(t),!L.isIHasSeat){let t=this.playerList.children;for(let e=0;e<t.length;e++){let i=t[e].getComponent(T);i.playerData||i.showSit()}}this.onJudgeBack()}}onPlayerKeepSeatTimeout(t){var e;L.isISitdown||(this.selfCardView.hide(),this.setBtnChatInteractable(!1));var i=L.getUISeadId(t);if(null==(e=this.playerViewList[i])||e.onPlayerLeave(t),!L.isIHasSeat){let t=this.playerList.children;for(let e=0;e<t.length;e++){let i=t[e].getComponent(T);i.playerData||i.showSit()}}}onPhaseChange(t){this.gameCountdowning||this.startRoomCountdown(),this.startTips.active=!1,t!=k.SETTLE&&(this.isGameSettling=!1,this.isChangedSeatUnderSettling=!1,t==k.FEN&&L.canOperate&&this.selfCardView.startFenPai())}stopFenPai(t,e){t==L.mySeatId&&this.selfCardView.stopFenPai(e)}onDipiChanged(){this.dipitxtScore.string=U.getScoreImplicit(L.dipi)}onPrizePoolChanged(){App.stageData.IsMatch||this.gunlunView.updateNum(L.prizePool)}onGameSettle(t,e){if(this.isGameSettling=!0,L.isISitdown){this.selfCardView.turnPokerOver(),this.selfCardView.stopFenPai();let t=L.getMyself();if(t&&4!=t.handCards.length&&t.isGameing&&this.operateView.showBtnNextCard(),e&&e>0){let e=this.playerViewList.find((t=>t&&t.playerData&&t.playerData.isBanker));if(e){let i=e.getSeatId(),a=null;for(;i+=1,i>=this.playerViewList.length&&(i=0),a=L.getPlayerBySeatId(i),!a;);a.seatId==t.seatId&&this.operateView.showBtnCut()}}}let i=[];var a={userName:"",reward:0,winType:0};t.forEach((t=>{var e=L.getPlayerById(t.userId);if(null!=e){var o=this.playerViewList[e.uiId];null!=o&&(i.push(o),t.gmPool&&t.gmPool.win&&t.gmPool.win>0&&(a={userName:e.playerName,reward:t.gmPool.win,winType:t.gmPool.winType}))}})),a.reward>0&&this.showCongratulationView(a),this.showFenPaiResult(t),this.delayResetDesk(),m(this.choumaParent).tag(this.settleTweenId).delay(.2).call((()=>{this.collectCoin()})).delay(.3).call((()=>{this.showWinMoney(t,i)})).delay(3).call((()=>{this.isGameSettling=!1,L.setCurrentPhase(E.End),this.setBtnShowCardInteractable(!1),this.operateView.hide(),this.isChangedSeatUnderSettling&&(this.isChangedSeatUnderSettling=!1,this.refreshPlayerList(),this.resetPlayersSeatId(),L.isISitdown?this.setBtnChatInteractable(!0):(this.selfCardView.hide(),this.setBtnChatInteractable(!1)))})).start()}clearResetDeskTimer(){this.delayResetDeskTimer&&(clearTimeout(this.delayResetDeskTimer),this.delayResetDeskTimer=null)}delayResetDesk(){this.clearResetDeskTimer(),this.delayResetDeskTimer=setTimeout((()=>{this.resetDeskInfo(),this.startTips.active=!0,this.delayResetDeskTimer=null}),1e4)}showFenPaiResult(t){let e=0,i=!1;t.forEach((t=>{var a=L.getPlayerById(t.userId);if(null!=a){var o=this.playerViewList[a.uiId];if(null!=o&&t.cardInfo&&t.cardInfo.cards.length>0){e++;for(var n=t.cardInfo.cards,s=[],r=0;r<n.length;r++){var l=n[r];s.push(new st(l.color,l.point))}a.seatId==L.mySeatId?(i=!0,this.selfCardView.showFenCard(s,t.cardInfo.types)):o.showFenPaiResult(s,t.cardInfo.types)}}}));let a=this.playerViewList.filter((t=>t.playerData&&t.playerData.isGameing)).length;i?this.setBtnShowCardInteractable(a>e):this.setBtnShowCardInteractable(a-1>e)}collectCoin(){this.playerViewList.forEach((t=>{var e=t.playerData;if(null!=e&&e.isGameing){var i=l(0,0,0),a=l(0,0,0);this.choumaParent.inverseTransformPoint(i,t.betParent.getWorldPosition()),this.choumaParent.inverseTransformPoint(a,this.dipiImg.node.getWorldPosition());var o=this.getChouma();o.position=i,t.hideBet(),m(o).to(.2,{position:a}).call((()=>{this.recoveryChouma(o)})).start()}}))}showWinMoney(t,e){this.choumatxtScore.string=U.getScoreImplicit(L.mangoPool),this.dipitxtScore.string="0",t.forEach(((t,i)=>{if(t.amount&&!(t.amount<=0)){var a=e[i];if(null!=a){var o=l(0,0,0),n=l(0,0,0);this.choumaParent.inverseTransformPoint(o,a.node.getWorldPosition()),this.choumaParent.inverseTransformPoint(n,this.dipiImg.node.getWorldPosition());var s=this.getChouma();s.position=n,App.globalAudio.playGlobalEffect("common/audio/collect_coin"),m(s).to(.2,{position:o}).call((()=>{t.win>0&&(App.globalAudio.playGlobalEffect("common/audio/checkwin1"),a.showWinMoney(t.win)),a.refreshMoney(),this.recoveryChouma(s)})).start()}}}))}onXiuCard(t){if(this.isGameSettling){var e=L.getPlayerById(t.userId);if(null!=e){var i=this.playerViewList[e.uiId];if(null!=i){for(var a=[],o=0;o<t.cards.length;o++){var n=t.cards[o];if(0==n)continue;let e=Math.floor(n/100),i=Math.floor(n%100);a.push(new st(e,i))}a.length>0&&i.xiuCard(a)}}}}onForceXiuCard(t){this.isGameSettling&&Array.isArray(t)&&t.forEach((t=>{var e=[];t.cards.forEach((t=>{var i=100*t.color+t.point;e.push(i)})),this.onXiuCard({userId:t.userId,cards:e})}))}showCongratulationView(t){App.uiManager.open({type:nt,bundle:_.BUNDLE_CheXuan,zIndex:H.UI,args:t,name:"中奖界面"})}showPlayerDetail(t){this.uiPlayerDetailView.active=!0;var e=this.uiPlayerDetailView.getComponent(X);null==e&&(e=this.uiPlayerDetailView.addComponent(X)),e.init(t)}showGivePlayerMoney(t){App.asset.load(_.BUNDLE_CheXuan,"prefabs/PlayerGiveView",g,(()=>{}),(e=>{const i=f(e.data);this.subviewParent.addChild(i),i.addComponent(Z).init(t)}))}loadTableBg(){var t=z.get("table_picture",O.ALL);t||(z.set("table_picture","bg_1",O.ALL),t="bg_1"),Log.d("====>>>>bgName: ",t),App.asset.loadSF(_.BUNDLE_CheXuan,"images/bgs/"+t,(t=>{null!=t&&this.sprBg&&(this.sprBg.spriteFrame=t)})),App.stageData.IsMatch&&(C("stateIcon",this.sprBg.node).active=!0)}changePokerBack(){this.loadPokerBack(),this.fapaiNode.children.forEach((t=>{var e=t.getComponent(o);ht.loadPokerBack(e)}))}onShowTakeMoney(t,e,i){Log.d("====>>>>onShowTakeMoney: ",t,e),this.curSeatUserData=e,App.uiLoading.show(),N.requestArrestInfo((e=>{if(!App.stageData.IsMatch)if(e&&e.repMango>0)App.alert.show({text:"加入可能需要补充芒果于芒果池中，是否继续？",cancelCb:()=>{},confirmCb:a=>{if(a){this.uiDaiRuSetting.active=!0;let a=this.uiDaiRuSetting.getComponent(R);null==a&&(a=this.uiDaiRuSetting.addComponent(R)),a.init(t,e,i)}}});else if(e&&0==e.repMango){this.uiDaiRuSetting.active=!0;let a=this.uiDaiRuSetting.getComponent(R);null==a&&(a=this.uiDaiRuSetting.addComponent(R)),a.init(t,e,i)}}))}onRoomEnter(){(this.resetDeskInfo(),this.refreshPlayerList(),this.initRoomInfo(),L.isIHasSeat&&this.resetPlayersSeatId(),L.isGaming)?(L.isISitdown&&this.selfCardView.showHandCards(),L.gameState==k.FEN?L.canOperate&&(L.getMyself().splited?this.selfCardView.recoveryFenPai():(this.selfCardView.startFenPai(),this.operateView.showBtnAddTime())):L.gameState==k.SETTLE||App.event.emitCustom(D.TurnToPlayer)):L.gameState<0||(L.gameState,k.SETTLE)}resetPlayersSeatId(){if(L.seatStartId>=0){var t=L.seatStartId,e=this.playerViewList.length;this.playerViewList.forEach(((i,a)=>{var o=(t+a)%e;i.setSeatId(o)}))}}initRoomInfo(){var t=et.getCurEnterRoomData().tableInfo,e=t.tabaleState==Y.GAME;App.stageData.IsMatch?(this.spGameName.active=!!App.stageData.getTempDiwang(),this.txtRoomNum.string="比赛场"):(this.spGameName.active=t.diwang,this.txtRoomNum.string="房间号:"+U.padLeft(t.tableNo,6));var i=U.getScoreImplicit(t.pi),a=U.getScoreImplicit(t.mango);this.txtScoreBase.string=`底皮:${i}/${a}`,this.txtOpenTips.string=`满 ${t.leastUsers} 人游戏开始`,this.txtTime.string=U.convertToTime(t.remainTime),App.stageData.IsMatch||(this.gunlunView.setNum(L.prizePool),this.gunlunView.node.active=t.poolOpen),t.poolOpen&&this.schedule((()=>{N.requestGamePool((e=>{0==e.code?e.data&&e.data.pools&&e.data.pools.forEach((e=>{console.log("奖池ssss"+e.pi+"--------"+t.pi),e.pi==t.pi&&(L.prizePool=e.pool)})):Log.d("获取游戏奖池数据失败")}))}),10,y.REPEAT_FOREVER,.1),e&&(this.dipi.active=!0,this.choumang.active=!0),this.remainTime=t.remainTime,t.gameTime!==t.remainTime&&this.startRoomCountdown()}startRoomCountdown(){this.gameCountdowning||(this.gameCountdowning=!0,this.remainTime=et.getCurEnterRoomData().tableInfo.remainTime,this.remainTime,this.remainTime,this.refreshRoomCountdown())}refreshRoomCountdown(t){t&&(this.remainTime=t),this.txtTime.string=U.convertToTime(this.remainTime),this.remainTime>0&&(this.gameCountdownId&&clearInterval(this.gameCountdownId),this.gameCountdownId=setInterval((()=>{this.remainTime>0&&(this.remainTime-=1),this.remainTime=Math.max(0,this.remainTime),this.txtTime.string=U.convertToTime(this.remainTime),this.remainTime,this.remainTime<=0&&clearInterval(this.gameCountdownId)}),1e3))}refreshPlayerList(){for(let t=0;t<this.playerViewList.length;t++)this.refreshPlayer(t)}refreshPlayer(t){let e=this.playerViewList[t];e&&e.initPlayerInfo(L.getPlayerByUIIndex(t))}onFaPaiClicked(){for(let t=0;t<129;t++)this.toTargetPlayerFaPai(t%this.playerViewList.length,t,Math.floor(t/this.playerViewList.length))}onStartGame(t,e,i){this.clearResetDeskTimer(),App.alert.close("forceXiuInGame"),this.resetDeskInfo(),console.log("发牌数据："+JSON.stringify(e)),e.forEach((t=>{const e=L.getPlayerBySeatId(t.seatId);e&&this.playerViewList[e.uiId].refreshMoney()})),t?this.startXiPai((()=>{this.playGameStartBet(e,(()=>{this.onFaPaiStart(i)}))})):this.playGameStartBet(e,(()=>{this.onFaPaiStart(i)}))}playGameStartBet(t,e){t.forEach((t=>{const i=L.getPlayerBySeatId(t.seatId);if(null!=i){var a=this.playerViewList[i.uiId];if(null!=a){var o=l(0,0,0),n=l(0,0,0),s=l(0,0,0);this.choumaParent.inverseTransformPoint(o,a.betStart.getWorldPosition()),this.choumaParent.inverseTransformPoint(n,a.betParent.getWorldPosition()),this.choumaParent.inverseTransformPoint(s,this.choumaImg.node.getWorldPosition());var r=this.getChouma();r.position=o,m(r).to(.2,{position:n}).call((()=>{r.active=!1,a.playBet(i.betMangoAmount),App.globalAudio.playGlobalEffect(F.audioPath.bet)})).delay(.2).call((()=>{r.active=!0,a.hideBet()})).to(.2,{position:s}).call((()=>{r.active=!1,r.position=o,r.active=!0})).to(.2,{position:n}).call((()=>{this.recoveryChouma(r),a.playBet(i.betAmount),App.globalAudio.playGlobalEffect(F.audioPath.bet),e&&e()})).start()}}}))}playBetAnim(t){const e=L.getPlayerBySeatId(t);if(null!=e){var i=this.playerViewList[e.uiId];if(null!=i){var a=l(0,0,0),o=l(0,0,0);this.choumaParent.inverseTransformPoint(a,i.betStart.getWorldPosition()),this.choumaParent.inverseTransformPoint(o,i.betParent.getWorldPosition());var n=this.getChouma();n.position=a,m(n).to(.2,{position:o}).call((()=>{n.active=!1,this.recoveryChouma(n)})).start()}}}onFaPaiEnd(){Log.d("[CheXuanView] onFaPaiEnd CheXuanEvent.TurnToPlayer"),L.curTurnSeatId>=0&&App.event.emitCustom(D.TurnToPlayer)}resetDeskInfo(){this.nextCard=[],this.chatRoot.removeAllChildren(),this.showpaiRoot.removeAllChildren(),App.event.emitCustom(D.ResetNextCardID),this.startTips.active=!1,this.bet.active=!0,this.choumang.active=!0,this.dipi.active=!0,this.choumatxtScore.string=U.getScoreImplicit(L.mangoPool),this.choumatxtDes.node.active=L.mangoCount>0,this.choumatxtDes.string=`休/揍芒x${L.mangoCount}`,this.dipitxtScore.string=U.getScoreImplicit(L.dipi),this.playerViewList.forEach((t=>t.resetDeskInfo())),this.operateView.hide(),this.selfCardView.hide()}onFaPaiStart(t){var e=L.curBanker,i=this.playerViewList.length;console.log("====>>>>seatPaiList: ",t,e,i),t.sort(((t,a)=>(t.seatId-e+i)%i-(a.seatId-e+i)%i));const a=t.reduce(((t,e)=>t+e.cardCount),0);for(let e=0;e<a;e++){const i=t[e%t.length],o=L.getPlayerBySeatId(i.seatId),n=e;this.scheduleOnce((()=>{this.node&&this.toTargetPlayerFaPai(o.uiId,Math.floor(e/t.length)+1,n,e==a-1,i.cp)}),.07*e)}}async toTargetPlayerFaPai(t,e,i,a,o){const n=this.playerViewList[t];let s=null,r=null;if(console.log("发牌玩家数据："+JSON.stringify(n.playerData.isSelf)),n.playerData.isSelf){let t=n.playerData.cardCount+1;t>4&&(t=4),s=this.selfCards.getChildByName("card"+t),r=l(.86,.86,.86)}else s=n.handCards.getChildByName("card"+n.playerData.cardCount),r=l(.3,.3,.4);if(!s)return;const h=L.getPlayerByUIIndex(t);if(!h)return;const u=f(this.fapaiNode);u.active=!0,this.fapaiRoot.addChild(u),u.position=l(0,0,0),u.scale=l(.2,.2,.2);const c=s.getWorldPosition();u.parent.inverseTransformPoint(u.position,c);const d=l(u.position.x,u.position.y,u.position.z);App.globalAudio.playGlobalEffect("common/audio/new_dealcards_"+i),u.position=l(0,0,0),m(u).to(.45,{position:d,scale:r,eulerAngles:l(0,0,360)},{easing:"quartOut"}).call((()=>{h&&(h.isSelf?this.selfCardView.onSelfFapaiEnd(e):n.onFaPaiEnd(e,o)),u.destroy(),a&&App.event.emitCustom(D.FaPaiEnd)})).start()}getChouma(){var t=f(this.sprChouma);return t.parent=this.choumaParent,t.active=!0,t}recoveryChouma(t){t.active=!1,t.destroy()}sleep(t){return new Promise((e=>setTimeout(e,1e3*t)))}onRoomDismiss(){}onRoomEnd(t){App.alert.close("forceXiuInReplay"),App.alert.close("forceXiuInGame"),App.alert.close("autoLiuZhuo"),App.alert.show("本轮已结算")}onReEnterRoom(){this.cleanTimer(),this.unscheduleAllCallbacks(),this.choumaParent.destroyAllChildren(),this.fapaiRoot.destroyAllChildren(),this.resetUI(),this.resetData(),N.initRoomInfo(),this.onJudgeBack()}onBroadChatMsg(t){Log.d("[CheXuanView] onBroadChatMsg: ",t),t.type==G.CHAT?this.sendChat(t):t.type==G.GIFT?this.sendGift(t):t.type==G.EMOJI&&this.sendEmoji(t)}sendChat(t){var e=L.getPlayerById(t.from);if(e){var i=this.playerViewList[e.uiId];i&&(i.showChatMsg(this.getChatMsg(t.index)),App.globalAudio.playGlobalEffect("common/chat/chat_"+t.index))}}getChatMsg(t){return this.chatMsgList.length<t?"":this.chatMsgList[t-1]}sendGift(t){var e=L.getPlayerById(t.from);if(e){var i=this.playerViewList[e.uiId];if(i){var a=l(0,0,0);this.chatRoot.inverseTransformPoint(a,i.node.getWorldPosition());for(var o=0;o<this.playerViewList.length;o++){var n=this.playerViewList[o];if(n&&n.playerData&&!n.playerData.isKeepSeat&&n.playerData.playerId!=t.from&&(-1==t.to||n.playerData.playerId==t.to)){var s=l(0,0,0);this.chatRoot.inverseTransformPoint(s,n.node.getWorldPosition());let e=this.getGiftConfig(t.index);n.playerData.isSelf&&App.tips.show(`收到来自${t.username} 赠送的 ${e.name}`),this.sendGiftToPlayer(t.index,a,s)}}}}}getGiftConfig(t){return ct.getConfig(dt.CONFIG_GIFT).find((e=>e.id==t))}sendGiftToPlayer(t,e,i){App.asset.load(_.BUNDLE_CheXuan,"prefabs/chat/gift"+t,g,(()=>{}),(a=>{const o=f(a.data);this.chatRoot.addChild(o),o.position=e;var n=3,s=o.getComponent(tt);s&&(s.interval=.08,s.loopNum=1,s.playOnLoad=!1,n=s.duration),m(o).to(.2,{position:i}).call((()=>{App.globalAudio.playGlobalEffect("common/chat/gift_"+t),s&&s.startAnim()})).delay(n).call((()=>{o.destroy()})).start()}))}sendEmoji(t){var e=L.getPlayerById(t.from);if(!e)return;let i=this.playerViewList[e.uiId].playerIconNode;if(i){var a=l(0,0,0);App.asset.load(_.BUNDLE_CheXuan,"prefabs/chat/biaoqing"+t.index,g,(()=>{}),(t=>{const e=f(t.data);i.addChild(e),e.position=a,setTimeout((()=>{e&&e.destroy()}),3e3)}))}}onShowNextCard(t){if(!t)return;this.nextCard.push(f(this.fapaiNode)),this.nextCard[this.nextCard.length-1].setParent(this.showpaiRoot),this.nextCard[this.nextCard.length-1].scale=l(1.5,1.5,1.5);let e=this.nextCard[this.nextCard.length-1].getComponent(o);ht.loadPokerBack(e),this.nextCard[this.nextCard.length-1].active=!0,this.nextCard[this.nextCard.length-1].rotation=w.IDENTITY;let i=new w;w.fromEuler(i,0,90,0);let a=new st(t.color,t.point);m(this.nextCard[this.nextCard.length-1]).to(.1,{rotation:i}).call((()=>{ht.loadPoker(e,a.getSpriteName())})).to(.1,{rotation:w.IDENTITY}).start(),App.event.emitCustom(D.NextCardEmpty,this.nextCard.length)}startXiPai(t){var e=z.get("poker_back",O.ALL);e||(e="p_bei_4");let i=e.split("_")[2];App.asset.load(_.BUNDLE_CheXuan,`prefabs/xipai/xipai_${i}`,g,(()=>{}),(t=>{const e=f(t.data);e.setParent(this.showpaiRoot),e.position=l(0,0,0),m(e).delay(1).call((()=>{e.destroy(),this.startQiePai()})).start()})),m(this.node).delay(2).call((()=>{t&&t()})).start()}startQiePai(){var t=z.get("poker_back",O.ALL);t||(t="p_bei_4");let e=t.split("_")[2];App.asset.load(_.BUNDLE_CheXuan,`prefabs/qiepai/qiepai_${e}`,g,(()=>{}),(t=>{const e=f(t.data);e.setParent(this.showpaiRoot),e.position=l(0,-30,0),m(e).delay(1).call((()=>{e.destroy()})).start()}))}onDisable(){clearInterval(this.curTime)}}).prototype,"logic",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=e(de.prototype,"sprBg",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=e(de.prototype,"btnMenu",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=e(de.prototype,"btnRecord",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=e(de.prototype,"shuzigunlun",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=e(de.prototype,"spBattery",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=e(de.prototype,"labTime",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=e(de.prototype,"spWifi",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=e(de.prototype,"btnRefresh",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=e(de.prototype,"btnLocation",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=e(de.prototype,"LocateShow",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=e(de.prototype,"broadcast",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=e(de.prototype,"btnZhanji",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=e(de.prototype,"btnSupControl",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=e(de.prototype,"fapaiRoot",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=e(de.prototype,"chatRoot",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=e(de.prototype,"showpaiRoot",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=e(de.prototype,"fapaiNode",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=e(de.prototype,"playerList",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=e(de.prototype,"startTips",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=e(de.prototype,"txtOpenTips",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=e(de.prototype,"subviewParent",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=e(de.prototype,"uiGameZhanJi",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=e(de.prototype,"uiGameRecord",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=e(de.prototype,"uiDaiRuSetting",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=e(de.prototype,"uiMenu",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=e(de.prototype,"uiPaixingIntroduction",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=e(de.prototype,"uiPlayerDetailView",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=e(de.prototype,"bet",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=e(de.prototype,"choumang",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=e(de.prototype,"choumaImg",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=e(de.prototype,"choumatxtScore",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=e(de.prototype,"choumatxtDes",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=e(de.prototype,"dipi",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=e(de.prototype,"dipiImg",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=e(de.prototype,"dipitxtScore",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=e(de.prototype,"txtDiPi",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=e(de.prototype,"sprChouma",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=e(de.prototype,"choumaParent",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=e(de.prototype,"spGameName",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=e(de.prototype,"txtTime",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=e(de.prototype,"txtRoomNum",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=e(de.prototype,"txtScoreBase",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=e(de.prototype,"txtMode",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=e(de.prototype,"Operate",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=e(de.prototype,"selfCards",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ni=e(de.prototype,"btnShowCard",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=e(de.prototype,"btnChat",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=e(de.prototype,"btnVoice",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=e(de.prototype,"btnHuiZhuo",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hi=e(de.prototype,"voicePannel",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=e(de.prototype,"btnChangRoom",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=de))||ce));a._RF.pop()}}}));

System.register("chunks:///_virtual/ChuoPaiView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./CheXuanPoker.ts","./Decorators.ts","./PokerUtils.ts","./CheXuanEnum.ts","./CheXuanModel.ts"],(function(t){"use strict";var e,o,i,s,n,h,r,a,u,c,l,p,P,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,s=t.Sprite,n=t.Node,h=t._decorator,r=t.UITransform,a=t.Vec3},function(t){u=t.default},function(t){c=t.CheXuanPoker},function(t){l=t.inject},function(t){p=t.PokerUtils},function(t){P=t.CheXuanEvent},function(t){k=t.GameTableState}],execute:function(){var d,C,g,E,T,m,w;i._RF.push({},"ba4bcwtJehM1rPfX21gc9VG","ChuoPaiView",void 0);const{ccclass:b,property:f}=h;t("ChuoPaiView",(d=b("ChuoPaiView"),C=l("downPoker",s),g=l("upPoker",n),d((m=e((T=class extends u{constructor(...t){super(...t),o(this,"downPoker",m,this),o(this,"upPoker",w,this),this.closeEnable=!1,this.isPressing=!1,this.timerId=0,this.contentSize=void 0,this.maskState=!1}static getPrefabUrl(){return"prefabs/ChuoPaiView"}onLoad(){super.onLoad(),this.contentSize=this.upPoker.getComponent(r).contentSize}addEvents(){this.onN(this.node,n.EventType.TOUCH_END,this.onClose,this),this.onN(this.upPoker,n.EventType.TOUCH_START,this.onTouchStart,this),this.onN(this.upPoker,n.EventType.TOUCH_MOVE,this.onTouchMove,this),this.onN(this.upPoker,n.EventType.TOUCH_END,this.onTouchEnd,this),this.onN(this.upPoker,n.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.onCustom(P.PhaseChange,this.onPhaseChange)}onShow(){this.setPoker(this.args.data),this.setMask(!0),this.isPressing=!1,this.closeEnable=!1,this.timerId=setTimeout((()=>{this.closeEnable=!0}),1e4),this.upPoker.position=a.ZERO,p.loadPokerBack(this.upPoker.getComponent(s))}setPoker(t){p.loadCuoPoker(this.downPoker,t.getSpriteName())}setMask(t){this.downPoker.node.children.forEach((e=>{e.active=t}))}setCard(t){this.setPoker(new c(t.color,t.point))}onTouchStart(t){this.isPressing=!0}onTouchMove(t){if(!this.isPressing)return;let e=t.getUIDelta(),o=this.upPoker.position;o.add(new a(e.x,e.y,0)),this.upPoker.setPosition(o);let i=this.downPoker.node.position,s=this.upPoker.position,n=Math.abs(i.x-s.x),h=Math.abs(i.y-s.y);!this.maskState&&(n>=this.downPoker.getComponent(r).width/2||h>=this.upPoker.getComponent(r).height/2)&&(this.maskState=!0,this.setMask(!1))}onTouchEnd(t){this.isPressing=!1,this.closeEnable=!0;let e=this.downPoker.node.position,o=this.upPoker.position,i=Math.abs(e.x-o.x),s=Math.abs(e.y-o.y);(i>=this.downPoker.getComponent(r).width/2||s>=this.upPoker.getComponent(r).height/2)&&this.onClose()}onPhaseChange(t){t!=k.FEN&&t!=k.SETTLE||this.onClose()}onClose(){this.closeEnable&&(this.closeEnable=!1,clearTimeout(this.timerId),App.event.emitCustom(P.CuoPaiClose),this.close())}}).prototype,"downPoker",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(T.prototype,"upPoker",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/CongratulationView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./Utils.ts","./PokerUtils.ts","./Config.ts"],(function(t){"use strict";var e,n,o,i,r,a,s,l,c,u,h,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,r=t.RichText,a=t.Label,s=t._decorator,l=t.tween},function(t){c=t.default},function(t){u=t.inject},function(t){h=t.default},function(t){f=t.PokerUtils},function(t){p=t.Config}],execute:function(){var b,g,d,C,y,w,m,x,P;o._RF.push({},"ab449c+oyJJrr/2bIYmuMOY","CongratulationView",void 0);const{ccclass:v,property:E}=s;t("default",(b=v("CongratulationView"),g=u("content",i),d=u("content/txtContent",r),C=u("content/txtScore",a),b((m=e((w=class extends c{constructor(...t){super(...t),n(this,"contentParent",m,this),n(this,"txtContent",x,this),n(this,"txtScore",P,this),this.closeEnable=!1}static getPrefabUrl(){return"prefabs/CongratulateView"}onLoad(){super.onLoad(),this.closeEnable=!1}start(){App.globalAudio.playGlobalEffect(p.audioPath.congratulate)}addEvents(){this.onN(this.node,i.EventType.TOUCH_END,this.onConfirm,this)}onConfirm(){this.closeEnable&&this.close()}onShow(){this.contentParent.active=!1;var t=f.getPrizeTypeName(this.args.winType),e=`<b>恭喜<color=#00FF0C>${this.args.userName}</color>拿到<color=#FC8A36>${t}</color>牌型</b>`;this.txtContent.string=e,this.txtScore.string=h.getScoreImplicit(this.args.reward),l(this.node).delay(.2).call((()=>{this.contentParent.active=!0,this.closeEnable=!0})).delay(3).call((()=>{this.onConfirm()})).start()}}).prototype,"contentParent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(w.prototype,"txtContent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(w.prototype,"txtScore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/CountdownView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./Config.ts"],(function(t){"use strict";var i,n,o,e,s,u,l,h,a,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,e=t.Label,s=t.Node,u=t._decorator,l=t.Sprite},function(t){h=t.default},function(t){a=t.inject},function(t){c=t.Config}],execute:function(){var r,d,f,w,C,p,m;o._RF.push({},"afd08LYybVPkYo4HY3TkwtX","CountdownView",void 0);const{ccclass:b,property:g}=u;t("CountdownView",(r=b("CountdownView"),d=a("txtCountdown",e),f=a("lizi",s),r((p=i((C=class extends h{constructor(...t){super(...t),n(this,"txtCountdown",p,this),n(this,"lizi",m,this),this.countdown=null,this.countdownTime=10,this.leftTime=0,this.isCountdowning=!1,this.updateCb=null,this.finishCb=null,this.soundEnable=!0}onLoad(){this.countdown=this.getComponent(l)}init(t,i=!0,n=null){this.updateCb=n,this.finishCb=t,this.soundEnable=i}startCountdown(t,i){this.node.active=!0,this.lizi&&(this.lizi.active=!0),this.countdownTime=t,this.leftTime=i;var n=this.leftTime/this.countdownTime;this.countdown.fillRange=n,this.txtCountdown.string=Math.ceil(this.leftTime).toString(),this.isCountdowning=!0,this.setLiziPosition(n)}addTime(t){this.countdownTime+=t,this.leftTime+=t}update(t){if(this.isCountdowning){this.leftTime-=t,this.updateCb&&this.updateCb(this.leftTime);let n=Math.ceil(this.leftTime).toString();n!=this.txtCountdown.string&&(this.txtCountdown.string=n,Number(n)<=5&&this.soundEnable&&App.globalAudio.playGlobalEffect(c.audioPath.timecount));var i=this.leftTime/this.countdownTime;this.countdown.fillRange=this.leftTime/this.countdownTime,this.setLiziPosition(i),this.leftTime<=0&&this.closeCountdown()}}setLiziPosition(t){if(!this.lizi)return;let i=360*t*Math.PI/180,n=-40*Math.sin(i),o=40*Math.cos(i);this.lizi.setPosition(n,o,0)}closeCountdown(){this.node.active=!1,this.isCountdowning=!1,this.lizi&&(this.lizi.active=!1),this.finishCb&&this.finishCb()}}).prototype,"txtCountdown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(C.prototype,"lizi",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/DaiRuSettingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./CheXuanModel.ts","./UserData.ts","./Utils.ts","./HallData.ts","./Config.ts","./CheXuanData.ts","./SliderProgressBar.ts","./RechargeView.ts","./Macros.ts"],(function(t){"use strict";var i,e,n,r,s,a,o,l,h,u,c,d,f,b,_,p,g,M,C,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,s=t.Slider,a=t.Label,o=t.RichText,l=t._decorator},function(t){h=t.default},function(t){u=t.inject},function(t){c=t.CheXuanModel},function(t){d=t.UserDataEn},function(t){f=t.default},function(t){b=t.HallDataEn},function(t){_=t.Config,p=t.ViewZOrder},function(t){g=t.CheXuanData},function(t){M=t.SliderProgressBar},function(t){C=t.RechargeView},function(t){S=t.Macro}],execute:function(){var m,D,y,x,E,I,R,w,v,T,A,U,V,z,N,B,P,H,O;n._RF.push({},"822efQQ6OBKgr69PEvWe7jr","DaiRuSettingView",void 0);const{ccclass:L,property:X}=l;t("DaiRuSettingView",(m=L("DaiRuSettingView"),D=u("tanchudi",r),y=u("tanchudi/btnCharge",r),x=u("tanchudi/btnRefresh",r),E=u("tanchudi/btnCancel",r),I=u("tanchudi/btnConfirm",r),R=u("tanchudi/Slider",s),w=u("tanchudi/txtScore",a),v=u("tanchudi/txtDairuVal",o),m((U=i((A=class extends h{constructor(...t){super(...t),e(this,"tanchudi",U,this),e(this,"btnCharge",V,this),e(this,"btnRefresh",z,this),e(this,"btnCancel",N,this),e(this,"btnConfirm",B,this),e(this,"slider",P,this),e(this,"txtScore",H,this),e(this,"txtDairuVal",O,this),this._userBalance=0,this._dairuMin=0,this._dairuMax=0,this._sliderMin=0,this._sliderMax=0,this._seatId=0,this._bobo=0,this._arrest=0,this._transferIn=0,this._repMango=0,this._minScore=0,this._raiseCount=0,this.force=!1}onLoad(){super.onLoad()}addEvents(){this.slider.node.on("slide",this.onSliderSlide,this),this.onN(this.btnCharge,r.EventType.TOUCH_END,this.onCharge),this.onN(this.btnRefresh,r.EventType.TOUCH_END,this.onRefresh),this.onN(this.btnCancel,r.EventType.TOUCH_END,this.onCancel),this.onN(this.btnConfirm,r.EventType.TOUCH_END,this.onConfirm)}onReset(t){t&&(this._transferIn=t.transferIn||0,this._arrest=t.arrest||0,this._repMango=t.repMango||0,this._minScore=t.minScore||0,this._raiseCount=t.raiseCount||0,console.log("====>>>>带入data: ",t)),this.setTotal()}init(t,i,e){this.force=e,this._seatId=t,this.onReset(i)}onCharge(){App.globalAudio.playGlobalEffect(_.audioPath.button),App.uiManager.open({type:C,bundle:S.BUNDLE_CheXuan,zIndex:p.UI,name:"充值"})}onRefresh(){App.globalAudio.playGlobalEffect(_.audioPath.button),this.getUserMoney()}async getUserMoney(){try{await App.apis.user.getUserInfo(),this.setTotal()}catch{}}onCancel(){App.globalAudio.playGlobalEffect(_.audioPath.button),this.node.active=!1}onConfirm(){App.globalAudio.playGlobalEffect(_.audioPath.button),g.isISitdown?c.requestSetAutoDairu(this._bobo):c.requestSitdown({seatId:this._seatId,bobo:this._bobo}),this.node.active=!1}onSliderSlide(){this.updateDairuScore()}getMinTransferInMoney(){let t=b.getCurEnterRoomData().tableInfo.minIn;if(this.force){if(this._minScore<=0)return t;{let i=this._minScore-this._arrest;return i<=0?0:Math.ceil(i/t)*t}}return t}setTotal(){var t=d.getUserData();this._userBalance=t.balance,this._dairuMin=b.getCurEnterRoomData().tableInfo.minIn,this._dairuMax=this._userBalance,this.slider.progress=0,this.slider.getComponent(M).onSliderChange(),this._sliderMin=this.getMinTransferInMoney(),this._sliderMax=this._dairuMax,this._sliderMin>=this._sliderMax&&(this._sliderMax=this._sliderMin),this.updateDairuScore();let i=f.getScoreImplicit(this._transferIn),e=f.getScoreImplicit(this._userBalance);this.txtDairuVal.string=`<color=#AEA0C7>已带入/总金币: </color>${i}/${e}`}updateDairuScore(){let t=this.slider.progress;var i=0;if(this._sliderMax/this._dairuMin>=21){var e=21*this._dairuMin,n=.9;if(t<=n){var r=t/n;i=Math.floor((e-this._sliderMin)*r)+this._sliderMin}else{r=(t-n)/(1-n);i=Math.floor((this._sliderMax-e)*r)+e}}else i=Math.floor((this._sliderMax-this._sliderMin)*t)+this._sliderMin;i>this._sliderMax&&(i=this._sliderMax),console.log("====>>>>this._raiseCount: ",this._raiseCount,i,this._repMango,this._dairuMin),this._bobo=Math.floor(i/this._dairuMin)*this._dairuMin,console.log("====>>>>this._bobo: ",this._bobo),this.txtScore.string=f.getScoreImplicit(this._bobo)}}).prototype,"tanchudi",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(A.prototype,"btnCharge",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(A.prototype,"btnRefresh",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(A.prototype,"btnCancel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(A.prototype,"btnConfirm",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(A.prototype,"slider",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(A.prototype,"txtScore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(A.prototype,"txtDairuVal",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=A))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameChatView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./Config.ts","./CheXuanModel.ts","./CheXuanData.ts","./UserData.ts","./Utils.ts","./RechargeView.ts","./Macros.ts","./ConfigInfo.ts"],(function(t){"use strict";var e,n,i,o,a,r,l,s,c,h,u,p,d,g,f,b,m,C,y,w,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,a=t.Label,r=t._decorator,l=t.instantiate,s=t.sp},function(t){c=t.default},function(t){h=t.inject},function(t){u=t.Config,p=t.ViewZOrder},function(t){d=t.CheXuanModel,g=t.ChatType},function(t){f=t.CheXuanData},function(t){b=t.UserDataEn},function(t){m=t.default},function(t){C=t.RechargeView},function(t){y=t.Macro},function(t){w=t.ConfigInfoEn,D=t.EmConfigData}],execute:function(){var N,v,A,G,I,U,E,S,M,T,V,z,_,j,B,L,O,x,H,F,P,X,R;i._RF.push({},"d4ca3ydiBNIiY50A1by8OKF","GameChatView",void 0);const{ccclass:k,property:J}=r;t("GameChatView",(N=k(),v=h("chatNode",o),A=h("chatNode/btnCopy",o),G=h("chatNode/btnCopy/labID",a),I=h("chatNode/btnAddGold",o),U=h("chatNode/btnAddGold/labGold",a),E=h("chatNode/btnUserData",o),S=h("chatNode/scrollViewEmojy/view/content",o),M=h("chatNode/scrollViewMsg/view/content",o),T=h("chatNode/animBg/ScrollViewAnim/view/content",o),V=h("chatNode/animBg/ScrollViewAnim/view/content/gift",o),N((j=e((_=class extends c{constructor(...t){super(...t),n(this,"chatNode",j,this),n(this,"btnCopy",B,this),n(this,"labID",L,this),n(this,"btnAddGold",O,this),n(this,"labGold",x,this),n(this,"btnUserData",H,this),n(this,"emojyContent",F,this),n(this,"msgContent",P,this),n(this,"animContent",X,this),n(this,"gift",R,this)}static getPrefabUrl(){return"prefabs/GameChatView"}onLoad(){super.onLoad(),this.onN(this.node,o.EventType.TOUCH_END,this.onClose),this.onN(this.btnCopy,o.EventType.TOUCH_END,(()=>{var t=b.getUserData();App.nativeBridge.setClipboard(t.id+"")}));for(let t=0;t<this.emojyContent.children.length;t++)this.emojyContent.children[t].userData=t+1,this.onN(this.emojyContent.children[t],o.EventType.TOUCH_END,this.onSendEmojy);for(let t=0;t<this.msgContent.children.length;t++)this.msgContent.children[t].userData=t+1,this.onN(this.msgContent.children[t],o.EventType.TOUCH_END,this.onSendMsg);this.initGift();var t=b.getUserData();this.labGold.string=m.getScoreImplicit(t.balance),this.showUserScore(),App.apis.user.getUserInfo().then((()=>{this.showUserScore()})).catch((()=>{})),this.labID.string="ID:"+b.getUserData().id}showUserScore(){var t=b.getUserData();this.labGold.string=m.getScoreImplicit(t.balance)}onSendEmojy(t,e){Log.d("====>>>>发送表情：",t.target);var n=f.getMyself();if(n){var i=n.playerId;d.sendChatMessage({type:g.EMOJI,index:t.target.userData,from:i,username:n.playerName,to:i}),this.onClose()}else App.tips.show("您已站起，不能发送消息")}onSendMsg(t,e){Log.d("====>>>>发送短语：",t.target);var n=f.getMyself();if(n){var i=n.playerId;d.sendChatMessage({type:g.CHAT,index:t.target.userData,from:i,username:n.playerName,to:i}),this.onClose()}else App.tips.show("您已站起，不能发送消息")}onSendAnim(t,e){Log.d("====>>>>发送动画：",t.target);var n=f.getMyself();if(n){var i=n.playerId;d.sendChatMessage({type:g.GIFT,index:t.target.userData,from:i,username:n.playerName,to:-1}),this.onClose()}else App.tips.show("您已站起，不能发送礼物")}onClose(){App.globalAudio.playGlobalEffect(u.audioPath.button),this.close()}onAddGold(){App.globalAudio.playGlobalEffect(u.audioPath.button),App.uiManager.open({type:C,bundle:y.BUNDLE_CheXuan,zIndex:p.UI,name:"充值"})}get showAction(){return t=>{App.utils.bottomToView(this.chatNode,t)}}get closeAction(){return t=>{App.utils.viewToBottom(this.chatNode,t)}}initGift(){this.gift.active=!1;let t=w.getConfig(D.CONFIG_GIFT);console.log("====>>>>initGift: ",t),t=t.sort(((t,e)=>e.sort-t.sort));for(let e=0;e<t.length;e++){let n=l(this.gift);n.active=!0,n.parent=this.animContent,n.userData=t[e].id;let i=n.getChildByName("spine").getComponent(s.Skeleton);n.getChildByPath("pricebg/Label").getComponent(a).string=m.getScoreImplicit(t[e].price),this.loadGiftIcon(i,t[e].id),this.onN(n,o.EventType.TOUCH_END,this.onSendAnim)}}loadGiftIcon(t,e){t.loadSkeleton({url:"images/expression/gift"+(16+e),view:this,complete:e=>{e&&(t.animation="animation",t.loop=!0,t.premultipliedAlpha=!1)}})}}).prototype,"chatNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(_.prototype,"btnCopy",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(_.prototype,"labID",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(_.prototype,"btnAddGold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(_.prototype,"labGold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(_.prototype,"btnUserData",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(_.prototype,"emojyContent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(_.prototype,"msgContent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(_.prototype,"animContent",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(_.prototype,"gift",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=_))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameMatchView.ts",["cc","./UIView.ts","./CommonData.ts","./UserData.ts","./CommonEvent.ts"],(function(e){"use strict";var t,a,s,n,o;return{setters:[function(e){t=e.cclegacy},function(e){a=e.default},function(e){s=e.EmRoomEvent},function(e){n=e.UserDataEn},function(e){o=e.CommonEvent}],execute:function(){t._RF.push({},"c055dB3n/NDwKJjI/tzxfuP","GameMatchView",void 0);e("default",class extends a{static getPrefabUrl(){return"prefabs/GameMatchView"}onLoad(){}onEnable(){this.onCustom(o.MatchEnd,(e=>{e.raceId==App.stageData.getTempRace()&&this.close()})),App.event.on(s.MatchCode,(e=>{if(Log.d("====>>>>RaceSit: ",e),e.userId==n.getUserData().id){App.stageData.setTempSeat(e.seatId),App.stageData.setTempRace(e.raceId);let t={isTalbeNo:!1,tableId:e.tableId,password:"",locate:JSON.stringify(App.stageData.GPSLocation)};App.pomelo.request("hall.hallHandler.enterRequest",t,(t=>{App.pomelo.request("hall.hallHandler.sitDownRequest",{seatId:e.seatId,bobo:null},(e=>{}))})),this.close()}}),this.node)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameRecord.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./Utils.ts","./CheXuanData.ts","./GameRecordItem.ts","./UserData.ts"],(function(t){"use strict";var e,i,a,r,n,o,s,h,l,c,u,g,p,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,r=t.Node,n=t.Label,o=t.ScrollView,s=t.Slider,h=t._decorator,l=t.instantiate},function(t){c=t.default},function(t){u=t.inject},function(t){g=t.default},function(t){p=t.CheXuanData},function(t){b=t.GameRecordItem},function(t){d=t.UserDataEn}],execute:function(){var f,P,m,v,C,B,w,y,A,N,T,x,D,E,k,F,I,V,z,L,O,R,U,_,H,S,G,M,j,X,K;a._RF.push({},"352a4EKEiBII4Cjnd54syVB","GameRecord",void 0);const{ccclass:q,property:J}=h;t("default",(f=q("GameRecord"),P=u("tanchudi/safeArea/Top/txtPool",r),m=u("tanchudi/safeArea/Top/txtPoolValue",n),v=u("tanchudi/safeArea/List",o),C=u("tanchudi/safeArea/List/view/content",r),B=u("tanchudi/safeArea/Item",r),w=u("tanchudi/safeArea/Bottom/btnForceOpen",r),y=u("tanchudi/safeArea/Bottom/btnBackVideo",r),A=u("tanchudi/safeArea/Bottom/ProgressBar",s),N=u("tanchudi/safeArea/Bottom/ProgressBar/btnDrag",r),T=u("tanchudi/safeArea/Bottom/Page/btnLast",r),x=u("tanchudi/safeArea/Bottom/Page/btnNext",r),D=u("tanchudi/safeArea/Bottom/Page/btnPre",r),E=u("tanchudi/safeArea/Bottom/Page/btnFirst",r),k=u("tanchudi/safeArea/Bottom/Page/txtPageNum",n),f((V=e((I=class extends c{constructor(...t){super(...t),this.userApi=App.apis.user,i(this,"txtPool",V,this),i(this,"txtPoolValue",z,this),i(this,"scrollView",L,this),i(this,"itemParent",O,this),i(this,"itemPrefab",R,this),i(this,"btnForceOpen",U,this),i(this,"btnBackVideo",_,this),i(this,"ProgressBar",H,this),i(this,"btnDrag",S,this),i(this,"btnLast",G,this),i(this,"btnNext",M,this),i(this,"btnPre",j,this),i(this,"btnFirst",X,this),i(this,"txtPageNum",K,this),this.totalPage=0,this.crtPage=0,this.gameId=0,this.forceShow=0}onLoad(){super.onLoad(),this.btnBackVideo.active=!1,this.ProgressBar.node.active=!1,this.itemPrefab.active=!1}addEvents(){this.onN(this.node,r.EventType.TOUCH_END,this.close),this.onN(this.btnForceOpen,r.EventType.TOUCH_END,this.onClickForceOpen),this.onN(this.btnBackVideo,r.EventType.TOUCH_END,this.onBtnBackVideo),this.onN(this.btnLast,r.EventType.TOUCH_END,this.onClickBtnLast),this.onN(this.btnNext,r.EventType.TOUCH_END,this.onClickBtnNext),this.onN(this.btnPre,r.EventType.TOUCH_END,this.onClickBtnPre),this.onN(this.btnFirst,r.EventType.TOUCH_END,this.onClickBtnFirst)}onEnable(){p.getRoomConfig();this.txtPoolValue.node.active=!1,this.txtPool.active=!1,this.btnForceOpen.active=!1,this.itemParent.children.forEach((t=>t.active=!1)),this.changeToPage(-1)}onDataRefresh(t){this.scrollView.scrollToTop(0),this.crtPage=t.record.page,this.gameId=t.record.gameId,this.forceShow=t.record.forceShow||0,this.totalPage=t.record.totalCount,App.stageData.IsMatch||(this.txtPoolValue.string=g.getScoreImplicit(t.record.total_pool||t.record.totalPool||0)),this.itemParent.children.forEach((t=>t.active=!1)),t.record.list&&this.showPlayerList(t.record.list.records||[],this.forceShow),this.btnForceOpen.active=this.hasInvisibleCard(t.record.list.records||[]),this.totalPage=Math.max(this.totalPage,this.crtPage),this.txtPageNum.string=this.crtPage+"/"+this.totalPage,this.btnFirst.active=this.crtPage<this.totalPage,this.btnPre.active=this.crtPage<this.totalPage,this.btnNext.active=this.crtPage>1,this.btnLast.active=this.crtPage>1}showPlayerList(t,e){if(0!=t.length)for(var i=0;i<t.length;i++){var a=t[i],r=null;this.itemParent.children.length<=i?(r=l(this.itemPrefab)).parent=this.itemParent:r=this.itemParent.children[i],r.active=!0;var n=r.getComponent(b);n||(n=r.addComponent(b)),n.setData(a,p.getRoomConfig().diwang,1==e)}}hasInvisibleCard(t){if(0==t.length)return!1;for(var e=0;e<t.length;e++)for(var i=t[e],a=0;a<i.sendCards.length;a++)if(0==i.sendCards[a])return!0;return!1}onClickForceOpen(){this.purchase()}onClickBtnLast(){this.changeToPage(1)}onClickBtnNext(){this.crtPage-1<=0||this.changeToPage(this.crtPage-1)}onClickBtnPre(){this.crtPage+1>this.totalPage||this.changeToPage(this.crtPage+1)}onClickBtnFirst(){this.changeToPage(this.totalPage)}onProgressChanged(){var t=Math.floor(this.ProgressBar.progress*(this.totalPage-1))+1;t!=this.crtPage&&this.changeToPage(t)}changeToPage(t){var e=d.getUserData(),i=p.getRoomConfig();this.userApi.tableUserReplay(i.tableId+"",e.id+"",t).then((t=>{App.loading.hide(),0!=t.code?App.tips.show("获取数据失败"):this.onDataRefresh(t.data)})).catch((t=>{App.tips.show(t.message),App.loading.hide()}))}purchase(){var t=p.getRoomConfig();this.userApi.showCardInfo(t.tableId+"",this.gameId).then((()=>{App.loading.hide(),App.tips.show("秀牌成功"),this.changeToPage(this.crtPage)})).catch((t=>{App.tips.show(t.message),App.loading.hide()}))}close(){this.node.active=!1}}).prototype,"txtPool",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(I.prototype,"txtPoolValue",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(I.prototype,"scrollView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(I.prototype,"itemParent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(I.prototype,"itemPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(I.prototype,"btnForceOpen",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(I.prototype,"btnBackVideo",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(I.prototype,"ProgressBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(I.prototype,"btnDrag",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(I.prototype,"btnLast",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(I.prototype,"btnNext",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(I.prototype,"btnPre",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(I.prototype,"btnFirst",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(I.prototype,"txtPageNum",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=I))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameSwitchRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./Config.ts","./CommonData.ts","./List.ts","./Macros.ts","./CheXuanModel.ts","./switchRoomView.ts","./HallData.ts","./HallRoomItem.ts","./CheXuanEnum.ts","./HallModel.ts"],(function(t){"use strict";var e,o,i,s,a,n,r,l,c,h,u,p,m,d,f,b,g,w,R,D,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,s=t.Node,a=t.Toggle,n=t._decorator,r=t.macro},function(t){l=t.default},function(t){c=t.inject},function(t){h=t.Config,u=t.ViewZOrder},function(t){p=t.EmRoomEvent,m=t.CommonData},function(t){d=t.default},function(t){f=t.Macro},function(t){b=t.CheXuanModel},function(t){g=t.default},function(t){w=t.HallDataEn},function(t){R=t.default},function(t){D=t.CheXuanEvent},function(t){S=t.HallModel}],execute:function(){var y,E,C,A,L,T,v,I,B,G,M,V,P;i._RF.push({},"2c2a9UfSAdAx4/AKPOW6RJL","GameSwitchRoom",void 0);const{ccclass:F,property:N}=n;t("GameSwitchRoom",(y=F(),E=c("switchBg",s),C=c("switchBg/menuBg/menuItem/selectBg",s),A=c("switchBg/menuBg/menuItem/btnSearch",s),L=c("switchBg/menuBg/menuItem/enptySeat/freeSeat",a),T=c("switchBg/scrollViewRoom",d),y((B=e((I=class extends l{constructor(...t){super(...t),o(this,"switchBg",B,this),o(this,"selectBg",G,this),o(this,"btnSearch",M,this),o(this,"freeSeat",V,this),o(this,"scrollViewRoom",P,this),this.curSelectType=0,this.selectFree=!1,this.tableId=null,this.roomsData=[],this.renderRoomDatas=[],this.time=null}static getPrefabUrl(){return"prefabs/GameSwitchRoom"}onLoad(){super.onLoad(),this.onN(this.node,s.EventType.TOUCH_END,this.onClose),this.onN(this.btnSearch,s.EventType.TOUCH_END,(()=>{App.globalAudio.playGlobalEffect(h.audioPath.button),App.uiManager.open({type:g,bundle:f.BUNDLE_CheXuan,zIndex:u.UI,args:{target:this}})})),this.onN(this.freeSeat.node,a.EventType.TOGGLE,this.onSelectFree),this.selectBg.children.forEach(((t,e)=>this.onN(t,a.EventType.TOGGLE,(()=>this.onSelectTog(e))))),S.refreshTableList(1),App.event.on(p.List,(t=>{this.roomsData=m.roomsData,this.updateRoomList()}),this.node),App.event.on(p.Add,(t=>{this.roomsData=m.roomsData,this.updateRoomList()}),this.node),App.event.on(p.Remove,(t=>{this.roomsData=this.roomsData||[],this.roomsData=this.roomsData.filter((e=>e.tableId!=t.tableId)),this.updateRoomList()}),this.node),App.event.on(p.Update,(t=>{this.updateRoomList()}),this.node),App.utils.addListRule(this.node,this.scrollViewRoom,"GameSwitchRoom","onShowItemList","","renderEvent"),App.utils.addListRule(this.node,this.scrollViewRoom,"GameSwitchRoom","onSelectItemList","","selectedEvent"),this.tableId=w.getCurEnterRoomData().tableInfo.tableId,this.roomsData=m.roomsData,this.updateRoomList(),this.refreshTableListRepeat()}refreshTableListRepeat(){this.schedule((()=>{S.refreshTableList(1)}),5,r.REPEAT_FOREVER,5)}onSelectTog(t){if(App.globalAudio.playGlobalEffect(h.audioPath.button),this.selectBg.children[t].getComponent(a).isChecked){if(this.curSelectType==t)return;this.curSelectType=t,this.updateRoomList(!0)}}onSelectFree(){App.globalAudio.playGlobalEffect(h.audioPath.button),this.selectFree!=this.freeSeat.isChecked&&(this.selectFree=this.freeSeat.isChecked,this.updateRoomList(!0))}updateRoomList(t=!1){this.renderRoomDatas=[];const e=[100,500,2e3];this.roomsData=this.roomsData||[],this.roomsData.forEach((t=>{t.tableId!=this.tableId&&(this.selectFree&&t.seatMax<=t.sitDownCount||1==this.curSelectType&&t.pi>=e[1]||2==this.curSelectType&&(t.pi>=e[2]||t.pi<e[1])||3==this.curSelectType&&t.pi<e[2]||(4!=this.curSelectType||t.isMy)&&this.renderRoomDatas.push(t))})),this.renderRoomDatas.sort(((t,e)=>{if(t.isMy!=e.isMy)return t.isMy?-1:1;{let o=t.tableState<=1&&t.sitDownCount>=1,i=e.tableState<=1&&e.sitDownCount>=1;return o&&i?t.sitDownCount>e.sitDownCount?-1:t.sitDownCount<e.sitDownCount?1:t.pi<e.pi?-1:t.pi>e.pi?1:0:o?-1:i?1:t.pi<e.pi?-1:t.pi>e.pi?1:0}})),t&&this.scrollViewRoom.scrollTo(0,0),this.scrollViewRoom.numItems=this.renderRoomDatas.length}onShowItemList(t,e){var o=this.renderRoomDatas[e];if(o){t.active||(t.active=!0);var i=t.getComponent(R);null==i&&(i=t.addComponent(R)),i.setData(o)}else t.active=!1}onSelectItemList(t,e,o,i){if(t){App.globalAudio.playGlobalEffect(h.audioPath.button),Log.d("====>>>>点击了: ",e);var s=this.renderRoomDatas[e];b.switchTable({isTalbeNo:!1,tableId:s.tableId,password:s.password},(t=>{0!=t.code?App.alert.show("更换房间失败!"):(w.setCurEnterRoomData(t.data),App.event.emitCustom(D.ReEnterRoom),this.close())}))}}onClose(){App.globalAudio.playGlobalEffect(h.audioPath.button),clearInterval(this.time),this.close()}get showAction(){return t=>{App.utils.bottomToView(this.switchBg,t)}}get closeAction(){return t=>{App.utils.viewToBottom(this.switchBg,t)}}}).prototype,"switchBg",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(I.prototype,"selectBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(I.prototype,"btnSearch",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(I.prototype,"freeSeat",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(I.prototype,"scrollViewRoom",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=I))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameZhanJi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./PlayerZhanJiItem.ts","./CheXuanModel.ts","./Utils.ts","./CheXuanData.ts","./PlayerBasicInfoView.ts","./SaveDataUtils.ts"],(function(t){"use strict";var e,i,a,n,o,r,l,s,h,c,u,p,m,d,g,f,b,P,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Node,o=t.Label,r=t.Toggle,l=t._decorator,s=t.instantiate,h=t.UIOpacity,c=t.find},function(t){u=t.default},function(t){p=t.inject},function(t){m=t.default},function(t){d=t.CheXuanModel},function(t){g=t.default},function(t){f=t.CheXuanData},function(t){b=t.default},function(t){P=t.default,v=t.SaveDataType}],execute:function(){var T,C,w,y,I,D,z,V,E,x,S,A,J,_,R,L,Z,M,U,B,j,k,O;a._RF.push({},"30a40jSEVZPh6Ppp+nd3gx/","GameZhanJi",void 0);const{ccclass:X,property:G}=l;t("default",(T=X("GameZhanJi"),C=p("tanchudi/safeArea/stats/txtPool",n),w=p("tanchudi/safeArea/stats/txtPoolVal",o),y=p("tanchudi/safeArea/stats/txtDaiRuVal",o),I=p("tanchudi/safeArea/stats/txtScoreVal",o),D=p("tanchudi/safeArea/zhanjiList/view/content",n),z=p("tanchudi/safeArea/playerZhanJiItem",n),V=p("tanchudi/safeArea/pagnguanList/view/content",n),E=p("tanchudi/safeArea/playerIcon",n),x=p("tanchudi/safeArea/pangguanTitle/btnCuoPai",r),S=p("tanchudi/safeArea/pangguanTitle/txtTime",o),T((_=e((J=class extends u{constructor(...t){super(...t),i(this,"labPool",_,this),i(this,"labPoolVal",R,this),i(this,"labDaiRuVal",L,this),i(this,"labScoreVal",Z,this),i(this,"zhanJiParent",M,this),i(this,"prefabZhanJiItem",U,this),i(this,"pangguanParent",B,this),i(this,"prefabPlayerIcon",j,this),i(this,"btnCuoPai",k,this),i(this,"txtTime",O,this),this.pThis=null,this.remainTime=null,this.gameCountdownId=null}onLoad(){super.onLoad(),this.initUI(),this.prefabPlayerIcon.active=!1,this.prefabZhanJiItem.active=!1,App.stageData.IsMatch&&(this.labPool.active=!1,this.labPoolVal.node.active=!1,this.txtTime.node.active=!1)}addEvents(){this.onN(this.node,n.EventType.TOUCH_END,this.close)}init(t,e){this.pThis=t,console.log(0),this.remainTime=e||0}refreshRoomCountdown(){console.log(1),this.gameCountdownId=setInterval((()=>{this.remainTime--,this.remainTime=Math.max(this.remainTime,0),this.txtTime.string=g.convertToTime(this.remainTime),this.remainTime<=0&&clearInterval(this.gameCountdownId)}),1e3)}initUI(){console.log(2);var t=f.getRoomConfig();this.labPoolVal.string="0",this.labDaiRuVal.string="0",this.labScoreVal.string="0",this.labPoolVal.node.active=t.poolOpen,this.labPool&&(this.labPool.active=t.poolOpen),this.pangguanParent.children.forEach((t=>t.active=!1)),this.zhanJiParent.children.forEach((t=>t.active=!1))}onEnable(){console.log(3),d.requestRealTimeRecord((t=>this.onDataRefresh(t))),this.btnCuoPai.isChecked=f.cuoPaiEnabled,console.log(33)}onDataRefresh(t){if(console.log(4),t.game_time){const e=Math.floor(((new Date).getTime()-new Date(t.game_time).getTime())/1e3);this.remainTime=this.remainTime-e,App.stageData.IsMatch?this.txtTime.string="":(this.txtTime.string=g.convertToTime(this.remainTime),this.pThis.gameCountdowning&&(clearInterval(this.gameCountdownId),this.refreshRoomCountdown()))}else{Math.floor(((new Date).getTime()-new Date(t.game_time).getTime())/1e3);this.remainTime=this.remainTime}this.labPoolVal.string=g.getScoreImplicit(t.total_pool),this.labDaiRuVal.string=g.getScoreImplicit(t.total_bobo),this.labScoreVal.string=g.getScoreImplicit(t.total_score),this.showSeatedList(t.seats),this.showSpectators(t.spectators)}showSeatedList(t){if(console.log(5),this.zhanJiParent.children.forEach((t=>t.active=!1)),t&&0!=t.length){(t=t.filter((t=>t.id&&t.id>0))).sort(((t,e)=>t.isEnd!==e.isEnd?t.isEnd-e.isEnd:e.score-t.score));for(var e=0;e<t.length;e++){let a;this.zhanJiParent.children.length>e?a=this.zhanJiParent.children[e]:(a=s(this.prefabZhanJiItem),a.addComponent(m),this.zhanJiParent.addChild(a)),a.active=!0;var i=t[e];let n=a.getComponent(m);i.isEnd&&(i.time=0),n.setData(i.name,i.bobo,i.time,i.score,i.win_pool,i.sui,i.total_times);let o=a.getComponent(h);if(o){!f.getPlayerById(i.id)||i.isEnd?o.opacity=150:o.opacity=255}}}}showSpectators(t){if(console.log(6),this.pangguanParent.children.forEach((t=>t.active=!1)),t&&0!=t.length)for(var e=0;e<t.length;e++){let a;this.pangguanParent.children.length>e?a=this.pangguanParent.children[e]:(a=s(this.prefabPlayerIcon),a.addComponent(b),this.pangguanParent.addChild(a)),a.active=!0;var i=t[e];a.getComponent(b).setBasicInfo(i.name,i.avatar)}}onCuoPaiChanged(){console.log(7);var t=this.btnCuoPai.getComponent(r).isChecked;f.cuoPaiEnabled=t,c("Background",this.btnCuoPai.node).active=!t,P.set("cuo_pai_enabled",t?1:0,v.ALL);App.pomelo.request("cx.cxHandler.openStamp",{open:+t},(t=>{0==t.code?App.tips.show("设置成功!"):App.tips.show("设置失败!")}))}close(){this.node.active=!1}onDestroy(){clearInterval(this.gameCountdownId)}}).prototype,"labPool",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(J.prototype,"labPoolVal",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(J.prototype,"labDaiRuVal",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(J.prototype,"labScoreVal",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(J.prototype,"zhanJiParent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(J.prototype,"prefabZhanJiItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(J.prototype,"pangguanParent",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(J.prototype,"prefabPlayerIcon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(J.prototype,"btnCuoPai",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(J.prototype,"txtTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=J))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/GunlunView.ts",["cc","./Utils.ts"],(function(t){"use strict";var e,s,n,i,u,r,o;return{setters:[function(t){e=t.cclegacy,s=t.Component,n=t.Label,i=t.tween,u=t.Vec3,r=t._decorator},function(t){o=t.default}],execute:function(){var h;e._RF.push({},"42b974qzyVGgKS2hRNsW7rd","GunlunView",void 0);const{ccclass:c,property:a}=r;t("GunlunView",c("GunlunView")(h=class extends s{constructor(...t){super(...t),this.numLables=[],this.numCount=0,this.crtNum=0,this.inited=!1,this.preNum=null}init(){this.inited||(this.inited=!0,this.numLables=[],this.node.getChildByName("Mask").children.forEach((t=>{this.numLables.push(t.getComponent(n))})),this.numCount=this.numLables.length)}setNum(t){if(t&&this.preNum!=t){this.preNum=t,this.init(),t=t||0,this.crtNum=Number(o.getScore(t,0));var e=o.padLeft(this.crtNum,this.numCount);this.numLables.forEach(((t,s)=>{let n=parseInt(e[s]),r=t.node.getPosition(),o=5+r.y/60;10==o&&(o=0),i(t.node).to(2,{position:new u(r.x,60*n-300,r.z)}).start()}))}}updateNum(t){this.setNum(t)}})||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/MenuView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./CheXuanModel.ts","./CheXuanEnum.ts","./Macros.ts","./Config.ts","./CheXuanData.ts","./TableSettingView.ts","./ConfigInfo.ts","./UserData.ts"],(function(t){"use strict";var e,n,i,o,a,s,u,l,r,c,h,b,p,d,C,f,g,S,v,y,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,a=t._decorator,s=t.Color,u=t.find,l=t.Label,r=t.Button},function(t){c=t.default},function(t){h=t.inject},function(t){b=t.CheXuanModel},function(t){p=t.CheXuanEvent},function(t){d=t.Macro},function(t){C=t.ViewZOrder,f=t.Config},function(t){g=t.CheXuanData},function(t){S=t.default},function(t){v=t.ConfigInfoEn,y=t.EmConfigData},function(t){T=t.UserDataEn}],execute:function(){var E,m,I,w,D,N,A,L,k,Z,q,U,_,F,O,M,H,B,z;i._RF.push({},"68b02Zb4c5Eq46oUqdepjlJ","MenuView",void 0);const{ccclass:J,property:Q}=a;t("default",(E=J("MenuView"),m=h("tanchudi/btnZhanqi",o),I=h("tanchudi/btnTiShi",o),w=h("tanchudi/btnSoundSetting",o),D=h("tanchudi/btnTableSetting",o),N=h("tanchudi/btnJiFen",o),A=h("tanchudi/btnLiuZuo",o),L=h("tanchudi/btnQuit",o),k=h("tanchudi/btnService",o),E((U=e((q=class extends c{constructor(...t){super(...t),n(this,"btnZhanqi",U,this),n(this,"btnTiShi",_,this),n(this,"btnSoundSetting",F,this),n(this,"btnTableSetting",O,this),n(this,"btnJiFen",M,this),n(this,"btnLiuZuo",H,this),n(this,"btnQuit",B,this),n(this,"btnService",z,this),this.whiteColor=new s(255,255,255,255),this.grayColor=new s(124,124,124,124)}onLoad(){this.btnJiFen.active=!0,App.stageData.IsMatch&&(this.btnZhanqi.active=!1,this.btnLiuZuo.active=!1,u("Label",this.btnQuit).getComponent(l).string="退出比赛"),this.onN(this.node,o.EventType.TOUCH_END,this.close),this.onN(this.btnZhanqi,o.EventType.TOUCH_END,this.onClickZhanqi),this.onN(this.btnTiShi,o.EventType.TOUCH_END,this.onClickTiShi),this.onN(this.btnSoundSetting,o.EventType.TOUCH_END,this.onClickSoundSet),this.onN(this.btnTableSetting,o.EventType.TOUCH_END,this.onClickTableSet),this.onN(this.btnJiFen,o.EventType.TOUCH_END,this.onClickJiFen),this.onN(this.btnLiuZuo,o.EventType.TOUCH_END,this.onClickLiuZuo),this.onN(this.btnQuit,o.EventType.TOUCH_END,this.onClickQuit),this.onN(this.btnService,o.EventType.TOUCH_END,this.onClickService)}onEnable(){var t=g.isISitdown;this.btnJiFen.getComponent(r).interactable=t,this.setBtnInteractable(this.btnZhanqi,g.isIHasSeat),this.setBtnInteractable(this.btnJiFen,t),this.setBtnInteractable(this.btnLiuZuo,t),g.IsFirstLoad&&(this.setBtnInteractable(this.btnQuit,!1),this.scheduleOnce((()=>{g.IsFirstLoad=!1,this.setBtnInteractable(this.btnQuit,!0)}),3))}setBtnInteractable(t,e){t.getComponent(r).interactable=e,t.getChildByName("Label").getComponent(l).color=e?this.whiteColor:this.grayColor}onClickZhanqi(){g.isIHasSeat?(b.requestStandup(),this.close()):App.tips.show("您已站起")}onClickTiShi(){App.event.emitCustom(p.OpenPaiXingIntroduction),this.close()}onClickSoundSet(){App.event.emitCustom(p.OpenSetting),this.close()}onClickTableSet(){App.uiManager.open({type:S,bundle:d.BUNDLE_CheXuan,zIndex:C.Default,name:"桌面设置"}),this.close()}onClickJiFen(){g.isISitdown&&(App.event.emitCustom(p.ShowTakeMoney,g.mySeatId,g.mySeatId,!1),this.close())}onClickLiuZuo(){g.isISitdown&&(b.requestKeepSeat(),this.close())}onClickQuit(){g.IsFirstLoad||(g.isISitdown||App.stageData.IsMatch?App.stageData.IsMatch?App.alert.show({text:"您确定要退出比赛？",confirmCb:t=>{App.globalAudio.playGlobalEffect(f.audioPath.button),b.requestStandup((()=>{b.requestLeave(),this.close()}))},cancelCb:()=>{App.globalAudio.playGlobalEffect(f.audioPath.button),App.alert.close()}}):b.requestStandup((()=>{b.requestLeave(),this.close()})):(b.requestLeave(),this.close()))}onClickService(){App.globalAudio.playGlobalEffect(f.audioPath.button);const t=v.getConfig(y.CONFIG);if(t&&t.chat_url){var e=T.getUserData(),n=t.chat_url+`?uid=${e.id}&uname=${encodeURI(e.username)}`;App.nativeBridge.openUrl(n)}else App.tips.show("获取聊天链接地址失败！")}close(){App.globalAudio.playGlobalEffect(f.audioPath.button),this.node.active=!1}}).prototype,"btnZhanqi",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(q.prototype,"btnTiShi",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(q.prototype,"btnSoundSetting",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(q.prototype,"btnTableSetting",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(q.prototype,"btnJiFen",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(q.prototype,"btnLiuZuo",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(q.prototype,"btnQuit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(q.prototype,"btnService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=q))||Z));i._RF.pop()}}}));

System.register("chunks:///_virtual/PaiXingIntroductionView.ts",["cc","./EventComponent.ts","./Config.ts"],(function(t){"use strict";var o,n,e,i,c;return{setters:[function(t){o=t.cclegacy,n=t.Node,e=t._decorator},function(t){i=t.default},function(t){c=t.Config}],execute:function(){var s;o._RF.push({},"1c0caviUsBOvoK7ZQcLNico","PaiXingIntroductionView",void 0);const{ccclass:a,property:u}=e;t("default",a("PaiXingIntroductionView")(s=class extends i{onLoad(){this.onN(this.node,n.EventType.TOUCH_END,this.onClose)}onClose(){App.globalAudio.playGlobalEffect(c.audioPath.close),this.node.active=!1}})||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerDetailView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./CheXuanEnum.ts","./CheXuanData.ts","./CheXuanModel.ts","./PlayerBasicInfoView.ts","./Utils.ts","./ConfigInfo.ts","./Macros.ts","./Config.ts","./remarkView.ts","./CommonData.ts"],(function(t){"use strict";var e,i,a,n,r,s,l,o,h,u,p,c,y,b,m,f,d,g,D,V,v,C,I,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Node,r=t.Label,s=t.Sprite,l=t._decorator,o=t.instantiate,h=t.Button},function(t){u=t.default},function(t){p=t.inject},function(t){c=t.CheXuanEvent},function(t){y=t.CheXuanData},function(t){b=t.CheXuanModel,m=t.ChatType},function(t){f=t.default},function(t){d=t.default},function(t){g=t.ConfigInfoEn,D=t.EmConfigData},function(t){V=t.Macro},function(t){v=t.Config,C=t.ViewZOrder},function(t){I=t.default},function(t){N=t.EmRoomEvent}],execute:function(){var x,w,M,T,E,P,_,k,z,A,U,Z,G,J,R,B,L,O,F,H,W,S,X,j,q,K,Y,Q,$,tt,et,it,at,nt,rt,st,lt,ot,ht,ut,pt;a._RF.push({},"a240cLEfCVAIqCoPjRJ2UKY","PlayerDetailView",void 0);const{ccclass:ct,property:yt}=l;t("PlayerDetailView",(x=ct("PlayerDetailView"),w=p("tanchudi/playerIcon",n),M=p("tanchudi/btnClose",n),T=p("tanchudi/btnReName",n),E=p("tanchudi/playerIcon/txtPlayerID",r),P=p("tanchudi/btnZhanJi",n),_=p("tanchudi/btnZhanJi/txtCost",r),k=p("tanchudi/btnGive",n),z=p("tanchudi/btnVoice",n),A=p("tanchudi/btnVoiceMute",n),U=p("tanchudi/btnVoicePlay",n),Z=p("tanchudi/btnGive/icon_gift",s),G=p("tanchudi/stats/labTotal/txtValue",r),J=p("tanchudi/stats/labWin/txtValue",r),R=p("tanchudi/stats/labFanpai/txtValue",r),B=p("tanchudi/stats/labWinRate/txtValue",r),L=p("tanchudi/stats/labLose/txtValue",r),O=p("tanchudi/stats/labTie/txtValue",r),F=p("tanchudi/anim/view/content",n),H=p("tanchudi/anim/view/content/gift",n),x((X=e((S=class extends u{constructor(...t){super(...t),i(this,"playerIcon",X,this),i(this,"btnClose",j,this),i(this,"btnReName",q,this),i(this,"txtPlayerID",K,this),i(this,"btnZhanJi",Y,this),i(this,"txtZhanjiCost",Q,this),i(this,"btnGive",$,this),i(this,"btnVoice",tt,this),i(this,"btnVoiceMute",et,this),i(this,"btnVoicePlay",it,this),i(this,"iconGift",at,this),i(this,"txtTotal",nt,this),i(this,"txtWin",rt,this),i(this,"txtFanpai",st,this),i(this,"txtWinRat",lt,this),i(this,"txtLose",ot,this),i(this,"txtTie",ht,this),i(this,"animContent",ut,this),i(this,"gift",pt,this),this.playerBasicView=null,this.playerData=void 0,this.isZhanJiVisible=!1,this.userApi=App.apis.user,this.initMuteVoice=!1}onLoad(){super.onLoad(),this.initUI(),App.event.on(N.RemarkName,(t=>{if(!this.playerData||this.playerData&&this.playerData.playerId!=t.id)return;this.playerData.remarkName={uid:t.id,remarkName:t.remarkName};let e=null;e=this.playerData&&this.playerData.remarkName&&this.playerData.remarkName.uid&&this.playerData.remarkName.remarkName?this.playerData.remarkName.remarkName:this.playerData.playerName,this.playerBasicView.setBasicInfo(e,this.playerData.avatar,10)}),this.node)}initUI(){this.playerBasicView=this.playerIcon.addComponent(f),this.btnVoiceMute.active=!1,this.btnVoicePlay.active=!0}addEvents(){this.onN(this.node,n.EventType.TOUCH_END,this.onClose),this.onN(this.btnClose,n.EventType.TOUCH_END,this.onClose),this.onN(this.btnZhanJi,n.EventType.TOUCH_END,this.onZhanJi),this.onN(this.btnGive,n.EventType.TOUCH_END,this.onGive),this.onN(this.btnVoice,n.EventType.TOUCH_END,this.onPlayVoce),this.onN(this.btnReName,n.EventType.TOUCH_END,this.onRemarkName),this.onN(this.btnVoiceMute,n.EventType.TOUCH_END,this.onVoiceMute),this.onN(this.btnVoicePlay,n.EventType.TOUCH_END,this.onVoicePlay),this.initGift()}initGift(){this.gift.active=!1;let t=g.getConfig(D.CONFIG_GIFT);t=t.sort(((t,e)=>e.sort-t.sort));for(let e=0;e<t.length;e++){let i=o(this.gift);i.active=!0,i.parent=this.animContent,i.userData=t[e].id;let a=i.getChildByName("icon").getComponent(s);i.getChildByPath("pricebg/Label").getComponent(r).string=d.getScoreImplicit(t[e].price),this.loadGiftIcon(a,t[e].id),this.onN(i,n.EventType.TOUCH_END,this.onSendAnim)}}loadGiftIcon(t,e){App.asset.loadSF(V.BUNDLE_CheXuan,"images/chat/gift/gift_"+e,(e=>{null!=e&&(t.spriteFrame=e)}))}init(t){this.playerData=t,this.isZhanJiVisible=!1;let e=null;e=this.playerData.remarkName&&this.playerData.remarkName.uid&&this.playerData.remarkName.remarkName?this.playerData.remarkName.remarkName:this.playerData.playerName,this.playerBasicView.setBasicInfo(e,this.playerData.avatar,10),this.txtPlayerID.string=this.playerData.playerId+"",this.txtTotal.string="--",this.txtWin.string="--",this.txtFanpai.string="--",this.txtWinRat.string="--",this.txtLose.string="--",this.txtTie.string="--",this.btnZhanJi.getComponent(h).interactable=!1;var i=this.playerData.seatId!=y.mySeatId;this.btnGive.getComponent(h).interactable=i,this.iconGift.grayscale=!i,this.requestUserInfo(1),this.initMuteVoice=this.playerData.isMuteVoice,this.btnVoiceMute.active=this.playerData.isMuteVoice,this.btnVoicePlay.active=!this.playerData.isMuteVoice}requestUserInfo(t){let e=App.stageData.IsMatch?"hall.hallHandler.getStandingRecord":"cx.cxHandler.getStandingRecord";App.pomelo.request(e,{userId:this.playerData.playerId,type:t},(t=>{if(Log.d("userInfo",t),0==t.code){if(this.playerBasicView.setBasicInfo(t.data.remark||this.playerData.playerName,this.playerData.avatar,10),this.isZhanJiVisible=t.data.visible,this.isZhanJiVisible){var e=t.data.summary;this.txtTotal.string=e.total_hands+"",this.txtWin.string=e.win_times+"",this.txtFanpai.string=e.turn_over_times+"",e.total_hands>0?this.txtWinRat.string=Math.floor(100*e.win_times/e.total_hands)+"%":this.txtWinRat.string="0%",this.txtLose.string=e.lose_times+"",this.txtTie.string=e.tie_times+""}this.btnZhanJi.getComponent(h).interactable=!this.isZhanJiVisible}else this.isZhanJiVisible=!1,this.btnZhanJi.getComponent(h).interactable=!0,94===t.code&&App.tips.show("余额不足"),104===t.code?App.tips.show("没有其他玩家"):App.tips.show("获取用户信息失败")}))}onClose(){this.node.active=!1,this.initMuteVoice!=this.playerData.isMuteVoice&&(this.playerData.isMuteVoice?(this.userApi.setOtherMute(this.playerData.playerId),y.addToMuteUser(this.playerData.playerId)):(this.userApi.unsetOtherMute(this.playerData.playerId),y.removeFromMuteUser(this.playerData.playerId)))}onZhanJi(){this.isZhanJiVisible||(this.isZhanJiVisible=!1,this.requestUserInfo(2))}onSendAnim(t,e){Log.d("====>>>>发送动画：",t.target);var i=y.getMyself();if(i){var a=this.playerData.playerId;if(y.getPlayerById(a)){var n=i.playerId;b.sendChatMessage({type:m.GIFT,index:t.target.userData,from:n,username:i.playerName,to:this.playerData.playerId}),this.onClose()}else App.tips.show("玩家已站起，不能发送礼物")}else App.tips.show("您已站起，不能发送礼物")}onGive(){this.playerData.seatId!=y.mySeatId&&(this.node.active=!1,App.event.emitCustom(c.GivePlayerMoney,this.playerData))}onPlayVoce(){App.event.emitCustom(c.PlayOtherVoice,this.playerData.playerId)}onVoiceMute(){this.playerData.isMuteVoice=!1,this.btnVoiceMute.active=!1,this.btnVoicePlay.active=!0}onVoicePlay(){this.playerData.isMuteVoice=!0,this.btnVoiceMute.active=!0,this.btnVoicePlay.active=!1}onRemarkName(){App.globalAudio.playGlobalEffect(v.audioPath.button),App.uiManager.open({type:I,bundle:V.BUNDLE_CheXuan,zIndex:C.UI,args:{id:this.playerData.playerId},name:"备注昵称界面"})}}).prototype,"playerIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(S.prototype,"btnClose",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(S.prototype,"btnReName",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(S.prototype,"txtPlayerID",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(S.prototype,"btnZhanJi",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(S.prototype,"txtZhanjiCost",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(S.prototype,"btnGive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(S.prototype,"btnVoice",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(S.prototype,"btnVoiceMute",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(S.prototype,"btnVoicePlay",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(S.prototype,"iconGift",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(S.prototype,"txtTotal",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(S.prototype,"txtWin",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(S.prototype,"txtFanpai",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(S.prototype,"txtWinRat",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(S.prototype,"txtLose",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(S.prototype,"txtTie",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(S.prototype,"animContent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(S.prototype,"gift",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=S))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerGiveView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./Utils.ts","./UserData.ts","./CommonEvent.ts","./PlayerBasicInfoView.ts"],(function(t){"use strict";var e,i,n,a,r,s,o,l,p,u,c,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,r=t.Label,s=t.EditBox,o=t._decorator},function(t){l=t.default},function(t){p=t.inject},function(t){u=t.default},function(t){c=t.UserDataEn},function(t){h=t.UserInfoEvent},function(t){y=t.default}],execute:function(){var d,f,b,m,D,w,v,C,I,g,P,N,T,E,U,A,_;n._RF.push({},"3e10ciDhX5NdqG6sZdxCs+a","PlayerGiveView",void 0);const{ccclass:x,property:z}=o;t("PlayerGiveView",(d=x("PlayerGiveView"),f=p("tanchudi/playerIcon",a),b=p("tanchudi/playerIcon/txtPlayerID",r),m=p("tanchudi/inputMoney",s),D=p("tanchudi/inputPassword",s),w=p("tanchudi/labTips",a),v=p("tanchudi/btnCancel",a),C=p("tanchudi/btnConfirm",a),d((P=e((g=class extends l{constructor(...t){super(...t),i(this,"playerIcon",P,this),i(this,"txtPlayerID",N,this),i(this,"inputMoney",T,this),i(this,"inputPassword",E,this),i(this,"labTips",U,this),i(this,"btnCancel",A,this),i(this,"btnConfirm",_,this),this.playerBasicView=null,this.playerData=null}onLoad(){super.onLoad(),this.initUI()}initUI(){this.playerBasicView=this.playerIcon.addComponent(y),c.getUserData().transPassword?this.labTips.active=!1:this.labTips.active=!0}addEvents(){this.onN(this.node,a.EventType.TOUCH_END,this.onClose),this.onN(this.btnCancel,a.EventType.TOUCH_END,this.onCancel),this.onN(this.btnConfirm,a.EventType.TOUCH_END,this.onConfirm)}init(t){this.playerData=t;let e=null;e=this.playerData.remarkName&&this.playerData.remarkName.uid&&this.playerData.remarkName.remarkName?this.playerData.remarkName.remarkName:this.playerData.playerName,this.playerBasicView.setBasicInfo(e,this.playerData.avatar),this.txtPlayerID.string=this.playerData.playerId+""}onClose(){this.node.destroy()}onCancel(){this.node.destroy()}onConfirm(){var t=this.inputMoney.string.trim();if(t&&""!=t){var e=this.inputPassword.string.trim();if(e&&""!=e){var i=u.convertToServerScore(Number(t));App.apis.user.donate(this.playerData.playerId+"",i+"",e).then((t=>{this.clearInputData(),this.onClose(),App.tips.show("赠送成功"),c.getUserData().balance-=i,App.event.emit(h.USER_DATA_UPDATA)})).catch((t=>{this.clearInputData(),App.tips.show(t.message)}))}else App.tips.show("请输入您的交易密码")}else App.tips.show("请输入赠送金额")}clearInputData(){this.inputMoney.string="",this.inputPassword.string=""}}).prototype,"playerIcon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(g.prototype,"txtPlayerID",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(g.prototype,"inputMoney",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(g.prototype,"inputPassword",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(g.prototype,"labTips",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(g.prototype,"btnCancel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(g.prototype,"btnConfirm",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=g))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Decorators.ts","./CheXuanModel.ts","./CheXuanEnum.ts","./CheXuanData.ts","./CheXuanOtherCardsView.ts","./Utils.ts","./Macros.ts","./CountdownView.ts","./UIView.ts","./PlayerBasicInfoView.ts","./GameDefine.ts"],(function(t){"use strict";var e,i,a,n,s,r,o,h,l,p,u,c,d,y,m,g,w,C,f,b,D,v,I,S,P,x,z,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Node,s=t.Sprite,r=t.Label,o=t._decorator,h=t.instantiate,l=t.tween,p=t.Vec3,u=t.v3,c=t.Quat,d=t.Prefab,y=t.view,m=t.UITransform},function(t){g=t.inject},function(t){w=t.CheXuanModel,C=t.ChatType,f=t.GameTableState},function(t){b=t.CheXuanEvent},function(t){D=t.CheXuanData},function(t){v=t.default},function(t){I=t.default},function(t){S=t.Macro},function(t){P=t.CountdownView},function(t){x=t.default},function(t){z=t.default},function(t){B=t.OperateType}],execute:function(){var O,T,M,N,A,V,_,E,k,U,F,H,L,R,G,X,W,K,Q,Z,$,j,q,J,Y,tt,et,it,at,nt,st,rt,ot,ht,lt,pt,ut,ct,dt,yt,mt,gt,wt,Ct,ft,bt,Dt,vt,It,St,Pt,xt,zt,Bt,Ot;a._RF.push({},"0b310wJzFNKL6icM2/p1+iw","PlayerView",void 0);const{ccclass:Tt,property:Mt}=o;t("default",(O=Tt("PlayerView"),T=g("player",n),M=g("player/playerIcon",n),N=g("player/playerIcon/border",n),A=g("player/playerIcon/sprHeadBg",s),V=g("player/renmingdi",n),_=g("player/fx_win",n),E=g("player/fx_qiao",n),k=g("player/cuopaizhong",n),U=g("btnReadVoice",n),F=g("fx_xiupai",n),H=g("player/zhuang",n),L=g("player/imgOperateBg",s),R=g("player/countdown",n),G=g("player/countdown_liuzuo",n),X=g("player/renmingdi/txtScore",r),W=g("player/tips_guanzhan",n),K=g("player/betStart",n),Q=g("bet",n),Z=g("player/txtSitdown",n),$=g("player/win",n),j=g("player/win/txtWinAmount",r),q=g("bet/txtBet",r),J=g("cards",n),Y=g("chatBg",n),tt=g("chatBg/txtContent",r),et=g("giftPrize",r),O((nt=e((at=class extends x{constructor(...t){super(...t),i(this,"mainNode",nt,this),i(this,"playerIconNode",st,this),i(this,"border",rt,this),i(this,"sprHeadBg",ot,this),i(this,"renmingdi",ht,this),i(this,"fxWin",lt,this),i(this,"fxQiao",pt,this),i(this,"cuopaizhong",ut,this),i(this,"btnReadVoice",ct,this),i(this,"fxXiupai",dt,this),i(this,"imgZhuang",yt,this),i(this,"imgOperateBg",mt,this),i(this,"countdown",gt,this),i(this,"countdownLiuzuo",wt,this),i(this,"txtScore",Ct,this),i(this,"guanzhan",ft,this),i(this,"betStart",bt,this),i(this,"betParent",Dt,this),i(this,"txtSitdown",vt,this),i(this,"winNode",It,this),i(this,"txtWinAmount",St,this),i(this,"txtBet",Pt,this),i(this,"handCards",xt,this),i(this,"chatParent",zt,this),i(this,"txtChatContent",Bt,this),i(this,"txtGiftPrize",Ot,this),this.choumaPrafab=null,this._seatId=void 0,this.uiIndex=void 0,this.playerData=void 0,this.playerHeadIcon=void 0,this.cardCmpt=void 0,this.operateCountdown=void 0,this.liuzouCountdown=void 0,this.chatMsg=void 0}onLoad(){super.onLoad(),this.initData(),this.initUICompt(),this.initUIEvent(),this.cuopaizhong.active=!1}initData(){this.uiIndex=-1,this.resetData()}initUICompt(){this.generateChouma(),this.cardCmpt=this.handCards.addComponent(v),this.operateCountdown=this.countdown.addComponent(P),this.liuzouCountdown=this.countdownLiuzuo.addComponent(P),this.playerHeadIcon=this.playerIconNode.addComponent(z),this.hide(),this.node.active=!0,this.mainNode.active=!0,this.playerHeadIcon.node.active=!0,this.handCards.active=!0,this.operateCountdown.init(this.closeCountdown.bind(this),!0,this.coundownUpdate.bind(this)),this.liuzouCountdown.init(this.louzuoCoundownFinished.bind(this),!1,this.louzuoCoundownUpdate.bind(this))}louzuoCoundownFinished(){this.countdown.active=!1,this.countdownLiuzuo.active=!1,this.playerData.isSelf&&App.event.emitCustom(b.PlayerHideBack,!1),this.playerData&&this.playerData.isKeepSeat&&w.onUserKeepSeatTimeout(this.playerData.seatId)}coundownUpdate(t){this.playerData&&this.playerData.setOperateLeftTime(t)}louzuoCoundownUpdate(t){this.playerData&&(this.playerData.keepSeatRemainTime=t)}resetData(){this._seatId=-1,this.playerData=null}hide(){this.renmingdi.active=!1,this.guanzhan.active=!1,this.fxWin.active=!1,this.fxQiao.active=!1,this.fxXiupai.active=!1,this.imgZhuang.active=!1,this.betParent.active=!1,this.countdown.active=!1,this.countdownLiuzuo.active=!1,this.txtSitdown.active=!1,this.showTouXiang(!0),this.playerHeadIcon.empty(),this.imgOperateBg.node.active=!1,this.winNode.active=!1,this.chatParent.active=!1,this.txtGiftPrize.node.active=!1,this.btnReadVoice.active=!1}showSit(){this.txtSitdown.active=!0,this.showTouXiang(!1)}showTouXiang(t){this.sprHeadBg.loadImage({url:"common/images/touxiangkuang2",view:this,bundle:S.BUNDLE_RESOURCES}),this.border.active=!1}resetDeskInfo(){this.cardCmpt.hide(),this.winNode.active=!1,this.imgOperateBg.node.active=!1,this.fxWin.active=!1,this.fxQiao.active=!1,this.fxXiupai.active=!1,this.betParent.active=!1,this.playerHeadIcon.setGray(!1),this.setHandGray(!1)}hideBet(){this.betParent.active=!1}initUIEvent(){this.onN(this.playerIconNode,n.EventType.TOUCH_END,this.onClick)}addEvents(){super.addEvents(),this.onCustom(b.PlayerAct,this.onPlayerAct),this.onCustom(b.SetBanker,this.onSetBanker),this.onCustom(b.TurnToPlayer,this.onTurnToPlayer),this.onCustom(b.OperateSuccess,this.onOperateSuccess),this.onCustom(b.PhaseChange,this.onPhaseChange),this.onCustom(b.FenPaiSuccess,this.onFenPaiSuccess),this.onCustom(b.BroadChatMsg,this.onBroadChatMsg),this.onCustom(b.PlayOtherVoice,this.PlayOtherVoice),this.onCustom(b.PlayerBalanceChanged,this.refreshMoney),this.onCustom(b.PlayerBackSitDown,this.onBackClick),this.onN(this.btnReadVoice,n.EventType.TOUCH_END,this.onReadVoice)}init(t){this.uiIndex=t,this.cardCmpt.setPosIndex(this.uiIndex)}setSeatId(t){this._seatId=t}getSeatId(){return this._seatId}onBackClick(){var t=D.getMyself();t&&t.playerId&&this.playerData&&this.playerData.playerId&&this.playerData.playerId==t.playerId&&this.onClick()}onClick(){if(this.playerData){var t=D.getMyself();t&&t.isKeepSeat&&this.playerData.playerId==t.playerId?App.event.emitCustom(b.ShowTakeMoney,this._seatId,this.node.userData,!0):t&&t.playerId==this.playerData.playerId||App.event.emitCustom(b.ShowPlayerDetail,this.playerData)}else D.isIHasSeat||App.event.emitCustom(b.ShowTakeMoney,this._seatId,this.node.userData,!0)}onBroadChatMsg(t){t.type==C.VOICE&&this.playerData&&t.from==this.playerData.playerId&&(this.chatMsg=t,this.btnReadVoice.active=!0,this.playerData.isMuteVoice||this.onReadVoice())}onReadVoice(){this.chatMsg&&this.chatMsg.url&&(App.globalAudio.musicVolume=.1,I.onStartPlayAudio(this.chatMsg.url),this.scheduleOnce((()=>{this.node&&this.btnReadVoice&&(App.globalAudio.musicVolume=.1,this.btnReadVoice.active=!1)}),this.chatMsg.time))}PlayOtherVoice(t){this.chatMsg&&this.chatMsg.from&&t==this.chatMsg.from&&this.onReadVoice()}setPlayerView(t){t.uiId==this.uiIndex&&(this.hide(),this._seatId=t.seatId,this.playerData=t,this.showBaseSeatUI(),this.playerData.seatId!=D.mySeatId&&D.isGaming?this.showHandCards(2):this.cardCmpt.hide(),this.playerData.isGameing&&D.isGaming&&(this.betParent.active=!0,this.refreshMoney(),D.gameState==f.FEN&&this.playerData.canOperate?this.onPhaseChange(D.gameState):(this.playerData.playerAction==B.GEN||this.playerData.playerAction)&&(this.imgOperateBg.node.active=!0,this.showOperateFx(this.playerData.playerAction),this.loadOperateBg(this.imgOperateBg,this.getOperateBgPath(this.playerData.playerAction)),this.playerData.playerAction==B.DIU&&(this.playerHeadIcon.setGray(!0),this.setHandGray(!0),this.cardCmpt.setCardActvie(2,!1)))),this.playerData.isKeepSeat&&this.playerData.keepSeatRemainTime>0&&(this.liuzouCountdown.startCountdown(300,this.playerData.keepSeatRemainTime),App.event.emitCustom(b.PlayerKeepStand)),this.playerData.seatId==D.curTurnSeatId&&this.operateCountdown.startCountdown(this.playerData.crtOperatTotalTime,this.playerData.crtOperateLeftTime))}initPlayerInfo(t){t?this.setPlayerView(t):this.showEmptySeat()}addTime(t){this.operateCountdown.addTime(t),this.popupOperate("tips_addtime")}onPlayerAct(t,e,i){if(t==this._seatId)if(Log.d(`PlayerView 执行操作 ${e}, ${i}`),this.popupOperate(this.getOperateBgPath(e)),this.showOperateFx(e),e==B.DIU)this.playerHeadIcon.setGray(!0),this.onDiuPai(),this.setHandGray(!0);else if(e!=B.XIU)if(this.choumaPrafab){var a=h(this.choumaPrafab);this.node.addChild(a),a.active=!0,a.position=this.betStart.position,l(a).to(.2,{position:this.betParent.position}).call((()=>{a.active=!1,a.destroy(),this.refreshMoney()})).start()}else this.refreshMoney()}syncFenPaiState(t){var e=t?"tips_fenpai":"tips_yifenpai";this.popupOperate(e)}popupOperate(t){this.loadOperateBg(this.imgOperateBg,t),this.imgOperateBg.node.active=!0,this.imgOperateBg.node.position=p.ZERO,l(this.imgOperateBg.node).to(.08,{position:u(0,80,0)},{easing:"sineIn"}).to(.02,{position:u(0,85,0)}).to(.02,{position:u(0,75,0)}).to(.02,{position:u(0,85,0)}).to(.02,{position:u(0,75,0)}).to(.02,{position:u(0,65,0)}).to(.02,{position:new p(0,60,0)}).start()}showOperateFx(t){t==B.QIAO&&(this.fxQiao.active=!0)}onSetBanker(t){var e=this._seatId==t;this.imgZhuang.active=e}onTurnToPlayer(t){this.playerData&&(D.curTurnSeatId==this._seatId?(this.imgOperateBg.node.active=!1,this.operateCountdown.startCountdown(this.playerData.crtOperatTotalTime,this.playerData.crtOperateLeftTime)):this.playerData.isKeepSeat||this.closeCountdown())}onOperateSuccess(){D.isMySelf(this._seatId)&&this.playerData&&!this.playerData.isKeepSeat&&this.closeCountdown()}onPhaseChange(t){null==this.playerData||this.playerData.isKeepSeat||(this.closeCountdown(),t==f.BEGIN||(t==f.FEN?(Log.d(`[CheXuanView] 玩家状态 ${this.playerData.seatId} ${this.playerData.canOperate}`),this.playerData.canOperate&&(this.playerData.splited?this.syncFenPaiState(!1):(this.operateCountdown.startCountdown(this.playerData.crtOperatTotalTime,this.playerData.crtOperateLeftTime),this.syncFenPaiState(!0)))):t==f.SETTLE&&(this.fxQiao.active=!1,this.playerData.playerAction!=B.DIU&&this.playerData.playerAction!=B.XIU&&(this.imgOperateBg.node.active=!1),this.updatePlayerState())))}onFenPaiSuccess(t,e){if(t==this._seatId)if(this.closeCountdown(),e){var i=B.DIU;this.popupOperate(this.getOperateBgPath(i))}else this.syncFenPaiState(!1)}closeCountdown(){this.countdown.active=!1,this.countdownLiuzuo.active=!1}playBet(t){null!=this.playerData&&0!=this.playerData.betMangoAmount&&(this.betParent.active=!0,this.txtBet.string=I.getScoreImplicit(t))}refreshMoney(){null==this.playerData?(this.txtBet.string="0",this.txtScore.string="0"):(Log.d(`玩家金币: betAmount = ${this.playerData.betAmount}, leftMoney = ${this.playerData.leftMoney}`),this.txtBet.string=I.getScoreImplicit(this.playerData.betAmount),this.txtScore.string=I.getScoreImplicit(this.playerData.leftMoney))}onPlayerLeave(t){null!=this.playerData&&this.playerData.seatId==t&&this.showEmptySeat()}showEmptySeat(){this.playerData=null,this.resetDeskInfo(),this.hide(),this.txtSitdown.active=!0,D.isIHasSeat||this.showTouXiang(!1)}showBaseSeatUI(){let t=null;t=this.playerData.remarkName&&this.playerData.remarkName.uid&&this.playerData.remarkName.remarkName?this.playerData.remarkName.remarkName:this.playerData.playerName,this.playerHeadIcon.setBasicInfo(t,this.playerData.avatar),this.renmingdi.active=!0,this.imgZhuang.active=this.playerData.isBanker,this.updatePlayerState(),this.refreshMoney()}updatePlayerState(){this.guanzhan.active=!this.playerData.isGameing&&!this.playerData.isKeepSeat&&D.isGaming}onFaPaiEnd(t,e){null!=this.playerData?this.showHandCards(t,e):Log.e("[PlayerView] 发牌结束，玩家数据为空, 需要检查")}showHandCards(t,e){this.playerData&&(2==this.playerData.cardCount?this.cardCmpt.showFapaiCard(t):3==this.playerData.cardCount?this.cardCmpt.showMingCard1(this.playerData.handCards[0]):4==this.playerData.cardCount?1==e?(this.cuopaizhong.active=!0,this.scheduleOnce((()=>{this.node&&this.cardCmpt&&(this.cardCmpt.showMingCard1(this.playerData.handCards[0],!1),this.cardCmpt.showMingCard2(this.playerData.handCards[1]),this.cuopaizhong.active=!1)}),4)):(this.cardCmpt.showMingCard1(this.playerData.handCards[0],!1),this.cardCmpt.showMingCard2(this.playerData.handCards[1])):this.cardCmpt.hide())}xiuCard(t){this.cardCmpt.showXiuCard(t)}showFenPaiResult(t,e){this.cardCmpt.showFenCard(t,e)}showWinMoney(t){let e=new c;c.fromEuler(e,0,0,180),this.fxWin.active=!0,l(this.fxWin).delay(3).call((()=>{this.fxWin.active=!1})).start(),this.winNode.active=!0,this.txtWinAmount.string=I.getScoreImplicit(t),this.winNode.position=new p(0,0,0),l(this.winNode).to(.08,{position:u(0,80,0)},{easing:"sineIn"}).to(.02,{position:u(0,85,0)}).to(.02,{position:u(0,75,0)}).to(.02,{position:u(0,85,0)}).to(.02,{position:u(0,75,0)}).to(.02,{position:u(0,65,0)}).to(.02,{position:new p(0,60,0)}).delay(3).call((()=>{this.winNode.active=!1})).start()}showGiftPrize(t){this.txtGiftPrize.string="+"+I.getScoreImplicit(t);var e=this.txtGiftPrize.node;e.active=!0,e.position=new p(0,0,0),e.scale=p.ZERO;let i=l(e).to(.3,{position:new p(0,100,0)}),a=l(e).to(.3,{scale:p.ONE});l(e).parallel(i,a).delay(1).call((()=>{e.active=!1})).start()}loadOperateBg(t,e){App.asset.loadSF(S.BUNDLE_CheXuan,"images/operate/"+e,(e=>{t.spriteFrame=e}))}showChatMsg(t){this.chatParent.active=!0,this.txtChatContent.string=t,this.schedule((()=>{this.chatParent&&(this.chatParent.active=!1)}),3,1,3)}getOperateBgPath(t){switch(t){case B.GEN:return"tips_geng";case B.DA:return"tips_da";case B.DIU:return"tips_diu";case B.QIAO:return"tips_qiao";case B.XIU:return"tips_xiu"}}generateChouma(){App.asset.load(S.BUNDLE_CheXuan,"prefabs/sprChouma",d,(()=>{}),(t=>{const e=h(t.data);this.node.addChild(e),this.choumaPrafab=e,this.choumaPrafab.active=!1}))}onDiuPai(){const t=y.getVisibleSize(),e=new p(t.width/2,t.height/2,0);let i=h(this.handCards.getChildByName("card1"));i.parent=this.handCards,i.active||(i.active=!0);let a=h(this.handCards.getChildByName("card2"));a.active||(i.active=!0),a.parent=this.handCards;let n=i.getComponent(m).convertToWorldSpaceAR(new p(0,0,0)),s=a.getComponent(m).convertToWorldSpaceAR(new p(0,0,0));l(i).to(.5,{position:new p(e.x-n.x,e.y-n.y,n.z)}).call((()=>{i.removeFromParent()})).start(),l(a).to(.5,{position:new p(e.x-s.x,e.y-s.y,s.z)}).call((()=>{a.removeFromParent(),this.cardCmpt.setCardActvie(2,!1)})).start()}setHandGray(t){this.handCards.getChildByName("card1").getComponent(s).grayscale=t,this.handCards.getChildByName("card2").getComponent(s).grayscale=t}}).prototype,"mainNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(at.prototype,"playerIconNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(at.prototype,"border",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(at.prototype,"sprHeadBg",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(at.prototype,"renmingdi",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(at.prototype,"fxWin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(at.prototype,"fxQiao",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(at.prototype,"cuopaizhong",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(at.prototype,"btnReadVoice",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(at.prototype,"fxXiupai",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(at.prototype,"imgZhuang",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(at.prototype,"imgOperateBg",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(at.prototype,"countdown",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(at.prototype,"countdownLiuzuo",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(at.prototype,"txtScore",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(at.prototype,"guanzhan",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(at.prototype,"betStart",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(at.prototype,"betParent",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(at.prototype,"txtSitdown",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(at.prototype,"winNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(at.prototype,"txtWinAmount",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(at.prototype,"txtBet",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(at.prototype,"handCards",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(at.prototype,"chatParent",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(at.prototype,"txtChatContent",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(at.prototype,"txtGiftPrize",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=at))||it));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerZhanJiItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./Utils.ts"],(function(t){"use strict";var e,i,r,l,a,n,o,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,l=t.Label,a=t._decorator,n=t.Color},function(t){o=t.default},function(t){c=t.inject},function(t){s=t.default}],execute:function(){var u,b,p,h,f,g,m,T,y,d,z,I,S,D,P,w,v;r._RF.push({},"f9ee1GYMTFDTYgyNgQa6Rw8","PlayerZhanJiItem",void 0);const{ccclass:x}=a;t("default",(u=x("PlayerZhanJiItem"),b=c("ID",l),p=c("TotalHand",l),h=c("Total",l),f=c("Score",l),g=c("Prize",l),m=c("Tax",l),T=c("Time",l),u((z=e((d=class extends o{constructor(...t){super(...t),i(this,"labID",z,this),i(this,"TotalHand",I,this),i(this,"labTotal",S,this),i(this,"labScore",D,this),i(this,"labPrize",P,this),i(this,"labTax",w,this),i(this,"labTime",v,this)}setData(t,e,i,r,l=0,a=0,o=0){this.labTime.string=""+Math.ceil(i/60),this.labPrize.node.active=!1,this.labTax.node.active=!1,this.labID.string=App.utils.contentSubRe(t)||"",this.TotalHand.string=""+o,this.labTotal.string=s.getScoreImplicit(e||0),this.labScore.string=s.getScoreImplicit(r||0),this.labScore.color=new n(r>=0?"FF0000":"00FF00"),this.labPrize.string=s.getScoreImplicit(l||0),this.labTax.string=s.getScoreImplicit(a||0)}}).prototype,"labID",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(d.prototype,"TotalHand",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(d.prototype,"labTotal",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(d.prototype,"labScore",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(d.prototype,"labPrize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(d.prototype,"labTax",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"labTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/PrizePoolView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./Config.ts","./PrizePoolViewTotal.ts","./PrizePoolViewRecord.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,l,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,r=t._decorator},function(t){a=t.default},function(t){s=t.inject},function(t){l=t.Config},function(t){c=t.PrizePoolViewTotal},function(t){h=t.PrizePoolViewRecord}],execute:function(){var u,b,g,P,p,d,f,z,T,y,v,C,w,E,R,m,N;n._RF.push({},"c766a/d5R1KyZPF6WfWKFYg","PrizePoolView",void 0);const{ccclass:D,property:_}=r;t("PrizePoolView",(u=D("PrizePoolView"),b=s("tanchudi/btnClose",o),g=s("tanchudi/tabs/btnTotal",o),P=s("tanchudi/tabs/btnPrize",o),p=s("tanchudi/tabs/btnRecord",o),d=s("tanchudi/pages/totalPage",o),f=s("tanchudi/pages/prizePage",o),z=s("tanchudi/pages/recordPage",o),u((v=e((y=class extends a{constructor(...t){super(...t),i(this,"btnClose",v,this),i(this,"btnTotal",C,this),i(this,"btnPrize",w,this),i(this,"btnRecord",E,this),i(this,"totalPage",R,this),i(this,"prizePage",m,this),i(this,"recordPage",N,this)}get tabs(){return[this.btnTotal,this.btnPrize,this.btnRecord]}get pages(){return[this.totalPage,this.prizePage,this.recordPage]}onLoad(){super.onLoad(),this.totalPage.addComponent(c),this.recordPage.addComponent(h),this.changeToPage(this.btnRecord,this.recordPage,3)}addEvents(){this.onN(this.btnClose,o.EventType.TOUCH_END,this.close),this.onN(this.node,o.EventType.TOUCH_END,this.close),this.onN(this.btnTotal,o.EventType.TOUCH_END,(()=>this.changeToPage(this.btnTotal,this.totalPage,1))),this.onN(this.btnPrize,o.EventType.TOUCH_END,(()=>this.changeToPage(this.btnPrize,this.prizePage,2))),this.onN(this.btnRecord,o.EventType.TOUCH_END,(()=>this.changeToPage(this.btnRecord,this.recordPage,3)))}changeToPage(t,e,i){App.globalAudio.playGlobalEffect(l.audioPath.button),this.tabs.forEach((e=>{e.getChildByPath("Label").active=e!=t,e.getChildByPath("activeLab").active=e==t}));this.pages.forEach((t=>t.active=t==e))}close(){this.node.active=!1}}).prototype,"btnClose",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(y.prototype,"btnTotal",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(y.prototype,"btnPrize",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(y.prototype,"btnRecord",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(y.prototype,"totalPage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(y.prototype,"prizePage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(y.prototype,"recordPage",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=y))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/PrizePoolViewPrize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./CheXuanData.ts","./GameDefine.ts"],(function(e){"use strict";var r,t,i,o,s,n,u,l,a,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Sprite,s=e.Label,n=e._decorator},function(e){u=e.default},function(e){l=e.inject},function(e){a=e.CheXuanData},function(e){g=e.GamePrizeType}],execute:function(){var p,c,P,f,h,z,d,b,y,D,m,x,_,w,R;i._RF.push({},"5eb8bs0kAVKqofrYF5OxMF3","PrizePoolViewPrize",void 0);const{ccclass:v,property:I}=n;e("PrizePoolViewPrize",(p=v("PrizePoolViewPrize"),c=l("list/prizeItem_tian/progress/progress_fg",o),P=l("list/prizeItem_tian/progress/txtProgress",s),f=l("list/prizeItem_duo/progress/progress_fg",o),h=l("list/prizeItem_duo/progress/txtProgress",s),z=l("list/prizeItem_duoduo/progress/progress_fg",o),d=l("list/prizeItem_duoduo/progress/txtProgress",s),p((D=r((y=class extends u{constructor(...e){super(...e),t(this,"tianProgress",D,this),t(this,"txtTianProgress",m,this),t(this,"duoProgress",x,this),t(this,"txtDuoProgress",_,this),t(this,"duoduoProgress",w,this),t(this,"txtDuoduoProgress",R,this)}onEnable(){Log.d("[PrizePoolViewPrize] onEnable",a.prizeConfig);var e=a.prizeConfig;if(e&&0!=e.length){var r=this.getRateByType(e,g.SKY_KING),t=this.getRateByType(e,g.DD_KING),i=this.getRateByType(e,g.DD);this.tianProgress.fillRange=r,this.txtTianProgress.string=100*r+"%",this.duoProgress.fillRange=t,this.txtDuoProgress.string=100*t+"%",this.duoduoProgress.fillRange=i,this.txtDuoduoProgress.string=100*i+"%"}}getRateByType(e,r){for(var t=0;t<e.length;t++)if(e[t].type==r)return e[t].rate/100;return 0}}).prototype,"tianProgress",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(y.prototype,"txtTianProgress",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(y.prototype,"duoProgress",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(y.prototype,"txtDuoProgress",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(y.prototype,"duoduoProgress",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(y.prototype,"txtDuoduoProgress",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/PrizePoolViewRecord.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Decorators.ts","./EventComponent.ts","./CheXuanModel.ts","./Utils.ts","./PokerUtils.ts"],(function(e){"use strict";var t,i,n,r,s,o,a,l,c,h,u,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,s=e._decorator,o=e.Toggle,a=e.instantiate,l=e.Label},function(e){c=e.inject},function(e){h=e.default},function(e){u=e.CheXuanModel},function(e){g=e.default},function(e){p=e.PokerUtils}],execute:function(){var d,m,b,w,f,P,L,y,C,W,v;n._RF.push({},"02cb1jPLy5DGIyrp2M3g7RE","PrizePoolViewRecord",void 0);const{ccclass:z,property:I}=s;e("PrizePoolViewRecord",(d=z("PrizePoolViewRecord"),m=c("tabs",r),b=c("bestWinner",r),w=c("winer_list/view/content",r),f=c("winerItem",r),d((y=t((L=class extends h{constructor(...e){super(...e),i(this,"toggleParent",y,this),i(this,"bestWinner",C,this),i(this,"winerListParent",W,this),i(this,"winerItem",v,this),this.inited=!1,this.winnerList=[],this.dipiList=[100,200,500,1e3,2e3,5e3]}onEnable(){this.init()}init(){this.inited||(this.inited=!0,this.winerItem.active=!1,this.initToggleList())}initToggleList(){this.toggleParent.children.forEach(((e,t)=>{e.userData=t,e.on("toggle",(()=>{this.onTabChanged(e)}),this.node)})),this.onTabChanged(this.toggleParent.children[0])}onTabChanged(e){if(e.getComponent(o).isChecked){var t=e.userData,i=this.dipiList[t];u.requestGamePoolWinList({pi:i},(e=>{Log.d("requestGamePoolWinList",e),this.showWinList(e)}))}}showWinList(e){this.winnerList.forEach((e=>e.active=!1)),e.bigWin&&e.bigWin.length>0?this.setWinnerItem(this.bestWinner,e.bigWin[0]):this.bestWinner.active=!1;for(var t=0;t<e.records.length;t++){var i=null;t>=this.winnerList.length?((i=a(this.winerItem)).parent=this.winerListParent,this.winnerList.push(i)):i=this.winnerList[t],i.active=!0,this.setWinnerItem(i,e.records[t])}}setWinnerItem(e,t){e.active=!0,e.getChildByName("playerName").getComponent(l).string=App.utils.contentSubRe(t.username),e.getChildByName("paixing").getComponent(l).string=p.getPrizeTypeName(t.wintype),e.getChildByName("money").getComponent(l).string=g.getScoreImplicit(t.amount),e.getChildByName("date").getComponent(l).string=t.create_time.substring(0,10)}}).prototype,"toggleParent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"bestWinner",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(L.prototype,"winerListParent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(L.prototype,"winerItem",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=L))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/PrizePoolViewTotal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./GunlunView.ts","./CheXuanData.ts","./CheXuanModel.ts","./Utils.ts","./CheXuanEnum.ts"],(function(t){"use strict";var i,e,n,o,l,s,u,a,r,c,h,p,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,l=t._decorator,s=t.Label},function(t){u=t.default},function(t){a=t.inject},function(t){r=t.GunlunView},function(t){c=t.CheXuanData},function(t){h=t.CheXuanModel},function(t){p=t.default},function(t){d=t.CheXuanEvent}],execute:function(){var f,g,P,z,m,C,w;n._RF.push({},"25ef8u2RYlBk6z0LwkFgZnP","PrizePoolViewTotal",void 0);const{ccclass:L,property:v}=l;t("PrizePoolViewTotal",(f=L("PrizePoolViewTotal"),g=a("shuzigunlun",o),P=a("list",o),f((C=i((m=class extends u{constructor(...t){super(...t),e(this,"shuzigunlun",C,this),e(this,"listParent",w,this),this.gunlun=null,this.prizeItemList=[],this.dipiList=[]}onLoad(){super.onLoad(),this.gunlun=this.shuzigunlun.addComponent(r),this.listParent.children.forEach((t=>{this.prizeItemList.push(t),t.active=!1})),this.dipiList=[100,200,500,1e3,2e3,5e3],this.onCustom(d.ShowGoodPool,this.onShowTotalPool)}onShowTotalPool(t){this.gunlun.setNum(t.data.all),t.config&&(c.prizeConfig=t.config),c.prizePools=t.data;for(var i=0;i<this.dipiList.length;i++){var e=this.listParent.children[i],n=t.data.pools.find((t=>t.pi==this.dipiList[i]));n||(n={pi:this.dipiList[i],pool:0}),e.active=!0,e.getChildByPath("txtValue").getComponent(s).string=p.getScoreImplicit(n.pi)+"皮",e.getChildByPath("txtPool").getComponent(s).string=~~p.getScoreImplicit(n.pool)+""}}onEnable(){this.listParent.children.forEach((t=>{t.active=!1})),h.requestGamePool((t=>{this.onShowTotalPool(t)}))}}).prototype,"shuzigunlun",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(m.prototype,"listParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=m))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/RechargeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./WalletRechargePage.ts","./Config.ts","./ConfigInfo.ts","./UserData.ts"],(function(e){"use strict";var t,r,i,n,o,a,c,s,u,l,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,o=e._decorator},function(e){a=e.default},function(e){c=e.inject},function(e){s=e.default},function(e){u=e.Config},function(e){l=e.ConfigInfoEn,f=e.EmConfigData},function(e){p=e.UserDataEn}],execute:function(){var h,g,d,b,v,y,C,m,w;i._RF.push({},"6d00faPG+FKnqvoOoOuAex4","RechargeView",void 0);const{ccclass:D,property:E}=o;e("RechargeView",(h=D("RechargeView"),g=c("safeArea/topLayout/btnBack",n),d=c("safeArea/topLayout/customerService",n),b=c("safeArea/ScrollView/view/recharge",n),h((C=t((y=class extends a{constructor(...e){super(...e),r(this,"btnClose",C,this),r(this,"customerService",m,this),r(this,"recharge",w,this)}static getPrefabUrl(){return"prefabs/RechargeView"}onLoad(){super.onLoad(),this.recharge.addComponent(s),this.onN(this.customerService,n.EventType.TOUCH_END,this.toService)}addEvents(){this.onN(this.btnClose,n.EventType.TOUCH_END,this.close,this)}toService(){App.globalAudio.playGlobalEffect(u.audioPath.button);const e=l.getConfig(f.CONFIG);if(e&&e.chat_url){var t=p.getUserData(),r=e.chat_url+`?uid=${t.id}&uname=${encodeURI(t.username)}`;App.nativeBridge.openUrl(r)}else App.tips.show("获取聊天链接地址失败！")}}).prototype,"btnClose",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(y.prototype,"customerService",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"recharge",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/remarkView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./Config.ts","./CommonData.ts"],(function(e){"use strict";var t,i,r,o,n,s,a,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.Node,n=e.EditBox,s=e._decorator},function(e){a=e.default},function(e){l=e.inject},function(e){u=e.Config},function(e){c=e.EmRoomEvent}],execute:function(){var p,f,m,h,b,d,g,k,C;r._RF.push({},"ff3f8YkkKFOHYBtlCvPj2e4","remarkView",void 0);const{ccclass:N,property:y}=s;e("default",(p=N(),f=l("btnClose",o),m=l("input/EditBox",n),h=l("confirm",o),p((g=t((d=class extends a{constructor(...e){super(...e),i(this,"btnClose",g,this),i(this,"remarkName",k,this),i(this,"confirm",C,this),this.userApi=App.apis.user}static getPrefabUrl(){return"prefabs/remarkView"}onLoad(){super.onLoad(),this.onN(this.btnClose,o.EventType.TOUCH_END,this.onClose),this.onN(this.confirm,o.EventType.TOUCH_END,this.onConfirm)}onConfirm(){App.globalAudio.playGlobalEffect(u.audioPath.button),""!=this.remarkName.string?this.userApi.remarkName(this.args.id,this.remarkName.string).then((e=>{0==e.code&&(App.tips.show("修改备注成功！"),App.event.emit(c.RemarkName,{id:this.args.id,remarkName:this.remarkName.string}),this.close())})):App.tips.show("备注不能为空！")}onClose(){App.globalAudio.playGlobalEffect(u.audioPath.button),this.close()}}).prototype,"btnClose",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(d.prototype,"remarkName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(d.prototype,"confirm",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/SliderProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,s,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.UITransform,o=e._decorator,s=e.Component,l=e.Slider,a=e.Size}],execute:function(){var c,h,d,u,p;i._RF.push({},"e1c2bYEOdVKUbNN1hXMR7yn","SliderProgressBar",void 0);const{ccclass:g,property:S,executeInEditMode:B}=o;e("SliderProgressBar",(c=g("SliderProgressBar"),h=S(n),c(d=B((p=t((u=class extends s{constructor(...e){super(...e),this.slider=null,r(this,"FrontBar",p,this),this._contentSize=null}onLoad(){this.slider=this.getComponent(l);let e=new s.EventHandler;e.target=this.node,e.component="SliderProgressBar",e.handler="onSliderChange",this.slider.slideEvents.push(e),this._contentSize=new a(this.FrontBar.contentSize.width,this.FrontBar.contentSize.height),this.updateFrontBg()}onEnable(){this.updateFrontBg()}onSliderChange(){this.updateFrontBg()}updateFrontBg(){this.slider.direction==l.Direction.Horizontal?this.FrontBar.contentSize=new a(this.slider.progress*this._contentSize.width,this._contentSize.height):this.FrontBar.contentSize=new a(this._contentSize.width,this.slider.progress*this._contentSize.height)}}).prototype,"FrontBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=u))||d)||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/switchRoomView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./Config.ts","./CheXuanModel.ts","./HallData.ts"],(function(t){"use strict";var e,i,n,o,r,s,l,a,u,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,r=t.EditBox,s=t._decorator},function(t){l=t.default},function(t){a=t.inject},function(t){u=t.Config},function(t){c=t.CheXuanModel},function(t){h=t.HallDataEn}],execute:function(){var p,b,d,f,m,g,w,N,C,E,y,R,D,P,T;n._RF.push({},"be14czIPe5EY7W1DnH9TzZP","switchRoomView",void 0);const{ccclass:_,property:v}=s;t("default",(p=_("FriendView"),b=a("SpriteSplash",o),d=a("bg/btnClose",o),f=a("inputRoom/edit_room",r),m=a("inputPwd/edit_pwd",r),g=a("cancel",o),w=a("enter",o),p((E=e((C=class extends l{constructor(...t){super(...t),i(this,"btnExit",E,this),i(this,"btnClose",y,this),i(this,"editRoomNum",R,this),i(this,"editPwd",D,this),i(this,"btnCancel",P,this),i(this,"btnEnter",T,this)}static getPrefabUrl(){return"prefabs/switchRoomView"}onLoad(){super.onLoad(),this.onN(this.btnExit,o.EventType.TOUCH_END,this.onClose),this.onN(this.btnClose,o.EventType.TOUCH_END,this.onClose),this.onN(this.btnCancel,o.EventType.TOUCH_END,this.onClose),this.onN(this.btnEnter,o.EventType.TOUCH_END,this.enterRoom),this.show(this.args)}onClose(){App.globalAudio.playGlobalEffect(u.audioPath.button),this.close()}checkInput(){let t=!0,e=null;if(this.editRoomNum.string&&6==this.editRoomNum.string.length?Number.isNaN(Number(this.editRoomNum.string))&&(t=!1,e="请输入6位数房间号码！"):(t=!1,e="请输入6位数房间号码！"),t){var i=this.editPwd.string.trim();i&&6!=i.length&&(t=!1,e="请输入6位数密码！")}return t||App.tips.show(e),t}enterRoom(){if(App.globalAudio.playGlobalEffect(u.audioPath.button),this.checkInput()){const t=Number(this.editRoomNum.string),e=this.editPwd.string.trim();c.switchTable({isTalbeNo:!0,tableId:t,password:e},(t=>{Log.d("====>>>>enterRoom: ",t),0!=t.code?App.alert.show("更换房间失败!"):(h.setCurEnterRoomData(t.data),c.initRoomInfo())})),this.close(),this.args.target.close()}}}).prototype,"btnExit",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(C.prototype,"btnClose",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(C.prototype,"editRoomNum",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"editPwd",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(C.prototype,"btnCancel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(C.prototype,"btnEnter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=C))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/TableSettingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Decorators.ts","./SaveDataUtils.ts","./CheXuanEnum.ts","./Config.ts","./Macros.ts","./PokerUtils.ts","./UIView.ts"],(function(t){"use strict";var e,i,o,n,a,r,l,s,c,h,u,g,p,b,d,m,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Node,a=t.Toggle,r=t.Sprite,l=t._decorator,s=t.find,c=t.instantiate},function(t){h=t.inject},function(t){u=t.default,g=t.SaveDataType},function(t){p=t.CheXuanEvent},function(t){b=t.Config},function(t){d=t.Macro},function(t){m=t.PokerUtils},function(t){k=t.default}],execute:function(){var f,C,B,N,v,S,T,y,P,w,L,A,D,E,_,z,I,O,U,V,M,F,H,G,X,j,x;o._RF.push({},"f675cqJLzBHwJBtz3NAhQta","TableSettingView",void 0);const{ccclass:J,property:R}=l;t("default",(f=J("TableSettingView"),C=h("btnClose",n),B=h("tanchudi/btnConfirm",n),N=h("chat/ToggleSound",a),v=h("table",r),S=h("poker",r),T=h("tanchudi/select",n),y=h("tanchudi/tableView",n),P=h("tanchudi/tableView/view/content",n),w=h("tanchudi/tableItem",n),L=h("tanchudi/pokerView",n),A=h("tanchudi/pokerView/view/content",n),D=h("tanchudi/pokerItem",n),f((z=e((_=class extends k{constructor(...t){super(...t),i(this,"btnClose",z,this),i(this,"btnConfirm",I,this),i(this,"toggleSound",O,this),i(this,"tableBg",U,this),i(this,"poker",V,this),i(this,"select",M,this),i(this,"tableList",F,this),i(this,"tableContent",H,this),i(this,"tableItem",G,this),i(this,"pokerList",X,this),i(this,"pokerContent",j,this),i(this,"pokerItem",x,this),this.curSelectType=-1,this.crtBgName="",this.crtPokerName="",this.initBgName="",this.initPokerName=""}static getPrefabUrl(){return"prefabs/TableSettingView"}onLoad(){this.onN(this.btnClose,n.EventType.TOUCH_END,this.onClickClose),this.onN(this.btnConfirm,n.EventType.TOUCH_END,this.onClickConfirm),App.globalAudio.isMusicOn||App.globalAudio.isEffectOn?(this.toggleSound.isChecked=!1,s("Background",this.toggleSound.node).active=!0):(this.toggleSound.isChecked=!0,s("Background",this.toggleSound.node).active=!1),this.toggleSound.node.on("toggle",(()=>{this.onBanChat()}),this.node),this.select.children.forEach(((t,e)=>{this.onN(t,a.EventType.TOGGLE,(()=>this.onSelectTog(e)))})),this.crtBgName=u.get("table_picture",g.ALL),this.crtBgName||(this.crtBgName="bg_1"),this.crtPokerName=u.get("poker_back",g.ALL),this.crtPokerName||(this.crtPokerName="p_bei_4"),this.initBgName=this.crtBgName,this.initPokerName=this.crtPokerName,this.loadTableBigBg(),this.loadBigPoker(),this.pokerItem.active=!1,this.tableItem.active=!1,this.initTableList(4),this.initPokerList(4),this.onSelectTog(0)}onBanChat(){var t=this.toggleSound.isChecked;Log.d(`是否禁言：${t}`),this.toggleSound.isChecked?(App.globalAudio.isMusicOn=!1,App.globalAudio.isEffectOn=!1,s("Background",this.toggleSound.node).active=!1):(App.globalAudio.isMusicOn=!1,App.globalAudio.isEffectOn=!0,s("Background",this.toggleSound.node).active=!0)}onSelectTog(t){if(App.globalAudio.playGlobalEffect(b.audioPath.button),this.select.children[t].getComponent(a).isChecked){if(this.curSelectType==t)return;Log.d(`onSelectTog: ${t}`),this.curSelectType=t,this.tableList.active=0==this.curSelectType,this.pokerList.active=1==this.curSelectType}}initTableList(t){for(var e=0;e<t;e++){var i=c(this.tableItem);this.tableContent.addChild(i),i.active=!0,this.onShowTableItem(i,e)}}onShowTableItem(t,e){t.userData="bg_"+(e+1);let i=t.getComponent(r),o=t.getChildByName("Checkmark");this.loadTableSmllBg(i,t.userData),o.active=t.userData==this.crtBgName,this.onN(t,n.EventType.TOUCH_END,(()=>{this.crtBgName=t.userData,this.loadTableBigBg(),this.tableContent.children.forEach((t=>{t.getChildByName("Checkmark").active=t.userData==this.crtBgName}))}))}initPokerList(t){for(var e=0;e<t;e++){var i=c(this.pokerItem);this.pokerContent.addChild(i),i.active=!0,this.onShowPokerItem(i,e)}}onShowPokerItem(t,e){t.userData="p_bei_"+(e+1);var i=t.getComponent(r),o=t.getChildByName("Checkmark");m.loadPoker(i,t.userData),o.active=t.userData==this.crtPokerName,this.onN(t,n.EventType.TOUCH_END,(()=>{this.crtPokerName=t.userData,this.loadBigPoker(),this.pokerContent.children.forEach((t=>{t.getChildByName("Checkmark").active=t.userData==this.crtPokerName}))}))}loadTableSmllBg(t,e){App.asset.loadSF(d.BUNDLE_CheXuan,"images/bgMin/"+e,(e=>{null!=e&&(t.spriteFrame=e)}))}loadTableBigBg(){var t=this.crtBgName;App.asset.loadSF(d.BUNDLE_CheXuan,"images/bgs/"+t,(t=>{null!=t&&(this.tableBg.spriteFrame=t)}))}loadBigPoker(){m.loadPoker(this.poker,this.crtPokerName+"_big")}onClickConfirm(){this.crtPokerName!=this.initPokerName&&(u.set("poker_back",this.crtPokerName,g.ALL),App.event.emitCustom(p.ChangePokerBack)),this.crtBgName!=this.initBgName&&(u.set("table_picture",this.crtBgName,g.ALL),App.event.emitCustom(p.ChangeTableBg)),this.onClickClose()}onClickClose(){App.globalAudio.playGlobalEffect(b.audioPath.close),this.close()}}).prototype,"btnClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(_.prototype,"btnConfirm",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(_.prototype,"toggleSound",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(_.prototype,"tableBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(_.prototype,"poker",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(_.prototype,"select",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(_.prototype,"tableList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(_.prototype,"tableContent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(_.prototype,"tableItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(_.prototype,"pokerList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(_.prototype,"pokerContent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(_.prototype,"pokerItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=_))||E));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/chexuan', 'chunks:///_virtual/chexuan'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});